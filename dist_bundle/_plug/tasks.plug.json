{
  "name": "tasks",
  "imports": [
    "https://get.silverbullet.md/global.plug.json"
  ],
  "syntax": {
    "DeadlineDate": {
      "firstCharacters": [
        "📅"
      ],
      "regex": "📅\\s*\\d{4}\\-\\d{2}\\-\\d{2}",
      "styles": {
        "backgroundColor": "rgba(22,22,22,0.07)"
      }
    },
    "CompletedDate": {
      "firstCharacters": [
        "✅"
      ],
      "regex": "✅\\s*\\d{4}\\-\\d{2}\\-\\d{2}",
      "styles": {
        "backgroundColor": "rgba(22,22,22,0.07)"
      }
    },
    "RepeatInterval": {
      "firstCharacters": [
        "🔁"
      ],
      "regex": "🔁\\s*every\\s+\\w+",
      "styles": {
        "backgroundColor": "rgba(22,22,22,0.07)"
      }
    }
  },
  "functions": {
    "turnIntoTask": {
      "redirect": "core.applyLineReplace",
      "slashCommand": {
        "name": "task",
        "description": "Turn into task",
        "match": "^(\\s*)[\\-\\*]?\\s*(\\[[ xX]\\])?\\s*",
        "replace": "$1* [ ] "
      }
    },
    "indexTasks": {
      "events": [
        "page:index"
      ],
      "code": "(() => { var mod=(()=>{var d=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var P=(r,e)=>{for(var n in e)d(r,n,{get:e[n],enumerable:!0})},S=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of M(e))!A.call(r,i)&&i!==n&&d(r,i,{get:()=>e[i],enumerable:!(o=b(e,i))||o.enumerable});return r};var F=r=>S(d({},\"__esModule\",{value:!0}),r);var W={};P(W,{default:()=>K});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var u={};P(u,{batchSet:()=>C,clearPageIndex:()=>Q,clearPageIndexForPage:()=>q,del:()=>N,deletePrefixForPage:()=>L,get:()=>I,query:()=>R,queryPrefix:()=>O,set:()=>E});function E(r,e,n){return t(\"index.set\",r,e,n)}function C(r,e){return t(\"index.batchSet\",r,e)}function I(r,e){return t(\"index.get\",r,e)}function N(r,e){return t(\"index.delete\",r,e)}function O(r){return t(\"index.queryPrefix\",r)}function R(r){return t(\"index.query\",r)}function q(r){return t(\"index.clearPageIndexForPage\",r)}function L(r,e){return t(\"index.deletePrefixForPage\",r,e)}function Q(){return t(\"index.clearPageIndex\")}var p=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},h=new p;function f(r){if(!!r.children)for(let e of r.children){if(e.parent)return;e.parent=r,f(e)}}function T(r,e){return m(r,n=>n.type===e)}function m(r,e){if(e(r))return[r];let n=[];if(r.children)for(let o of r.children)n=[...n,...m(o,e)];return n}function c(r,e){if(r.children){let n=r.children.slice();for(let o of n){let i=e(o);if(i!==void 0){let s=r.children.indexOf(o);i?r.children.splice(s,1,i):r.children.splice(s,1)}else c(o,e)}}}function a(r){let e=[];if(r.text!==void 0)return r.text;for(let n of r.children)e.push(a(n));return e.join(\"\")}function k(r){c(r,e=>{if(e.type!==\"Directive\")return;let n=a(e);return{from:e.from,to:e.to,text:new Array(n.length+1).join(\" \")}})}function V(r){return r.children[0].text.replace(/📅\\s*/,\"\")}async function v({name:r,tree:e}){let n=[];k(e),f(e),T(e,\"Task\").forEach(o=>{let i=o.children[0].children[0].text!==\"[ ]\",s={name:\"\",done:i};c(o,l=>{if(l.type===\"DeadlineDate\")return s.deadline=V(l),null;l.type===\"Hashtag\"&&(s.tags||(s.tags=[]),s.tags.push(l.children[0].text.substring(1)))}),s.name=o.children.slice(1).map(a).join(\"\").trim();let w=o.parent.children.indexOf(o),g=o.parent.children.slice(w+1);g.length>0&&(s.nested=g.map(a).join(\"\").trim()),n.push({key:`task:${o.from}`,value:s})}),await u.batchSet(r,n)}var K=v;return F(W);})();\n return mod;})()"
    },
    "taskToggle": {
      "events": [
        "page:click"
      ],
      "code": "(() => { var mod=(()=>{var f=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var g=(e,r)=>{for(var n in r)f(e,n,{get:r[n],enumerable:!0})},S=(e,r,n,o)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let i of M(r))!A.call(e,i)&&i!==n&&f(e,i,{get:()=>r[i],enumerable:!(o=b(r,i))||o.enumerable});return e};var F=e=>S(f({},\"__esModule\",{value:!0}),e);var ue={};g(ue,{default:()=>le});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var s={};g(s,{confirm:()=>z,dispatch:()=>Y,downloadFile:()=>U,filterBox:()=>$,flashNotification:()=>j,getCurrentPage:()=>E,getCursor:()=>N,getSelection:()=>O,getText:()=>I,getUiOption:()=>G,hidePanel:()=>K,insertAtCursor:()=>X,insertAtPos:()=>W,moveCursor:()=>J,navigate:()=>L,openUrl:()=>B,prompt:()=>_,reloadPage:()=>Q,replaceRange:()=>H,save:()=>q,setPage:()=>C,setSelection:()=>R,setUiOption:()=>Z,showPanel:()=>V,vimEx:()=>ee});function E(){return t(\"editor.getCurrentPage\")}function C(e){return t(\"editor.setPage\",e)}function I(){return t(\"editor.getText\")}function N(){return t(\"editor.getCursor\")}function O(){return t(\"editor.getSelection\")}function R(e,r){return t(\"editor.setSelection\",e,r)}function q(){return t(\"editor.save\")}function L(e,r,n=!1,o=!1){return t(\"editor.navigate\",e,r,n,o)}function Q(){return t(\"editor.reloadPage\")}function B(e){return t(\"editor.openUrl\",e)}function U(e,r){return t(\"editor.downloadFile\",e,r)}function j(e,r=\"info\"){return t(\"editor.flashNotification\",e,r)}function $(e,r,n=\"\",o=\"\"){return t(\"editor.filterBox\",e,r,n,o)}function V(e,r,n,o=\"\"){return t(\"editor.showPanel\",e,r,n,o)}function K(e){return t(\"editor.hidePanel\",e)}function W(e,r){return t(\"editor.insertAtPos\",e,r)}function H(e,r,n){return t(\"editor.replaceRange\",e,r,n)}function J(e,r=!1){return t(\"editor.moveCursor\",e,r)}function X(e){return t(\"editor.insertAtCursor\",e)}function Y(e){return t(\"editor.dispatch\",e)}function _(e,r=\"\"){return t(\"editor.prompt\",e,r)}function z(e){return t(\"editor.confirm\",e)}function G(e){return t(\"editor.getUiOption\",e)}function Z(e,r){return t(\"editor.setUiOption\",e,r)}function ee(e){return t(\"editor.vimEx\",e)}var a={};g(a,{parseMarkdown:()=>re});function re(e){return t(\"markdown.parseMarkdown\",e)}var m=class{listPages(r=!1){return t(\"space.listPages\",r)}getPageMeta(r){return t(\"space.getPageMeta\",r)}readPage(r){return t(\"space.readPage\",r)}writePage(r,n){return t(\"space.writePage\",r,n)}deletePage(r){return t(\"space.deletePage\",r)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(r){return t(\"space.getAttachmentMeta\",r)}readAttachment(r){return t(\"space.readAttachment\",r)}writeAttachment(r,n,o){return t(\"space.writeAttachment\",r,n,o)}deleteAttachment(r){return t(\"space.deleteAttachment\",r)}readFile(r,n){return t(\"space.readFile\",r,n)}getFileMeta(r){return t(\"space.getFileMeta\",r)}writeFile(r,n,o){return t(\"space.writeFile\",r,n,o)}deleteFile(r){return t(\"space.deleteFile\",r)}listFiles(r){return t(\"space.listFiles\",r)}},l=new m;function P(e){if(!!e.children)for(let r of e.children){if(r.parent)return;r.parent=e,P(r)}}function x(e,r){if(r(e))return[e];let n=[];if(e.children)for(let o of e.children)n=[...n,...x(o,r)];return n}function u(e,r){if(r<e.from||r>=e.to)return null;if(!e.children)return e;for(let n of e.children){let o=u(n,r);if(o&&o.text!==void 0)return e;if(o)return o}return null}function d(e){let r=[];if(e.text!==void 0)return e.text;for(let n of e.children)r.push(d(n));return r.join(\"\")}function v(e){return ce(e.pos)}async function ae(e,r){let n=\"[x]\";(e.children[0].text===\"[x]\"||e.children[0].text===\"[X]\")&&(n=\"[ ]\"),await s.dispatch({changes:{from:e.from,to:e.to,insert:n}});let o=x(e.parent,i=>i.type===\"WikiLinkPage\");for(let i of o){let y=i.children[0].text;if(y.includes(\"@\")){let[h,w]=y.split(\"@\"),p=await l.readPage(h),T=await a.parseMarkdown(p),c=u(T,+w+1);if(!c||c.type!==\"TaskMarker\"){console.error(\"Reference not a task marker, out of date?\",c);return}c.children[0].text=n,p=d(T),await l.writePage(h,p)}}}async function ce(e){let r=await s.getText(),n=await a.parseMarkdown(r);P(n);let o=u(n,e);o&&o.type===\"TaskMarker\"&&await ae(o,e)}var le=v;return F(ue);})();\n return mod;})()"
    },
    "itemQueryProvider": {
      "events": [
        "query:task"
      ],
      "code": "(() => { var mod=(()=>{var d=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var f=(r,e)=>{for(var n in e)d(r,n,{get:e[n],enumerable:!0})},w=(r,e,n,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of k(e))!v.call(r,o)&&o!==n&&d(r,o,{get:()=>e[o],enumerable:!(i=T(e,o))||i.enumerable});return r};var b=r=>w(d({},\"__esModule\",{value:!0}),r);var $={};f($,{default:()=>j});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var u={};f(u,{batchSet:()=>S,clearPageIndex:()=>O,clearPageIndexForPage:()=>I,del:()=>D,deletePrefixForPage:()=>N,get:()=>F,query:()=>C,queryPrefix:()=>E,set:()=>A});function A(r,e,n){return t(\"index.set\",r,e,n)}function S(r,e){return t(\"index.batchSet\",r,e)}function F(r,e){return t(\"index.get\",r,e)}function D(r,e){return t(\"index.delete\",r,e)}function E(r){return t(\"index.queryPrefix\",r)}function C(r){return t(\"index.query\",r)}function I(r){return t(\"index.clearPageIndexForPage\",r)}function N(r,e){return t(\"index.deletePrefixForPage\",r,e)}function O(){return t(\"index.clearPageIndex\")}var p=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,i){return t(\"space.writeAttachment\",e,n,i)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,i){return t(\"space.writeFile\",e,n,i)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},P=new p;function x(r,e){let n=[];if(r.filter.length===0)n=e.slice();else{e:for(let i of e){let o=i;for(let{op:s,prop:c,value:a}of r.filter)switch(s){case\"=\":{let l=o[c];if(Array.isArray(l)&&!Array.isArray(a)){if(!l.includes(a))continue e}else if(Array.isArray(l)&&Array.isArray(a)){if(!l.some(h=>a.includes(h)))continue e}else if(l!=a)continue e;break}case\"!=\":if(o[c]==a)continue e;break;case\"<\":if(!(o[c]<a))continue e;break;case\"<=\":if(!(o[c]<=a))continue e;break;case\">\":if(!(o[c]>a))continue e;break;case\">=\":if(!(o[c]>=a))continue e;break;case\"=~\":if(!new RegExp(a).exec(o[c]))continue e;break;case\"!=~\":if(new RegExp(a).exec(o[c]))continue e;break;case\"in\":if(!a.includes(o[c]))continue e;break}n.push(o)}}return r.ordering.length>0&&(n=n.sort((i,o)=>{for(let{orderBy:s,orderDesc:c}of r.ordering){if(i[s]<o[s]||i[s]===void 0)return c?1:-1;if(i[s]>o[s]||o[s]===void 0)return c?-1:1}return 0})),r.limit&&(n=n.slice(0,r.limit)),r.select&&(n=n.map(i=>{let o={};for(let s of r.select)o[s]=i[s];return o})),n}async function y({query:r}){let e=[];for(let{key:n,page:i,value:o}of await u.queryPrefix(\"task:\")){let s=n.split(\":\")[1];e.push({...o,page:i,pos:s})}return x(r,e)}var j=y;return b($);})();\n return mod;})()"
    },
    "taskToggleCommand": {
      "command": {
        "name": "Task: Toggle",
        "key": "Alt-t",
        "contexts": [
          "Task"
        ]
      },
      "code": "(() => { var mod=(()=>{var m=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var g=(r,e)=>{for(var n in e)m(r,n,{get:e[n],enumerable:!0})},F=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of A(e))!S.call(r,i)&&i!==n&&m(r,i,{get:()=>e[i],enumerable:!(o=M(e,i))||o.enumerable});return r};var C=r=>F(m({},\"__esModule\",{value:!0}),r);var ue={};g(ue,{default:()=>le});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var s={};g(s,{confirm:()=>G,dispatch:()=>_,downloadFile:()=>j,filterBox:()=>V,flashNotification:()=>$,getCurrentPage:()=>E,getCursor:()=>O,getSelection:()=>R,getText:()=>N,getUiOption:()=>Z,hidePanel:()=>W,insertAtCursor:()=>Y,insertAtPos:()=>H,moveCursor:()=>X,navigate:()=>Q,openUrl:()=>U,prompt:()=>z,reloadPage:()=>B,replaceRange:()=>J,save:()=>L,setPage:()=>I,setSelection:()=>q,setUiOption:()=>ee,showPanel:()=>K,vimEx:()=>re});function E(){return t(\"editor.getCurrentPage\")}function I(r){return t(\"editor.setPage\",r)}function N(){return t(\"editor.getText\")}function O(){return t(\"editor.getCursor\")}function R(){return t(\"editor.getSelection\")}function q(r,e){return t(\"editor.setSelection\",r,e)}function L(){return t(\"editor.save\")}function Q(r,e,n=!1,o=!1){return t(\"editor.navigate\",r,e,n,o)}function B(){return t(\"editor.reloadPage\")}function U(r){return t(\"editor.openUrl\",r)}function j(r,e){return t(\"editor.downloadFile\",r,e)}function $(r,e=\"info\"){return t(\"editor.flashNotification\",r,e)}function V(r,e,n=\"\",o=\"\"){return t(\"editor.filterBox\",r,e,n,o)}function K(r,e,n,o=\"\"){return t(\"editor.showPanel\",r,e,n,o)}function W(r){return t(\"editor.hidePanel\",r)}function H(r,e){return t(\"editor.insertAtPos\",r,e)}function J(r,e,n){return t(\"editor.replaceRange\",r,e,n)}function X(r,e=!1){return t(\"editor.moveCursor\",r,e)}function Y(r){return t(\"editor.insertAtCursor\",r)}function _(r){return t(\"editor.dispatch\",r)}function z(r,e=\"\"){return t(\"editor.prompt\",r,e)}function G(r){return t(\"editor.confirm\",r)}function Z(r){return t(\"editor.getUiOption\",r)}function ee(r,e){return t(\"editor.setUiOption\",r,e)}function re(r){return t(\"editor.vimEx\",r)}var a={};g(a,{parseMarkdown:()=>te});function te(r){return t(\"markdown.parseMarkdown\",r)}var P=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},l=new P;function x(r){if(!!r.children)for(let e of r.children){if(e.parent)return;e.parent=r,x(e)}}function u(r,e){if(e(r))return[r];let n=[];if(r.children)for(let o of r.children)n=[...n,...u(o,e)];return n}function v(r,e){return u(r,n=>n.type===e)[0]}function d(r,e){if(e<r.from||e>=r.to)return null;if(!r.children)return r;for(let n of r.children){let o=d(n,e);if(o&&o.text!==void 0)return r;if(o)return o}return null}function p(r){let e=[];if(r.text!==void 0)return r.text;for(let n of r.children)e.push(p(n));return e.join(\"\")}async function ce(r,e){let n=\"[x]\";(r.children[0].text===\"[x]\"||r.children[0].text===\"[X]\")&&(n=\"[ ]\"),await s.dispatch({changes:{from:r.from,to:r.to,insert:n}});let o=u(r.parent,i=>i.type===\"WikiLinkPage\");for(let i of o){let y=i.children[0].text;if(y.includes(\"@\")){let[h,b]=y.split(\"@\"),f=await l.readPage(h),T=await a.parseMarkdown(f),c=d(T,+b+1);if(!c||c.type!==\"TaskMarker\"){console.error(\"Reference not a task marker, out of date?\",c);return}c.children[0].text=n,f=p(T),await l.writePage(h,f)}}}async function w(){let r=await s.getText(),e=await s.getCursor(),n=await a.parseMarkdown(r);x(n);let o=d(n,e),i=v(o,\"TaskMarker\");await ce(i,e)}var le=w;return C(ue);})();\n return mod;})()"
    },
    "taskPostponeCommand": {
      "command": {
        "name": "Task: Postpone",
        "key": "Alt-+",
        "contexts": [
          "DeadlineDate"
        ]
      },
      "code": "(() => { var mod=(()=>{var l=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var u=(r,e)=>{for(var n in e)l(r,n,{get:e[n],enumerable:!0})},v=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of T(e))!k.call(r,s)&&s!==n&&l(r,s,{get:()=>e[s],enumerable:!(o=h(e,s))||o.enumerable});return r};var w=r=>v(l({},\"__esModule\",{value:!0}),r);var ie={};u(ie,{default:()=>oe});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var a={};u(a,{confirm:()=>H,dispatch:()=>K,downloadFile:()=>R,filterBox:()=>L,flashNotification:()=>q,getCurrentPage:()=>M,getCursor:()=>F,getSelection:()=>C,getText:()=>S,getUiOption:()=>J,hidePanel:()=>B,insertAtCursor:()=>V,insertAtPos:()=>U,moveCursor:()=>$,navigate:()=>I,openUrl:()=>O,prompt:()=>W,reloadPage:()=>N,replaceRange:()=>j,save:()=>E,setPage:()=>A,setSelection:()=>D,setUiOption:()=>X,showPanel:()=>Q,vimEx:()=>Y});function M(){return t(\"editor.getCurrentPage\")}function A(r){return t(\"editor.setPage\",r)}function S(){return t(\"editor.getText\")}function F(){return t(\"editor.getCursor\")}function C(){return t(\"editor.getSelection\")}function D(r,e){return t(\"editor.setSelection\",r,e)}function E(){return t(\"editor.save\")}function I(r,e,n=!1,o=!1){return t(\"editor.navigate\",r,e,n,o)}function N(){return t(\"editor.reloadPage\")}function O(r){return t(\"editor.openUrl\",r)}function R(r,e){return t(\"editor.downloadFile\",r,e)}function q(r,e=\"info\"){return t(\"editor.flashNotification\",r,e)}function L(r,e,n=\"\",o=\"\"){return t(\"editor.filterBox\",r,e,n,o)}function Q(r,e,n,o=\"\"){return t(\"editor.showPanel\",r,e,n,o)}function B(r){return t(\"editor.hidePanel\",r)}function U(r,e){return t(\"editor.insertAtPos\",r,e)}function j(r,e,n){return t(\"editor.replaceRange\",r,e,n)}function $(r,e=!1){return t(\"editor.moveCursor\",r,e)}function V(r){return t(\"editor.insertAtCursor\",r)}function K(r){return t(\"editor.dispatch\",r)}function W(r,e=\"\"){return t(\"editor.prompt\",r,e)}function H(r){return t(\"editor.confirm\",r)}function J(r){return t(\"editor.getUiOption\",r)}function X(r,e){return t(\"editor.setUiOption\",r,e)}function Y(r){return t(\"editor.vimEx\",r)}var c={};u(c,{parseMarkdown:()=>_});function _(r){return t(\"markdown.parseMarkdown\",r)}var d=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},P=new d;function p(r){if(!!r.children)for(let e of r.children){if(e.parent)return;e.parent=r,p(e)}}function f(r,e){if(e<r.from||e>=r.to)return null;if(!r.children)return r;for(let n of r.children){let o=f(n,e);if(o&&o.text!==void 0)return r;if(o)return o}return null}function x(r){function e(n){let o=String(n);return o.length===1&&(o=\"0\"+o),o}return r.getFullYear()+\"-\"+e(r.getMonth()+1)+\"-\"+e(r.getDate())}function ne(r){return r.children[0].text.replace(/📅\\s*/,\"\")}async function y(){let r=await a.getText(),e=await a.getCursor(),n=await c.parseMarkdown(r);p(n);let o=f(n,e),s=ne(o),m=await a.filterBox(\"Postpone for...\",[{name:\"a day\",orderId:1},{name:\"a week\",orderId:2},{name:\"following Monday\",orderId:3}],\"Select the desired time span to delay this task\");if(!m)return;let i=new Date(s);switch(m.name){case\"a day\":i.setDate(i.getDate()+1);break;case\"a week\":i.setDate(i.getDate()+7);break;case\"following Monday\":i.setDate(i.getDate()+((7-i.getDay()+1)%7||7));break}await a.dispatch({changes:{from:o.from,to:o.to,insert:`\\u{1F4C5} ${x(i)}`},selection:{anchor:e}})}var oe=y;return w(ie);})();\n return mod;})()"
    },
    "previewTaskToggle": {
      "env": "client",
      "events": [
        "preview:click"
      ],
      "code": "(() => { var mod=(()=>{var f=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var g=(e,r)=>{for(var n in r)f(e,n,{get:r[n],enumerable:!0})},S=(e,r,n,o)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let i of M(r))!A.call(e,i)&&i!==n&&f(e,i,{get:()=>r[i],enumerable:!(o=b(r,i))||o.enumerable});return e};var F=e=>S(f({},\"__esModule\",{value:!0}),e);var ue={};g(ue,{default:()=>le});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var s={};g(s,{confirm:()=>z,dispatch:()=>Y,downloadFile:()=>U,filterBox:()=>$,flashNotification:()=>j,getCurrentPage:()=>E,getCursor:()=>N,getSelection:()=>O,getText:()=>I,getUiOption:()=>G,hidePanel:()=>K,insertAtCursor:()=>X,insertAtPos:()=>W,moveCursor:()=>J,navigate:()=>L,openUrl:()=>B,prompt:()=>_,reloadPage:()=>Q,replaceRange:()=>H,save:()=>q,setPage:()=>C,setSelection:()=>R,setUiOption:()=>Z,showPanel:()=>V,vimEx:()=>ee});function E(){return t(\"editor.getCurrentPage\")}function C(e){return t(\"editor.setPage\",e)}function I(){return t(\"editor.getText\")}function N(){return t(\"editor.getCursor\")}function O(){return t(\"editor.getSelection\")}function R(e,r){return t(\"editor.setSelection\",e,r)}function q(){return t(\"editor.save\")}function L(e,r,n=!1,o=!1){return t(\"editor.navigate\",e,r,n,o)}function Q(){return t(\"editor.reloadPage\")}function B(e){return t(\"editor.openUrl\",e)}function U(e,r){return t(\"editor.downloadFile\",e,r)}function j(e,r=\"info\"){return t(\"editor.flashNotification\",e,r)}function $(e,r,n=\"\",o=\"\"){return t(\"editor.filterBox\",e,r,n,o)}function V(e,r,n,o=\"\"){return t(\"editor.showPanel\",e,r,n,o)}function K(e){return t(\"editor.hidePanel\",e)}function W(e,r){return t(\"editor.insertAtPos\",e,r)}function H(e,r,n){return t(\"editor.replaceRange\",e,r,n)}function J(e,r=!1){return t(\"editor.moveCursor\",e,r)}function X(e){return t(\"editor.insertAtCursor\",e)}function Y(e){return t(\"editor.dispatch\",e)}function _(e,r=\"\"){return t(\"editor.prompt\",e,r)}function z(e){return t(\"editor.confirm\",e)}function G(e){return t(\"editor.getUiOption\",e)}function Z(e,r){return t(\"editor.setUiOption\",e,r)}function ee(e){return t(\"editor.vimEx\",e)}var a={};g(a,{parseMarkdown:()=>re});function re(e){return t(\"markdown.parseMarkdown\",e)}var m=class{listPages(r=!1){return t(\"space.listPages\",r)}getPageMeta(r){return t(\"space.getPageMeta\",r)}readPage(r){return t(\"space.readPage\",r)}writePage(r,n){return t(\"space.writePage\",r,n)}deletePage(r){return t(\"space.deletePage\",r)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(r){return t(\"space.getAttachmentMeta\",r)}readAttachment(r){return t(\"space.readAttachment\",r)}writeAttachment(r,n,o){return t(\"space.writeAttachment\",r,n,o)}deleteAttachment(r){return t(\"space.deleteAttachment\",r)}readFile(r,n){return t(\"space.readFile\",r,n)}getFileMeta(r){return t(\"space.getFileMeta\",r)}writeFile(r,n,o){return t(\"space.writeFile\",r,n,o)}deleteFile(r){return t(\"space.deleteFile\",r)}listFiles(r){return t(\"space.listFiles\",r)}},l=new m;function P(e){if(!!e.children)for(let r of e.children){if(r.parent)return;r.parent=e,P(r)}}function x(e,r){if(r(e))return[e];let n=[];if(e.children)for(let o of e.children)n=[...n,...x(o,r)];return n}function u(e,r){if(r<e.from||r>=e.to)return null;if(!e.children)return e;for(let n of e.children){let o=u(n,r);if(o&&o.text!==void 0)return e;if(o)return o}return null}function d(e){let r=[];if(e.text!==void 0)return e.text;for(let n of e.children)r.push(d(n));return r.join(\"\")}function v(e){let[r,n]=JSON.parse(e);if(r===\"task\")return ce(+n)}async function ae(e,r){let n=\"[x]\";(e.children[0].text===\"[x]\"||e.children[0].text===\"[X]\")&&(n=\"[ ]\"),await s.dispatch({changes:{from:e.from,to:e.to,insert:n}});let o=x(e.parent,i=>i.type===\"WikiLinkPage\");for(let i of o){let y=i.children[0].text;if(y.includes(\"@\")){let[h,w]=y.split(\"@\"),p=await l.readPage(h),T=await a.parseMarkdown(p),c=u(T,+w+1);if(!c||c.type!==\"TaskMarker\"){console.error(\"Reference not a task marker, out of date?\",c);return}c.children[0].text=n,p=d(T),await l.writePage(h,p)}}}async function ce(e){let r=await s.getText(),n=await a.parseMarkdown(r);P(n);let o=u(n,e);o&&o.type===\"TaskMarker\"&&await ae(o,e)}var le=v;return F(ue);})();\n return mod;})()"
    }
  },
  "assets": {}
}