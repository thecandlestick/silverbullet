{
  "name": "core",
  "imports": [
    "https://get.silverbullet.md/global.plug.json"
  ],
  "syntax": {
    "Hashtag": {
      "firstCharacters": [
        "#"
      ],
      "regex": "#[^#\\d\\s\\[\\]]+\\w+",
      "className": "sb-hashtag"
    },
    "NakedURL": {
      "firstCharacters": [
        "h"
      ],
      "regex": "https?:\\/\\/[-a-zA-Z0-9@:%._\\+~#=]{1,256}([-a-zA-Z0-9()@:%_\\+.~#?&=\\/]*)",
      "className": "sb-naked-url"
    },
    "NamedAnchor": {
      "firstCharacters": [
        "$"
      ],
      "regex": "\\$[a-zA-Z\\.\\-\\/]+[\\w\\.\\-\\/]*",
      "className": "sb-named-anchor"
    }
  },
  "functions": {
    "setEditorMode": {
      "events": [
        "editor:init"
      ],
      "code": "(() => { var mod=(()=>{var m=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var u=(t,e)=>{for(var n in e)m(t,n,{get:e[n],enumerable:!0})},f=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of l(e))!p.call(t,i)&&i!==n&&m(t,i,{get:()=>e[i],enumerable:!(o=g(e,i))||o.enumerable});return t};var P=t=>f(m({},\"__esModule\",{value:!0}),t);var _={};u(_,{default:()=>Z});var s={};u(s,{del:()=>v,get:()=>y,set:()=>x});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;function x(t,e){return r(\"clientStore.set\",t,e)}function y(t){return r(\"clientStore.get\",t)}function v(t){return r(\"clientStore.delete\",t)}var a={};u(a,{confirm:()=>Q,dispatch:()=>B,downloadFile:()=>O,filterBox:()=>U,flashNotification:()=>I,getCurrentPage:()=>h,getCursor:()=>F,getSelection:()=>S,getText:()=>b,getUiOption:()=>V,hidePanel:()=>q,insertAtCursor:()=>N,insertAtPos:()=>L,moveCursor:()=>D,navigate:()=>A,openUrl:()=>E,prompt:()=>K,reloadPage:()=>C,replaceRange:()=>T,save:()=>k,setPage:()=>M,setSelection:()=>w,setUiOption:()=>$,showPanel:()=>R,vimEx:()=>j});function h(){return r(\"editor.getCurrentPage\")}function M(t){return r(\"editor.setPage\",t)}function b(){return r(\"editor.getText\")}function F(){return r(\"editor.getCursor\")}function S(){return r(\"editor.getSelection\")}function w(t,e){return r(\"editor.setSelection\",t,e)}function k(){return r(\"editor.save\")}function A(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function C(){return r(\"editor.reloadPage\")}function E(t){return r(\"editor.openUrl\",t)}function O(t,e){return r(\"editor.downloadFile\",t,e)}function I(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function U(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function R(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function q(t){return r(\"editor.hidePanel\",t)}function L(t,e){return r(\"editor.insertAtPos\",t,e)}function T(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function D(t,e=!1){return r(\"editor.moveCursor\",t,e)}function N(t){return r(\"editor.insertAtCursor\",t)}function B(t){return r(\"editor.dispatch\",t)}function K(t,e=\"\"){return r(\"editor.prompt\",t,e)}function Q(t){return r(\"editor.confirm\",t)}function V(t){return r(\"editor.getUiOption\",t)}function $(t,e){return r(\"editor.setUiOption\",t,e)}function j(t){return r(\"editor.vimEx\",t)}var d=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},J=new d;async function c(){await s.get(\"vimMode\")&&await a.setUiOption(\"vimMode\",!0),await s.get(\"darkMode\")&&await a.setUiOption(\"darkMode\",!0)}var Z=c;return P(_);})();\n return mod;})()"
    },
    "toggleDarkMode": {
      "command": {
        "name": "Editor: Toggle Dark Mode"
      },
      "code": "(() => { var mod=(()=>{var m=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var u=(t,e)=>{for(var n in e)m(t,n,{get:e[n],enumerable:!0})},f=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of l(e))!p.call(t,i)&&i!==n&&m(t,i,{get:()=>e[i],enumerable:!(o=g(e,i))||o.enumerable});return t};var P=t=>f(m({},\"__esModule\",{value:!0}),t);var _={};u(_,{default:()=>Z});var s={};u(s,{del:()=>v,get:()=>y,set:()=>x});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;function x(t,e){return r(\"clientStore.set\",t,e)}function y(t){return r(\"clientStore.get\",t)}function v(t){return r(\"clientStore.delete\",t)}var a={};u(a,{confirm:()=>Q,dispatch:()=>B,downloadFile:()=>O,filterBox:()=>U,flashNotification:()=>I,getCurrentPage:()=>h,getCursor:()=>F,getSelection:()=>S,getText:()=>b,getUiOption:()=>V,hidePanel:()=>q,insertAtCursor:()=>N,insertAtPos:()=>D,moveCursor:()=>T,navigate:()=>A,openUrl:()=>E,prompt:()=>K,reloadPage:()=>C,replaceRange:()=>L,save:()=>k,setPage:()=>M,setSelection:()=>w,setUiOption:()=>$,showPanel:()=>R,vimEx:()=>j});function h(){return r(\"editor.getCurrentPage\")}function M(t){return r(\"editor.setPage\",t)}function b(){return r(\"editor.getText\")}function F(){return r(\"editor.getCursor\")}function S(){return r(\"editor.getSelection\")}function w(t,e){return r(\"editor.setSelection\",t,e)}function k(){return r(\"editor.save\")}function A(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function C(){return r(\"editor.reloadPage\")}function E(t){return r(\"editor.openUrl\",t)}function O(t,e){return r(\"editor.downloadFile\",t,e)}function I(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function U(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function R(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function q(t){return r(\"editor.hidePanel\",t)}function D(t,e){return r(\"editor.insertAtPos\",t,e)}function L(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function T(t,e=!1){return r(\"editor.moveCursor\",t,e)}function N(t){return r(\"editor.insertAtCursor\",t)}function B(t){return r(\"editor.dispatch\",t)}function K(t,e=\"\"){return r(\"editor.prompt\",t,e)}function Q(t){return r(\"editor.confirm\",t)}function V(t){return r(\"editor.getUiOption\",t)}function $(t,e){return r(\"editor.setUiOption\",t,e)}function j(t){return r(\"editor.vimEx\",t)}var d=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},J=new d;async function c(){let t=await s.get(\"darkMode\");t=!t,await a.setUiOption(\"darkMode\",t),await s.set(\"darkMode\",t)}var Z=c;return P(_);})();\n return mod;})()"
    },
    "clearPageIndex": {
      "env": "server",
      "events": [
        "page:saved",
        "page:deleted"
      ],
      "code": "(() => { var mod=(()=>{var w=Object.create;var a=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var M=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var u=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},d=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of T(e))!F.call(t,s)&&s!==n&&a(t,s,{get:()=>e[s],enumerable:!(o=b(e,s))||o.enumerable});return t};var A=(t,e,n)=>(n=t!=null?w(k(t)):{},d(e||!t||!t.__esModule?a(n,\"default\",{value:t,enumerable:!0}):n,t)),S=t=>d(a({},\"__esModule\",{value:!0}),t);var _={};u(_,{default:()=>K});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var l={};u(l,{batchSet:()=>C,clearPageIndex:()=>O,clearPageIndexForPage:()=>R,del:()=>L,deletePrefixForPage:()=>U,get:()=>$,query:()=>I,queryPrefix:()=>D,set:()=>N});function N(t,e,n){return r(\"index.set\",t,e,n)}function C(t,e){return r(\"index.batchSet\",t,e)}function $(t,e){return r(\"index.get\",t,e)}function L(t,e){return r(\"index.delete\",t,e)}function D(t){return r(\"index.queryPrefix\",t)}function I(t){return r(\"index.query\",t)}function R(t){return r(\"index.clearPageIndexForPage\",t)}function U(t,e){return r(\"index.deletePrefixForPage\",t,e)}function O(){return r(\"index.clearPageIndex\")}var c=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},f=new c;var i=self.syscall;var h=A(M(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function v(t){await l.clearPageIndexForPage(t)}var K=v;return S(_);})();\n return mod;})()"
    },
    "pageQueryProvider": {
      "events": [
        "query:page"
      ],
      "code": "(() => { var mod=(()=>{var M=Object.create;var d=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var C=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,r)=>(typeof require!=\"undefined\"?require:e)[r]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var $=(t,e)=>{for(var r in e)d(t,r,{get:e[r],enumerable:!0})},f=(t,e,r,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of S(e))!N.call(t,o)&&o!==r&&d(t,o,{get:()=>e[o],enumerable:!(i=A(e,o))||i.enumerable});return t};var L=(t,e,r)=>(r=t!=null?M(E(t)):{},f(e||!t||!t.__esModule?d(r,\"default\",{value:t,enumerable:!0}):r,t)),D=t=>f(d({},\"__esModule\",{value:!0}),t);var G={};$(G,{default:()=>j});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;var g=class{listPages(e=!1){return n(\"space.listPages\",e)}getPageMeta(e){return n(\"space.getPageMeta\",e)}readPage(e){return n(\"space.readPage\",e)}writePage(e,r){return n(\"space.writePage\",e,r)}deletePage(e){return n(\"space.deletePage\",e)}listPlugs(){return n(\"space.listPlugs\")}listAttachments(){return n(\"space.listAttachments\")}getAttachmentMeta(e){return n(\"space.getAttachmentMeta\",e)}readAttachment(e){return n(\"space.readAttachment\",e)}writeAttachment(e,r,i){return n(\"space.writeAttachment\",e,r,i)}deleteAttachment(e){return n(\"space.deleteAttachment\",e)}readFile(e,r){return n(\"space.readFile\",e,r)}getFileMeta(e){return n(\"space.getFileMeta\",e)}writeFile(e,r,i){return n(\"space.writeFile\",e,r,i)}deleteFile(e){return n(\"space.deleteFile\",e)}listFiles(e){return n(\"space.listFiles\",e)}},p=new g;var c=self.syscall;function b(t,e){let r=[];if(t.filter.length===0)r=e.slice();else{e:for(let i of e){let o=i;for(let{op:l,prop:a,value:s}of t.filter)switch(l){case\"=\":{let u=o[a];if(Array.isArray(u)&&!Array.isArray(s)){if(!u.includes(s))continue e}else if(Array.isArray(u)&&Array.isArray(s)){if(!u.some(F=>s.includes(F)))continue e}else if(u!=s)continue e;break}case\"!=\":if(o[a]==s)continue e;break;case\"<\":if(!(o[a]<s))continue e;break;case\"<=\":if(!(o[a]<=s))continue e;break;case\">\":if(!(o[a]>s))continue e;break;case\">=\":if(!(o[a]>=s))continue e;break;case\"=~\":if(!new RegExp(s).exec(o[a]))continue e;break;case\"!=~\":if(new RegExp(s).exec(o[a]))continue e;break;case\"in\":if(!s.includes(o[a]))continue e;break}r.push(o)}}return t.ordering.length>0&&(r=r.sort((i,o)=>{for(let{orderBy:l,orderDesc:a}of t.ordering){if(i[l]<o[l]||i[l]===void 0)return a?1:-1;if(i[l]>o[l]||o[l]===void 0)return a?-1:1}return 0})),t.limit&&(r=r.slice(0,t.limit)),t.select&&(r=r.map(i=>{let o={};for(let l of t.select)o[l]=i[l];return o})),r}var T=L(C(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function k({query:t}){return b(t,await p.listPages())}var j=k;return D(G);})();\n return mod;})()"
    },
    "parseIndexTextRepublish": {
      "events": [
        "page:index_text"
      ],
      "code": "(() => { var mod=(()=>{var T=Object.create;var a=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var S=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var d=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},p=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of F(e))!A.call(t,i)&&i!==n&&a(t,i,{get:()=>e[i],enumerable:!(o=k(e,i))||o.enumerable});return t};var E=(t,e,n)=>(n=t!=null?T(M(t)):{},p(e||!t||!t.__esModule?a(n,\"default\",{value:t,enumerable:!0}):n,t)),N=t=>p(a({},\"__esModule\",{value:!0}),t);var j={};d(j,{default:()=>W});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var l={};d(l,{parseMarkdown:()=>$});function $(t){return r(\"markdown.parseMarkdown\",t)}var g=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},x=new g;var s=self.syscall;var c={};d(c,{dispatchEvent:()=>U,listEvents:()=>O});function U(t,e,n){return new Promise((o,i)=>{let u=-1;n&&(u=setTimeout(()=>{console.log(\"Timeout!\"),i(\"timeout\")},n)),s(\"event.dispatch\",t,e).then(b=>{u!==-1&&clearTimeout(u),o(b)}).catch(i)})}function O(){return s(\"event.list\")}var v=E(S(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function w({name:t,text:e}){console.log(\"Reindexing\",t),await c.dispatchEvent(\"page:index\",{name:t,tree:await l.parseMarkdown(e)})}var W=w;return N(j);})();\n return mod;})()"
    },
    "reindexSpaceCommand": {
      "command": {
        "name": "Space: Reindex"
      },
      "code": "(() => { var mod=(()=>{var w=Object.create;var l=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var M=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var u=(t,e)=>{for(var n in e)l(t,n,{get:e[n],enumerable:!0})},g=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of T(e))!F.call(t,s)&&s!==n&&l(t,s,{get:()=>e[s],enumerable:!(o=b(e,s))||o.enumerable});return t};var A=(t,e,n)=>(n=t!=null?w(k(t)):{},g(e||!t||!t.__esModule?l(n,\"default\",{value:t,enumerable:!0}):n,t)),S=t=>g(l({},\"__esModule\",{value:!0}),t);var xe={};u(xe,{default:()=>me});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var a={};u(a,{confirm:()=>J,dispatch:()=>_,downloadFile:()=>B,filterBox:()=>Q,flashNotification:()=>Y,getCurrentPage:()=>C,getCursor:()=>L,getSelection:()=>D,getText:()=>$,getUiOption:()=>X,hidePanel:()=>W,insertAtCursor:()=>K,insertAtPos:()=>j,moveCursor:()=>H,navigate:()=>U,openUrl:()=>q,prompt:()=>z,reloadPage:()=>O,replaceRange:()=>G,save:()=>R,setPage:()=>N,setSelection:()=>I,setUiOption:()=>Z,showPanel:()=>V,vimEx:()=>ee});function C(){return r(\"editor.getCurrentPage\")}function N(t){return r(\"editor.setPage\",t)}function $(){return r(\"editor.getText\")}function L(){return r(\"editor.getCursor\")}function D(){return r(\"editor.getSelection\")}function I(t,e){return r(\"editor.setSelection\",t,e)}function R(){return r(\"editor.save\")}function U(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function O(){return r(\"editor.reloadPage\")}function q(t){return r(\"editor.openUrl\",t)}function B(t,e){return r(\"editor.downloadFile\",t,e)}function Y(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function Q(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function V(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function W(t){return r(\"editor.hidePanel\",t)}function j(t,e){return r(\"editor.insertAtPos\",t,e)}function G(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function H(t,e=!1){return r(\"editor.moveCursor\",t,e)}function K(t){return r(\"editor.insertAtCursor\",t)}function _(t){return r(\"editor.dispatch\",t)}function z(t,e=\"\"){return r(\"editor.prompt\",t,e)}function J(t){return r(\"editor.confirm\",t)}function X(t){return r(\"editor.getUiOption\",t)}function Z(t,e){return r(\"editor.setUiOption\",t,e)}function ee(t){return r(\"editor.vimEx\",t)}var d=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},m=new d;var c={};u(c,{getEnv:()=>se,invokeCommand:()=>ne,invokeFunction:()=>re,listCommands:()=>oe,reloadPlugs:()=>ie});function re(t,e,...n){return r(\"system.invokeFunction\",t,e,...n)}function ne(t){return r(\"system.invokeCommand\",t)}function oe(){return r(\"system.listCommands\")}function ie(){r(\"system.reloadPlugs\")}function se(){return r(\"system.getEnv\")}var i=self.syscall;var h=A(M(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function v(){await a.flashNotification(\"Reindexing...\"),await c.invokeFunction(\"server\",\"reindexSpace\"),await a.flashNotification(\"Reindexing done\")}var me=v;return S(xe);})();\n return mod;})()"
    },
    "reindexSpace": {
      "env": "server",
      "code": "(() => { var mod=(()=>{var T=Object.create;var a=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var S=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var l=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},m=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of F(e))!A.call(t,i)&&i!==n&&a(t,i,{get:()=>e[i],enumerable:!(o=k(e,i))||o.enumerable});return t};var E=(t,e,n)=>(n=t!=null?T(M(t)):{},m(e||!t||!t.__esModule?a(n,\"default\",{value:t,enumerable:!0}):n,t)),N=t=>m(a({},\"__esModule\",{value:!0}),t);var ee={};l(ee,{default:()=>Z});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var c={};l(c,{batchSet:()=>L,clearPageIndex:()=>B,clearPageIndexForPage:()=>O,del:()=>I,deletePrefixForPage:()=>q,get:()=>D,query:()=>U,queryPrefix:()=>R,set:()=>$});function $(t,e,n){return r(\"index.set\",t,e,n)}function L(t,e){return r(\"index.batchSet\",t,e)}function D(t,e){return r(\"index.get\",t,e)}function I(t,e){return r(\"index.delete\",t,e)}function R(t){return r(\"index.queryPrefix\",t)}function U(t){return r(\"index.query\",t)}function O(t){return r(\"index.clearPageIndexForPage\",t)}function q(t,e){return r(\"index.deletePrefixForPage\",t,e)}function B(){return r(\"index.clearPageIndex\")}var u={};l(u,{parseMarkdown:()=>Y});function Y(t){return r(\"markdown.parseMarkdown\",t)}var f=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},d=new f;var s=self.syscall;var g={};l(g,{dispatchEvent:()=>G,listEvents:()=>H});function G(t,e,n){return new Promise((o,i)=>{let p=-1;n&&(p=setTimeout(()=>{console.log(\"Timeout!\"),i(\"timeout\")},n)),s(\"event.dispatch\",t,e).then(b=>{p!==-1&&clearTimeout(p),o(b)}).catch(i)})}function H(){return s(\"event.list\")}var v=E(S(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function w(){console.log(\"Clearing page index...\"),await c.clearPageIndex(),console.log(\"Listing all pages\");let t=await d.listPages(),e=0;for(let{name:n}of t){e++,console.log(`Indexing page ${e}/${t.length}: ${n}`);let o=await d.readPage(n),i=await u.parseMarkdown(o);await g.dispatchEvent(\"page:index\",{name:n,tree:i})}console.log(\"Indexing completed!\")}var Z=w;return N(ee);})();\n return mod;})()"
    },
    "deletePage": {
      "command": {
        "name": "Page: Delete"
      },
      "code": "(() => { var mod=(()=>{var w=Object.create;var l=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var M=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var d=(t,e)=>{for(var n in e)l(t,n,{get:e[n],enumerable:!0})},g=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of T(e))!F.call(t,a)&&a!==n&&l(t,a,{get:()=>e[a],enumerable:!(o=b(e,a))||o.enumerable});return t};var A=(t,e,n)=>(n=t!=null?w(k(t)):{},g(e||!t||!t.__esModule?l(n,\"default\",{value:t,enumerable:!0}):n,t)),S=t=>g(l({},\"__esModule\",{value:!0}),t);var de={};d(de,{default:()=>ue});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var i={};d(i,{confirm:()=>J,dispatch:()=>_,downloadFile:()=>B,filterBox:()=>Q,flashNotification:()=>Y,getCurrentPage:()=>N,getCursor:()=>L,getSelection:()=>D,getText:()=>$,getUiOption:()=>X,hidePanel:()=>W,insertAtCursor:()=>K,insertAtPos:()=>j,moveCursor:()=>H,navigate:()=>U,openUrl:()=>q,prompt:()=>z,reloadPage:()=>O,replaceRange:()=>G,save:()=>R,setPage:()=>C,setSelection:()=>I,setUiOption:()=>Z,showPanel:()=>V,vimEx:()=>ee});function N(){return r(\"editor.getCurrentPage\")}function C(t){return r(\"editor.setPage\",t)}function $(){return r(\"editor.getText\")}function L(){return r(\"editor.getCursor\")}function D(){return r(\"editor.getSelection\")}function I(t,e){return r(\"editor.setSelection\",t,e)}function R(){return r(\"editor.save\")}function U(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function O(){return r(\"editor.reloadPage\")}function q(t){return r(\"editor.openUrl\",t)}function B(t,e){return r(\"editor.downloadFile\",t,e)}function Y(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function Q(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function V(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function W(t){return r(\"editor.hidePanel\",t)}function j(t,e){return r(\"editor.insertAtPos\",t,e)}function G(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function H(t,e=!1){return r(\"editor.moveCursor\",t,e)}function K(t){return r(\"editor.insertAtCursor\",t)}function _(t){return r(\"editor.dispatch\",t)}function z(t,e=\"\"){return r(\"editor.prompt\",t,e)}function J(t){return r(\"editor.confirm\",t)}function X(t){return r(\"editor.getUiOption\",t)}function Z(t,e){return r(\"editor.setUiOption\",t,e)}function ee(t){return r(\"editor.vimEx\",t)}var c=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},u=new c;var s=self.syscall;var h=A(M(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function v(){let t=await i.getCurrentPage();!await i.confirm(`Are you sure you would like to delete ${t}?`)||(console.log(\"Navigating to index page\"),await i.navigate(\"\"),console.log(\"Deleting page from space\"),await u.deletePage(t))}var ue=v;return S(de);})();\n return mod;})()"
    },
    "attachmentQueryProvider": {
      "events": [
        "query:attachment"
      ],
      "code": "(() => { var mod=(()=>{var l=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var h=(o,e)=>{for(var n in e)l(o,n,{get:e[n],enumerable:!0})},v=(o,e,n,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of x(e))!y.call(o,t)&&t!==n&&l(o,t,{get:()=>e[t],enumerable:!(i=P(e,t))||i.enumerable});return o};var T=o=>v(l({},\"__esModule\",{value:!0}),o);var R={};h(R,{default:()=>C});function m(o,e){let n=[];if(o.filter.length===0)n=e.slice();else{e:for(let i of e){let t=i;for(let{op:c,prop:a,value:s}of o.filter)switch(c){case\"=\":{let u=t[a];if(Array.isArray(u)&&!Array.isArray(s)){if(!u.includes(s))continue e}else if(Array.isArray(u)&&Array.isArray(s)){if(!u.some(g=>s.includes(g)))continue e}else if(u!=s)continue e;break}case\"!=\":if(t[a]==s)continue e;break;case\"<\":if(!(t[a]<s))continue e;break;case\"<=\":if(!(t[a]<=s))continue e;break;case\">\":if(!(t[a]>s))continue e;break;case\">=\":if(!(t[a]>=s))continue e;break;case\"=~\":if(!new RegExp(s).exec(t[a]))continue e;break;case\"!=~\":if(new RegExp(s).exec(t[a]))continue e;break;case\"in\":if(!s.includes(t[a]))continue e;break}n.push(t)}}return o.ordering.length>0&&(n=n.sort((i,t)=>{for(let{orderBy:c,orderDesc:a}of o.ordering){if(i[c]<t[c]||i[c]===void 0)return a?1:-1;if(i[c]>t[c]||t[c]===void 0)return a?-1:1}return 0})),o.limit&&(n=n.slice(0,o.limit)),o.select&&(n=n.map(i=>{let t={};for(let c of o.select)t[c]=i[c];return t})),n}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var d=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,i){return r(\"space.writeAttachment\",e,n,i)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,i){return r(\"space.writeFile\",e,n,i)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},f=new d;async function p({query:o}){return m(o,await f.listAttachments())}var C=p;return T(R);})();\n return mod;})()"
    },
    "indexLinks": {
      "events": [
        "page:index"
      ],
      "code": "(() => { var mod=(()=>{var I=Object.create;var y=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty;var B=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,r)=>(typeof require!=\"undefined\"?require:e)[r]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var F=(t,e)=>{for(var r in e)y(t,r,{get:e[r],enumerable:!0})},M=(t,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of U(e))!q.call(t,i)&&i!==r&&y(t,i,{get:()=>e[i],enumerable:!(o=R(e,i))||o.enumerable});return t};var Y=(t,e,r)=>(r=t!=null?I(O(t)):{},M(e||!t||!t.__esModule?y(r,\"default\",{value:t,enumerable:!0}):r,t)),Q=t=>M(y({},\"__esModule\",{value:!0}),t);var le={};F(le,{default:()=>ae});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;var u={};F(u,{batchSet:()=>j,clearPageIndex:()=>X,clearPageIndexForPage:()=>z,del:()=>H,deletePrefixForPage:()=>J,get:()=>G,query:()=>_,queryPrefix:()=>K,set:()=>W});function W(t,e,r){return n(\"index.set\",t,e,r)}function j(t,e){return n(\"index.batchSet\",t,e)}function G(t,e){return n(\"index.get\",t,e)}function H(t,e){return n(\"index.delete\",t,e)}function K(t){return n(\"index.queryPrefix\",t)}function _(t){return n(\"index.query\",t)}function z(t){return n(\"index.clearPageIndexForPage\",t)}function J(t,e){return n(\"index.deletePrefixForPage\",t,e)}function X(){return n(\"index.clearPageIndex\")}var v=class{listPages(e=!1){return n(\"space.listPages\",e)}getPageMeta(e){return n(\"space.getPageMeta\",e)}readPage(e){return n(\"space.readPage\",e)}writePage(e,r){return n(\"space.writePage\",e,r)}deletePage(e){return n(\"space.deletePage\",e)}listPlugs(){return n(\"space.listPlugs\")}listAttachments(){return n(\"space.listAttachments\")}getAttachmentMeta(e){return n(\"space.getAttachmentMeta\",e)}readAttachment(e){return n(\"space.readAttachment\",e)}writeAttachment(e,r,o){return n(\"space.writeAttachment\",e,r,o)}deleteAttachment(e){return n(\"space.deleteAttachment\",e)}readFile(e,r){return n(\"space.readFile\",e,r)}getFileMeta(e){return n(\"space.getFileMeta\",e)}writeFile(e,r,o){return n(\"space.writeFile\",e,r,o)}deleteFile(e){return n(\"space.deleteFile\",e)}listFiles(e){return n(\"space.listFiles\",e)}},E=new v;var l=self.syscall;function P(t){if(!!t.children)for(let e of t.children){if(e.parent)return;e.parent=t,P(e)}}function h(t,e){if(e(t))return[t];let r=[];if(t.children)for(let o of t.children)r=[...r,...h(o,e)];return r}function d(t,e){if(t.children){let r=t.children.slice();for(let o of r){let i=e(o);if(i!==void 0){let s=t.children.indexOf(o);i?t.children.splice(s,1,i):t.children.splice(s,1)}else d(o,e)}}}function w(t,e){return h(t,r=>r.type===e)[0]}function g(t){let e=[];if(t.text!==void 0)return t.text;for(let r of t.children)e.push(g(r));return e.join(\"\")}var c=Y(B(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function $(t,e=[]){let r={};return P(t),d(t,o=>{if(o.type===\"Hashtag\"){if(o.parent&&o.parent.type===\"Paragraph\"){let a=o.children[0].text.substring(1);r.tags||(r.tags=[]),Array.isArray(r.tags)&&!r.tags.includes(a)&&r.tags.push(a)}return}if(o.type===\"FrontMatter\"){let a=o.children[1].children[0],f=g(a);try{let m=c.parse(f),x={...m};if(r={...r,...m},e.length>0){let T=!1;for(let k of e)k in x&&(delete x[k],T=!0);T&&(a.text=c.stringify(x))}if(Object.keys(x).length===0)return null}catch(m){console.error(\"Could not parse frontmatter\",m)}}if(o.type!==\"FencedCode\")return;let i=w(o,\"CodeInfo\");if(!i||i.children[0].text!==\"meta\")return;let s=w(o,\"CodeText\");if(!s)return;let D=s.children[0].text,b=c.parse(D),p={...b};if(r={...r,...b},e.length>0){let a=!1;for(let f of e)f in p&&(delete p[f],a=!0);a&&(s.children[0].text=c.stringify(p).trim())}if(Object.keys(p).length===0)return null}),r.name&&(r.displayName=r.name,delete r.name),r}async function L({name:t,tree:e}){let r=[],o=$(e);if(Object.keys(o).length>0){for(let i in o)i.startsWith(\"$\")&&delete o[i];await u.set(t,\"meta:\",o)}h(e,i=>i.type===\"WikiLinkPage\").forEach(i=>{let s=i.children[0].text;s.includes(\"@\")&&(s=s.split(\"@\")[0]),r.push({key:`pl:${s}:${i.from}`,value:t})}),await u.batchSet(t,r)}var ae=L;return Q(le);})();\n return mod;})()"
    },
    "linkQueryProvider": {
      "events": [
        "query:link"
      ],
      "code": "(() => { var mod=(()=>{var A=Object.create;var d=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var $=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,r)=>(typeof require!=\"undefined\"?require:e)[r]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var f=(t,e)=>{for(var r in e)d(t,r,{get:e[r],enumerable:!0})},m=(t,e,r,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of E(e))!C.call(t,o)&&o!==r&&d(t,o,{get:()=>e[o],enumerable:!(i=S(e,o))||i.enumerable});return t};var L=(t,e,r)=>(r=t!=null?A(N(t)):{},m(e||!t||!t.__esModule?d(r,\"default\",{value:t,enumerable:!0}):r,t)),D=t=>m(d({},\"__esModule\",{value:!0}),t);var te={};f(te,{default:()=>ee});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;var g={};f(g,{batchSet:()=>U,clearPageIndex:()=>W,clearPageIndexForPage:()=>Y,del:()=>q,deletePrefixForPage:()=>V,get:()=>O,query:()=>Q,queryPrefix:()=>B,set:()=>R});function R(t,e,r){return n(\"index.set\",t,e,r)}function U(t,e){return n(\"index.batchSet\",t,e)}function O(t,e){return n(\"index.get\",t,e)}function q(t,e){return n(\"index.delete\",t,e)}function B(t){return n(\"index.queryPrefix\",t)}function Q(t){return n(\"index.query\",t)}function Y(t){return n(\"index.clearPageIndexForPage\",t)}function V(t,e){return n(\"index.deletePrefixForPage\",t,e)}function W(){return n(\"index.clearPageIndex\")}var p=class{listPages(e=!1){return n(\"space.listPages\",e)}getPageMeta(e){return n(\"space.getPageMeta\",e)}readPage(e){return n(\"space.readPage\",e)}writePage(e,r){return n(\"space.writePage\",e,r)}deletePage(e){return n(\"space.deletePage\",e)}listPlugs(){return n(\"space.listPlugs\")}listAttachments(){return n(\"space.listAttachments\")}getAttachmentMeta(e){return n(\"space.getAttachmentMeta\",e)}readAttachment(e){return n(\"space.readAttachment\",e)}writeAttachment(e,r,i){return n(\"space.writeAttachment\",e,r,i)}deleteAttachment(e){return n(\"space.deleteAttachment\",e)}readFile(e,r){return n(\"space.readFile\",e,r)}getFileMeta(e){return n(\"space.getFileMeta\",e)}writeFile(e,r,i){return n(\"space.writeFile\",e,r,i)}deleteFile(e){return n(\"space.deleteFile\",e)}listFiles(e){return n(\"space.listFiles\",e)}},P=new p;var c=self.syscall;function T(t,e){let r=[];if(t.filter.length===0)r=e.slice();else{e:for(let i of e){let o=i;for(let{op:s,prop:l,value:a}of t.filter)switch(s){case\"=\":{let u=o[l];if(Array.isArray(u)&&!Array.isArray(a)){if(!u.includes(a))continue e}else if(Array.isArray(u)&&Array.isArray(a)){if(!u.some(M=>a.includes(M)))continue e}else if(u!=a)continue e;break}case\"!=\":if(o[l]==a)continue e;break;case\"<\":if(!(o[l]<a))continue e;break;case\"<=\":if(!(o[l]<=a))continue e;break;case\">\":if(!(o[l]>a))continue e;break;case\">=\":if(!(o[l]>=a))continue e;break;case\"=~\":if(!new RegExp(a).exec(o[l]))continue e;break;case\"!=~\":if(new RegExp(a).exec(o[l]))continue e;break;case\"in\":if(!a.includes(o[l]))continue e;break}r.push(o)}}return t.ordering.length>0&&(r=r.sort((i,o)=>{for(let{orderBy:s,orderDesc:l}of t.ordering){if(i[s]<o[s]||i[s]===void 0)return l?1:-1;if(i[s]>o[s]||o[s]===void 0)return l?-1:1}return 0})),t.limit&&(r=r.slice(0,t.limit)),t.select&&(r=r.map(i=>{let o={};for(let s of t.select)o[s]=i[s];return o})),r}var k=L($(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function F({query:t,pageName:e}){let r=[];for(let{value:i,key:o}of await g.queryPrefix(`pl:${e}:`)){let[,,s]=o.split(\":\");r.push({name:i,pos:s})}return T(t,r)}var ee=F;return D(te);})();\n return mod;})()"
    },
    "renamePage": {
      "command": {
        "name": "Page: Rename",
        "mac": "Cmd-Alt-r",
        "key": "Ctrl-Alt-r",
        "page": ""
      },
      "code": "(() => { var mod=(()=>{var L=Object.create;var f=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var O=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var m=(t,e)=>{for(var n in e)f(t,n,{get:e[n],enumerable:!0})},M=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of I(e))!U.call(t,i)&&i!==n&&f(t,i,{get:()=>e[i],enumerable:!(o=D(e,i))||o.enumerable});return t};var q=(t,e,n)=>(n=t!=null?L(R(t)):{},M(e||!t||!t.__esModule?f(n,\"default\",{value:t,enumerable:!0}):n,t)),B=t=>M(f({},\"__esModule\",{value:!0}),t);var Le={};m(Le,{default:()=>$e});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var a={};m(a,{confirm:()=>ce,dispatch:()=>ae,downloadFile:()=>X,filterBox:()=>ee,flashNotification:()=>Z,getCurrentPage:()=>Q,getCursor:()=>j,getSelection:()=>G,getText:()=>W,getUiOption:()=>ue,hidePanel:()=>re,insertAtCursor:()=>se,insertAtPos:()=>ne,moveCursor:()=>ie,navigate:()=>_,openUrl:()=>J,prompt:()=>le,reloadPage:()=>z,replaceRange:()=>oe,save:()=>K,setPage:()=>V,setSelection:()=>H,setUiOption:()=>de,showPanel:()=>te,vimEx:()=>ge});function Q(){return r(\"editor.getCurrentPage\")}function V(t){return r(\"editor.setPage\",t)}function W(){return r(\"editor.getText\")}function j(){return r(\"editor.getCursor\")}function G(){return r(\"editor.getSelection\")}function H(t,e){return r(\"editor.setSelection\",t,e)}function K(){return r(\"editor.save\")}function _(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function z(){return r(\"editor.reloadPage\")}function J(t){return r(\"editor.openUrl\",t)}function X(t,e){return r(\"editor.downloadFile\",t,e)}function Z(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function ee(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function te(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function re(t){return r(\"editor.hidePanel\",t)}function ne(t,e){return r(\"editor.insertAtPos\",t,e)}function oe(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function ie(t,e=!1){return r(\"editor.moveCursor\",t,e)}function se(t){return r(\"editor.insertAtCursor\",t)}function ae(t){return r(\"editor.dispatch\",t)}function le(t,e=\"\"){return r(\"editor.prompt\",t,e)}function ce(t){return r(\"editor.confirm\",t)}function ue(t){return r(\"editor.getUiOption\",t)}function de(t,e){return r(\"editor.setUiOption\",t,e)}function ge(t){return r(\"editor.vimEx\",t)}var x={};m(x,{batchSet:()=>fe,clearPageIndex:()=>we,clearPageIndexForPage:()=>he,del:()=>xe,deletePrefixForPage:()=>ve,get:()=>me,query:()=>Pe,queryPrefix:()=>ye,set:()=>pe});function pe(t,e,n){return r(\"index.set\",t,e,n)}function fe(t,e){return r(\"index.batchSet\",t,e)}function me(t,e){return r(\"index.get\",t,e)}function xe(t,e){return r(\"index.delete\",t,e)}function ye(t){return r(\"index.queryPrefix\",t)}function Pe(t){return r(\"index.query\",t)}function he(t){return r(\"index.clearPageIndexForPage\",t)}function ve(t,e){return r(\"index.deletePrefixForPage\",t,e)}function we(){return r(\"index.clearPageIndex\")}var y={};m(y,{parseMarkdown:()=>be});function be(t){return r(\"markdown.parseMarkdown\",t)}var T=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},l=new T;var d=self.syscall;function P(t){if(!!t.children)for(let e of t.children){if(e.parent)return;e.parent=t,P(e)}}function g(t,e){if(t.children){let n=t.children.slice();for(let o of n){let i=e(o);if(i!==void 0){let c=t.children.indexOf(o);i?t.children.splice(c,1,i):t.children.splice(c,1)}else g(o,e)}}}function p(t){let e=[];if(t.text!==void 0)return t.text;for(let n of t.children)e.push(p(n));return e.join(\"\")}var E=q(O(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function N(t){console.log(\"Got a target name\",t.page);let e=await a.getCurrentPage(),n=await a.getCursor();console.log(\"Old name is\",e);let o=t.page||await a.prompt(`Rename ${e} to:`,e);if(!o)return;if(console.log(\"New name\",o),o.trim()===e.trim()){console.log(\"Name unchanged, exiting\");return}try{throw await l.getPageMeta(o),new Error(`Page ${o} already exists, cannot rename to existing page.`)}catch(s){if(!s.message.includes(\"not found\"))throw await a.flashNotification(s.message,\"error\"),s}let i=await Ce(e);console.log(\"All pages containing backlinks\",i);let c=await a.getText();console.log(\"Writing new page to space\");let C=await l.writePage(o,c);console.log(\"Navigating to new page\"),await a.navigate(o,n,!0),(await l.getPageMeta(e)).lastModified!==C.lastModified&&(console.log(\"Deleting page from space\"),await l.deletePage(e));let k=new Set;for(let s of i)k.add(s.page);let h=0;for(let s of k){if(s===e)continue;console.log(\"Now going to update links in\",s);let v=await l.readPage(s);if(!v)continue;let w=await y.parseMarkdown(v);P(w),g(w,u=>{if(u.type===\"WikiLinkPage\"){let b=u.children[0].text;if(b===e)return u.children[0].text=o,h++,u;if(b.startsWith(`${e}@`)){let[,$]=b.split(\"@\");return u.children[0].text=`${o}@${$}`,h++,u}}});let F=p(w);v!==F&&(console.log(\"Changes made, saving...\"),await l.writePage(s,F))}await a.flashNotification(`Renamed page, and updated ${h} references`)}async function Ce(t){let e=await x.queryPrefix(`pl:${t}:`),n=[];for(let{key:o,value:i}of e){let c=o.split(\":\");n.push({page:i,pos:+c[c.length-1]})}return n}var $e=N;return B(Le);})();\n return mod;})()"
    },
    "pageComplete": {
      "events": [
        "editor:complete"
      ],
      "code": "(() => { var mod=(()=>{var v=Object.create;var a=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var F=(r=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(r,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):r)(function(r){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+r+'\" is not supported')});var M=(r,e)=>{for(var n in e)a(r,n,{get:e[n],enumerable:!0})},u=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of b(e))!k.call(r,s)&&s!==n&&a(r,s,{get:()=>e[s],enumerable:!(o=w(e,s))||o.enumerable});return r};var A=(r,e,n)=>(n=r!=null?v(T(r)):{},u(e||!r||!r.__esModule?a(n,\"default\",{value:r,enumerable:!0}):n,r)),S=r=>u(a({},\"__esModule\",{value:!0}),r);var B={};M(B,{default:()=>q});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var l=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},c=new l;var i=self.syscall;var P=A(F(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function h(r){let e=/\\[\\[([^\\]@:]*)$/.exec(r.linePrefix);if(!e)return null;let n=await c.listPages();return{from:r.pos-e[1].length,options:n.map(o=>({label:o.name,boost:o.lastModified,type:\"page\"}))}}var q=h;return S(B);})();\n return mod;})()"
    },
    "commandComplete": {
      "events": [
        "editor:complete"
      ],
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var u=(n,e)=>{for(var r in e)a(n,r,{get:e[r],enumerable:!0})},d=(n,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of g(e))!p.call(n,i)&&i!==r&&a(n,i,{get:()=>e[i],enumerable:!(o=l(e,i))||o.enumerable});return n};var f=n=>d(a({},\"__esModule\",{value:!0}),n);var I={};u(I,{default:()=>E});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var m=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,r){return t(\"space.writePage\",e,r)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,r,o){return t(\"space.writeAttachment\",e,r,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,r){return t(\"space.readFile\",e,r)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,r,o){return t(\"space.writeFile\",e,r,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},b=new m;var s={};u(s,{getEnv:()=>M,invokeCommand:()=>S,invokeFunction:()=>F,listCommands:()=>w,reloadPlugs:()=>C});function F(n,e,...r){return t(\"system.invokeFunction\",n,e,...r)}function S(n){return t(\"system.invokeCommand\",n)}function w(){return t(\"system.listCommands\")}function C(){t(\"system.reloadPlugs\")}function M(){return t(\"system.getEnv\")}async function c(n){let e=/\\{\\[([^\\]]*)$/.exec(n.linePrefix);if(!e)return null;let r=await s.listCommands();return{from:n.pos-e[1].length,options:Object.keys(r).map(o=>({label:o,type:\"command\"}))}}var E=c;return f(I);})();\n return mod;})()"
    },
    "indexItem": {
      "events": [
        "page:index"
      ],
      "code": "(() => { var mod=(()=>{var m=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var P=(r,e)=>{for(var n in e)m(r,n,{get:e[n],enumerable:!0})},k=(r,e,n,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of T(e))!b.call(r,o)&&o!==n&&m(r,o,{get:()=>e[o],enumerable:!(i=v(e,o))||i.enumerable});return r};var w=r=>k(m({},\"__esModule\",{value:!0}),r);var $={};P($,{default:()=>V});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var l={};P(l,{batchSet:()=>M,clearPageIndex:()=>q,clearPageIndexForPage:()=>R,del:()=>I,deletePrefixForPage:()=>N,get:()=>E,query:()=>O,queryPrefix:()=>C,set:()=>S});function S(r,e,n){return t(\"index.set\",r,e,n)}function M(r,e){return t(\"index.batchSet\",r,e)}function E(r,e){return t(\"index.get\",r,e)}function I(r,e){return t(\"index.delete\",r,e)}function C(r){return t(\"index.queryPrefix\",r)}function O(r){return t(\"index.query\",r)}function R(r){return t(\"index.clearPageIndexForPage\",r)}function N(r,e){return t(\"index.deletePrefixForPage\",r,e)}function q(){return t(\"index.clearPageIndex\")}var p=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,i){return t(\"space.writeAttachment\",e,n,i)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,i){return t(\"space.writeFile\",e,n,i)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},B=new p;function d(r,e){return x(r,n=>n.type===e)}function x(r,e){if(e(r))return[r];let n=[];if(r.children)for(let i of r.children)n=[...n,...x(i,e)];return n}function g(r,e){if(r.children){let n=r.children.slice();for(let i of n){let o=e(i);if(o!==void 0){let c=r.children.indexOf(i);o?r.children.splice(c,1,o):r.children.splice(c,1)}else g(i,e)}}}function a(r){let e=[];if(r.text!==void 0)return r.text;for(let n of r.children)e.push(a(n));return e.join(\"\")}function y(r){g(r,e=>{if(e.type!==\"Directive\")return;let n=a(e);return{from:e.from,to:e.to,text:new Array(n.length+1).join(\" \")}})}async function h({name:r,tree:e}){let n=[];y(e),d(e,\"ListItem\").forEach(o=>{if(!o.children||d(o,\"Task\").length>0)return;let c=[],f;for(let s of o.children.slice(1)){if(s.type===\"OrderedList\"||s.type===\"BulletList\"){f=a(s);break}c.push(s)}let u={name:c.map(a).join(\"\").trim()};f&&(u.nested=f),d(o,\"Hashtag\").forEach(s=>{u.tags||(u.tags=[]),u.tags.push(s.children[0].text.substring(1))}),n.push({key:`it:${o.from}`,value:u})}),await l.batchSet(r,n)}var V=h;return w($);})();\n return mod;})()"
    },
    "itemQueryProvider": {
      "events": [
        "query:item"
      ],
      "code": "(() => { var mod=(()=>{var d=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var m=(r,e)=>{for(var n in e)d(r,n,{get:e[n],enumerable:!0})},v=(r,e,n,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of y(e))!h.call(r,o)&&o!==n&&d(r,o,{get:()=>e[o],enumerable:!(i=x(e,o))||i.enumerable});return r};var T=r=>v(d({},\"__esModule\",{value:!0}),r);var j={};m(j,{default:()=>U});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var l={};m(l,{batchSet:()=>A,clearPageIndex:()=>O,clearPageIndexForPage:()=>I,del:()=>S,deletePrefixForPage:()=>C,get:()=>F,query:()=>E,queryPrefix:()=>M,set:()=>w});function w(r,e,n){return t(\"index.set\",r,e,n)}function A(r,e){return t(\"index.batchSet\",r,e)}function F(r,e){return t(\"index.get\",r,e)}function S(r,e){return t(\"index.delete\",r,e)}function M(r){return t(\"index.queryPrefix\",r)}function E(r){return t(\"index.query\",r)}function I(r){return t(\"index.clearPageIndexForPage\",r)}function C(r,e){return t(\"index.deletePrefixForPage\",r,e)}function O(){return t(\"index.clearPageIndex\")}var f=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,i){return t(\"space.writeAttachment\",e,n,i)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,i){return t(\"space.writeFile\",e,n,i)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},q=new f;function p(r,e){let n=[];if(r.filter.length===0)n=e.slice();else{e:for(let i of e){let o=i;for(let{op:s,prop:c,value:a}of r.filter)switch(s){case\"=\":{let u=o[c];if(Array.isArray(u)&&!Array.isArray(a)){if(!u.includes(a))continue e}else if(Array.isArray(u)&&Array.isArray(a)){if(!u.some(P=>a.includes(P)))continue e}else if(u!=a)continue e;break}case\"!=\":if(o[c]==a)continue e;break;case\"<\":if(!(o[c]<a))continue e;break;case\"<=\":if(!(o[c]<=a))continue e;break;case\">\":if(!(o[c]>a))continue e;break;case\">=\":if(!(o[c]>=a))continue e;break;case\"=~\":if(!new RegExp(a).exec(o[c]))continue e;break;case\"!=~\":if(new RegExp(a).exec(o[c]))continue e;break;case\"in\":if(!a.includes(o[c]))continue e;break}n.push(o)}}return r.ordering.length>0&&(n=n.sort((i,o)=>{for(let{orderBy:s,orderDesc:c}of r.ordering){if(i[s]<o[s]||i[s]===void 0)return c?1:-1;if(i[s]>o[s]||o[s]===void 0)return c?-1:1}return 0})),r.limit&&(n=n.slice(0,r.limit)),r.select&&(n=n.map(i=>{let o={};for(let s of r.select)o[s]=i[s];return o})),n}async function g({query:r}){let e=[];for(let{key:n,page:i,value:o}of await l.queryPrefix(\"it:\")){let[,s]=n.split(\":\");e.push({...o,page:i,pos:+s})}return p(r,e)}var U=g;return T(j);})();\n return mod;})()"
    },
    "linkNavigate": {
      "command": {
        "name": "Navigate To page",
        "key": "Ctrl-Enter",
        "mac": "Cmd-Enter"
      },
      "code": "(() => { var mod=(()=>{var u=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var a=(e,r)=>{for(var n in r)u(e,n,{get:r[n],enumerable:!0})},w=(e,r,n,i)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let o of k(r))!b.call(e,o)&&o!==n&&u(e,o,{get:()=>r[o],enumerable:!(i=v(r,o))||i.enumerable});return e};var T=e=>w(u({},\"__esModule\",{value:!0}),e);var le={};a(le,{default:()=>ce});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var s={};a(s,{confirm:()=>z,dispatch:()=>j,downloadFile:()=>I,filterBox:()=>q,flashNotification:()=>K,getCurrentPage:()=>M,getCursor:()=>A,getSelection:()=>N,getText:()=>C,getUiOption:()=>G,hidePanel:()=>B,insertAtCursor:()=>W,insertAtPos:()=>D,moveCursor:()=>V,navigate:()=>R,openUrl:()=>O,prompt:()=>_,reloadPage:()=>U,replaceRange:()=>Q,save:()=>E,setPage:()=>S,setSelection:()=>L,setUiOption:()=>H,showPanel:()=>$,vimEx:()=>J});function M(){return t(\"editor.getCurrentPage\")}function S(e){return t(\"editor.setPage\",e)}function C(){return t(\"editor.getText\")}function A(){return t(\"editor.getCursor\")}function N(){return t(\"editor.getSelection\")}function L(e,r){return t(\"editor.setSelection\",e,r)}function E(){return t(\"editor.save\")}function R(e,r,n=!1,i=!1){return t(\"editor.navigate\",e,r,n,i)}function U(){return t(\"editor.reloadPage\")}function O(e){return t(\"editor.openUrl\",e)}function I(e,r){return t(\"editor.downloadFile\",e,r)}function K(e,r=\"info\"){return t(\"editor.flashNotification\",e,r)}function q(e,r,n=\"\",i=\"\"){return t(\"editor.filterBox\",e,r,n,i)}function $(e,r,n,i=\"\"){return t(\"editor.showPanel\",e,r,n,i)}function B(e){return t(\"editor.hidePanel\",e)}function D(e,r){return t(\"editor.insertAtPos\",e,r)}function Q(e,r,n){return t(\"editor.replaceRange\",e,r,n)}function V(e,r=!1){return t(\"editor.moveCursor\",e,r)}function W(e){return t(\"editor.insertAtCursor\",e)}function j(e){return t(\"editor.dispatch\",e)}function _(e,r=\"\"){return t(\"editor.prompt\",e,r)}function z(e){return t(\"editor.confirm\",e)}function G(e){return t(\"editor.getUiOption\",e)}function H(e,r){return t(\"editor.setUiOption\",e,r)}function J(e){return t(\"editor.vimEx\",e)}var c={};a(c,{parseMarkdown:()=>Y});function Y(e){return t(\"markdown.parseMarkdown\",e)}var d=class{listPages(r=!1){return t(\"space.listPages\",r)}getPageMeta(r){return t(\"space.getPageMeta\",r)}readPage(r){return t(\"space.readPage\",r)}writePage(r,n){return t(\"space.writePage\",r,n)}deletePage(r){return t(\"space.deletePage\",r)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(r){return t(\"space.getAttachmentMeta\",r)}readAttachment(r){return t(\"space.readAttachment\",r)}writeAttachment(r,n,i){return t(\"space.writeAttachment\",r,n,i)}deleteAttachment(r){return t(\"space.deleteAttachment\",r)}readFile(r,n){return t(\"space.readFile\",r,n)}getFileMeta(r){return t(\"space.getFileMeta\",r)}writeFile(r,n,i){return t(\"space.writeFile\",r,n,i)}deleteFile(r){return t(\"space.deleteFile\",r)}listFiles(r){return t(\"space.listFiles\",r)}},m=new d;var l={};a(l,{getEnv:()=>ie,invokeCommand:()=>re,invokeFunction:()=>ee,listCommands:()=>te,reloadPlugs:()=>ne});function ee(e,r,...n){return t(\"system.invokeFunction\",e,r,...n)}function re(e){return t(\"system.invokeCommand\",e)}function te(){return t(\"system.listCommands\")}function ne(){t(\"system.reloadPlugs\")}function ie(){return t(\"system.getEnv\")}function p(e){if(!!e.children)for(let r of e.children){if(r.parent)return;r.parent=e,p(r)}}function g(e,r){let n=e.parent;for(;n;){if(r(n))return n;n=n.parent}return null}function P(e,r){if(r(e))return[e];let n=[];if(e.children)for(let i of e.children)n=[...n,...P(i,r)];return n}function x(e,r){return P(e,n=>n.type===r)[0]}function f(e,r){if(r<e.from||r>=e.to)return null;if(!e.children)return e;for(let n of e.children){let i=f(n,r);if(i&&i.text!==void 0)return e;if(i)return i}return null}async function ae(e,r=!1){if(!e)return;let n=i=>[\"WikiLink\",\"Link\",\"Image\",\"URL\",\"NakedURL\",\"Link\",\"CommandLink\",\"PageRef\"].includes(i.type);if(!(!n(e)&&(e=g(e,n),!e)))switch(e.type){case\"WikiLink\":{let i=e.children[1].children[0].text,o;i.includes(\"@\")&&([i,o]=i.split(\"@\"),o.match(/^\\d+$/)&&(o=+o)),i||(i=await s.getCurrentPage()),await s.navigate(i,o,!1,r);break}case\"PageRef\":{let i=e.children[0].text;await s.navigate(i.substring(2,i.length-2),0,!1,r);break}case\"NakedURL\":await s.openUrl(e.children[0].text);break;case\"Image\":case\"Link\":{let i=x(e,\"URL\");if(!i)return;let o=i.children[0].text;if(o.length<=1)return s.flashNotification(\"Empty link, ignoring\",\"error\");if(o.indexOf(\"://\")===-1&&!o.startsWith(\"mailto:\")){o=decodeURIComponent(o);let h=await m.readAttachment(o);return s.downloadFile(o,h)}else await s.openUrl(o);break}case\"CommandLink\":{let i=e.children[1].children[0].text;await l.invokeCommand(i);break}}}async function y(){let e=await c.parseMarkdown(await s.getText()),r=f(e,await s.getCursor());p(e),await ae(r)}var ce=y;return T(le);})();\n return mod;})()"
    },
    "clickNavigate": {
      "events": [
        "page:click"
      ],
      "code": "(() => { var mod=(()=>{var u=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var a=(e,r)=>{for(var n in r)u(e,n,{get:r[n],enumerable:!0})},w=(e,r,n,i)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let o of k(r))!b.call(e,o)&&o!==n&&u(e,o,{get:()=>r[o],enumerable:!(i=v(r,o))||i.enumerable});return e};var T=e=>w(u({},\"__esModule\",{value:!0}),e);var le={};a(le,{default:()=>ce});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var s={};a(s,{confirm:()=>z,dispatch:()=>j,downloadFile:()=>I,filterBox:()=>q,flashNotification:()=>K,getCurrentPage:()=>M,getCursor:()=>A,getSelection:()=>N,getText:()=>C,getUiOption:()=>G,hidePanel:()=>B,insertAtCursor:()=>W,insertAtPos:()=>D,moveCursor:()=>V,navigate:()=>R,openUrl:()=>O,prompt:()=>_,reloadPage:()=>U,replaceRange:()=>Q,save:()=>E,setPage:()=>S,setSelection:()=>L,setUiOption:()=>H,showPanel:()=>$,vimEx:()=>J});function M(){return t(\"editor.getCurrentPage\")}function S(e){return t(\"editor.setPage\",e)}function C(){return t(\"editor.getText\")}function A(){return t(\"editor.getCursor\")}function N(){return t(\"editor.getSelection\")}function L(e,r){return t(\"editor.setSelection\",e,r)}function E(){return t(\"editor.save\")}function R(e,r,n=!1,i=!1){return t(\"editor.navigate\",e,r,n,i)}function U(){return t(\"editor.reloadPage\")}function O(e){return t(\"editor.openUrl\",e)}function I(e,r){return t(\"editor.downloadFile\",e,r)}function K(e,r=\"info\"){return t(\"editor.flashNotification\",e,r)}function q(e,r,n=\"\",i=\"\"){return t(\"editor.filterBox\",e,r,n,i)}function $(e,r,n,i=\"\"){return t(\"editor.showPanel\",e,r,n,i)}function B(e){return t(\"editor.hidePanel\",e)}function D(e,r){return t(\"editor.insertAtPos\",e,r)}function Q(e,r,n){return t(\"editor.replaceRange\",e,r,n)}function V(e,r=!1){return t(\"editor.moveCursor\",e,r)}function W(e){return t(\"editor.insertAtCursor\",e)}function j(e){return t(\"editor.dispatch\",e)}function _(e,r=\"\"){return t(\"editor.prompt\",e,r)}function z(e){return t(\"editor.confirm\",e)}function G(e){return t(\"editor.getUiOption\",e)}function H(e,r){return t(\"editor.setUiOption\",e,r)}function J(e){return t(\"editor.vimEx\",e)}var c={};a(c,{parseMarkdown:()=>Y});function Y(e){return t(\"markdown.parseMarkdown\",e)}var d=class{listPages(r=!1){return t(\"space.listPages\",r)}getPageMeta(r){return t(\"space.getPageMeta\",r)}readPage(r){return t(\"space.readPage\",r)}writePage(r,n){return t(\"space.writePage\",r,n)}deletePage(r){return t(\"space.deletePage\",r)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(r){return t(\"space.getAttachmentMeta\",r)}readAttachment(r){return t(\"space.readAttachment\",r)}writeAttachment(r,n,i){return t(\"space.writeAttachment\",r,n,i)}deleteAttachment(r){return t(\"space.deleteAttachment\",r)}readFile(r,n){return t(\"space.readFile\",r,n)}getFileMeta(r){return t(\"space.getFileMeta\",r)}writeFile(r,n,i){return t(\"space.writeFile\",r,n,i)}deleteFile(r){return t(\"space.deleteFile\",r)}listFiles(r){return t(\"space.listFiles\",r)}},m=new d;var l={};a(l,{getEnv:()=>ie,invokeCommand:()=>re,invokeFunction:()=>ee,listCommands:()=>te,reloadPlugs:()=>ne});function ee(e,r,...n){return t(\"system.invokeFunction\",e,r,...n)}function re(e){return t(\"system.invokeCommand\",e)}function te(){return t(\"system.listCommands\")}function ne(){t(\"system.reloadPlugs\")}function ie(){return t(\"system.getEnv\")}function p(e){if(!!e.children)for(let r of e.children){if(r.parent)return;r.parent=e,p(r)}}function g(e,r){let n=e.parent;for(;n;){if(r(n))return n;n=n.parent}return null}function P(e,r){if(r(e))return[e];let n=[];if(e.children)for(let i of e.children)n=[...n,...P(i,r)];return n}function x(e,r){return P(e,n=>n.type===r)[0]}function f(e,r){if(r<e.from||r>=e.to)return null;if(!e.children)return e;for(let n of e.children){let i=f(n,r);if(i&&i.text!==void 0)return e;if(i)return i}return null}async function ae(e,r=!1){if(!e)return;let n=i=>[\"WikiLink\",\"Link\",\"Image\",\"URL\",\"NakedURL\",\"Link\",\"CommandLink\",\"PageRef\"].includes(i.type);if(!(!n(e)&&(e=g(e,n),!e)))switch(e.type){case\"WikiLink\":{let i=e.children[1].children[0].text,o;i.includes(\"@\")&&([i,o]=i.split(\"@\"),o.match(/^\\d+$/)&&(o=+o)),i||(i=await s.getCurrentPage()),await s.navigate(i,o,!1,r);break}case\"PageRef\":{let i=e.children[0].text;await s.navigate(i.substring(2,i.length-2),0,!1,r);break}case\"NakedURL\":await s.openUrl(e.children[0].text);break;case\"Image\":case\"Link\":{let i=x(e,\"URL\");if(!i)return;let o=i.children[0].text;if(o.length<=1)return s.flashNotification(\"Empty link, ignoring\",\"error\");if(o.indexOf(\"://\")===-1&&!o.startsWith(\"mailto:\")){o=decodeURIComponent(o);let h=await m.readAttachment(o);return s.downloadFile(o,h)}else await s.openUrl(o);break}case\"CommandLink\":{let i=e.children[1].children[0].text;await l.invokeCommand(i);break}}}async function y(e){if(e.altKey)return;let r=await c.parseMarkdown(await s.getText());p(r);let n=f(r,e.pos);await ae(n,e.ctrlKey||e.metaKey)}var ce=y;return T(le);})();\n return mod;})()"
    },
    "navigateHome": {
      "command": {
        "name": "Navigate: Home",
        "key": "Alt-h",
        "page": ""
      },
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var l=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},x=(t,e,n,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of g(e))!P.call(t,o)&&o!==n&&a(t,o,{get:()=>e[o],enumerable:!(i=f(e,o))||i.enumerable});return t};var y=t=>x(a({},\"__esModule\",{value:!0}),t);var J={};l(J,{default:()=>H});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};l(s,{confirm:()=>D,dispatch:()=>$,downloadFile:()=>N,filterBox:()=>E,flashNotification:()=>L,getCurrentPage:()=>v,getCursor:()=>w,getSelection:()=>T,getText:()=>k,getUiOption:()=>Q,hidePanel:()=>U,insertAtCursor:()=>q,insertAtPos:()=>O,moveCursor:()=>K,navigate:()=>S,openUrl:()=>A,prompt:()=>B,reloadPage:()=>C,replaceRange:()=>I,save:()=>M,setPage:()=>b,setSelection:()=>F,setUiOption:()=>V,showPanel:()=>R,vimEx:()=>W});function v(){return r(\"editor.getCurrentPage\")}function b(t){return r(\"editor.setPage\",t)}function k(){return r(\"editor.getText\")}function w(){return r(\"editor.getCursor\")}function T(){return r(\"editor.getSelection\")}function F(t,e){return r(\"editor.setSelection\",t,e)}function M(){return r(\"editor.save\")}function S(t,e,n=!1,i=!1){return r(\"editor.navigate\",t,e,n,i)}function C(){return r(\"editor.reloadPage\")}function A(t){return r(\"editor.openUrl\",t)}function N(t,e){return r(\"editor.downloadFile\",t,e)}function L(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function E(t,e,n=\"\",i=\"\"){return r(\"editor.filterBox\",t,e,n,i)}function R(t,e,n,i=\"\"){return r(\"editor.showPanel\",t,e,n,i)}function U(t){return r(\"editor.hidePanel\",t)}function O(t,e){return r(\"editor.insertAtPos\",t,e)}function I(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function K(t,e=!1){return r(\"editor.moveCursor\",t,e)}function q(t){return r(\"editor.insertAtCursor\",t)}function $(t){return r(\"editor.dispatch\",t)}function B(t,e=\"\"){return r(\"editor.prompt\",t,e)}function D(t){return r(\"editor.confirm\",t)}function Q(t){return r(\"editor.getUiOption\",t)}function V(t,e){return r(\"editor.setUiOption\",t,e)}function W(t){return r(\"editor.vimEx\",t)}var c=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,i){return r(\"space.writeAttachment\",e,n,i)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,i){return r(\"space.writeFile\",e,n,i)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},d=new c;async function p(t){await s.navigate(t.page)}var H=p;return y(J);})();\n return mod;})()"
    },
    "indexTags": {
      "events": [
        "page:index"
      ],
      "code": "(() => { var mod=(()=>{var O=Object.create;var g=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty;var L=(r=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(r,{get:(e,t)=>(typeof require!=\"undefined\"?require:e)[t]}):r)(function(r){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+r+'\" is not supported')});var M=(r,e)=>{for(var t in e)g(r,t,{get:e[t],enumerable:!0})},w=(r,e,t,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of I(e))!D.call(r,i)&&i!==t&&g(r,i,{get:()=>e[i],enumerable:!(o=N(e,i))||o.enumerable});return r};var q=(r,e,t)=>(t=r!=null?O(R(r)):{},w(e||!r||!r.__esModule?g(t,\"default\",{value:r,enumerable:!0}):t,r)),Y=r=>w(g({},\"__esModule\",{value:!0}),r);var ne={};M(ne,{default:()=>te});function x(r){if(!!r.children)for(let e of r.children){if(e.parent)return;e.parent=r,x(e)}}function F(r,e){return y(r,t=>t.type===e)}function y(r,e){if(e(r))return[r];let t=[];if(r.children)for(let o of r.children)t=[...t,...y(o,e)];return t}function l(r,e){if(r.children){let t=r.children.slice();for(let o of t){let i=e(o);if(i!==void 0){let a=r.children.indexOf(o);i?r.children.splice(a,1,i):r.children.splice(a,1)}else l(o,e)}}}function h(r,e){return y(r,t=>t.type===e)[0]}function u(r){let e=[];if(r.text!==void 0)return r.text;for(let t of r.children)e.push(u(t));return e.join(\"\")}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;var P={};M(P,{batchSet:()=>$,clearPageIndex:()=>J,clearPageIndexForPage:()=>z,del:()=>V,deletePrefixForPage:()=>G,get:()=>j,query:()=>_,queryPrefix:()=>H,set:()=>B});function B(r,e,t){return n(\"index.set\",r,e,t)}function $(r,e){return n(\"index.batchSet\",r,e)}function j(r,e){return n(\"index.get\",r,e)}function V(r,e){return n(\"index.delete\",r,e)}function H(r){return n(\"index.queryPrefix\",r)}function _(r){return n(\"index.query\",r)}function z(r){return n(\"index.clearPageIndexForPage\",r)}function G(r,e){return n(\"index.deletePrefixForPage\",r,e)}function J(){return n(\"index.clearPageIndex\")}var v=class{listPages(e=!1){return n(\"space.listPages\",e)}getPageMeta(e){return n(\"space.getPageMeta\",e)}readPage(e){return n(\"space.readPage\",e)}writePage(e,t){return n(\"space.writePage\",e,t)}deletePage(e){return n(\"space.deletePage\",e)}listPlugs(){return n(\"space.listPlugs\")}listAttachments(){return n(\"space.listAttachments\")}getAttachmentMeta(e){return n(\"space.getAttachmentMeta\",e)}readAttachment(e){return n(\"space.readAttachment\",e)}writeAttachment(e,t,o){return n(\"space.writeAttachment\",e,t,o)}deleteAttachment(e){return n(\"space.deleteAttachment\",e)}readFile(e,t){return n(\"space.readFile\",e,t)}getFileMeta(e){return n(\"space.getFileMeta\",e)}writeFile(e,t,o){return n(\"space.writeFile\",e,t,o)}deleteFile(e){return n(\"space.deleteFile\",e)}listFiles(e){return n(\"space.listFiles\",e)}},Z=new v;function k(r){l(r,e=>{if(e.type!==\"Directive\")return;let t=u(e);return{from:e.from,to:e.to,text:new Array(t.length+1).join(\" \")}})}var c=q(L(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function S(r,e=[]){let t={};return x(r),l(r,o=>{if(o.type===\"Hashtag\"){if(o.parent&&o.parent.type===\"Paragraph\"){let s=o.children[0].text.substring(1);t.tags||(t.tags=[]),Array.isArray(t.tags)&&!t.tags.includes(s)&&t.tags.push(s)}return}if(o.type===\"FrontMatter\"){let s=o.children[1].children[0],f=u(s);try{let p=c.parse(f),m={...p};if(t={...t,...p},e.length>0){let b=!1;for(let A of e)A in m&&(delete m[A],b=!0);b&&(s.text=c.stringify(m))}if(Object.keys(m).length===0)return null}catch(p){console.error(\"Could not parse frontmatter\",p)}}if(o.type!==\"FencedCode\")return;let i=h(o,\"CodeInfo\");if(!i||i.children[0].text!==\"meta\")return;let a=h(o,\"CodeText\");if(!a)return;let C=a.children[0].text,T=c.parse(C),d={...T};if(t={...t,...T},e.length>0){let s=!1;for(let f of e)f in d&&(delete d[f],s=!0);s&&(a.children[0].text=c.stringify(d).trim())}if(Object.keys(d).length===0)return null}),t.name&&(t.displayName=t.name,delete t.name),t}async function E({name:r,tree:e}){k(e);let t=new Set,{tags:o}=S(e);Array.isArray(o)&&o.forEach(i=>t.add(i)),F(e,\"Hashtag\").forEach(i=>{t.add(i.children[0].text.substring(1))}),await P.batchSet(r,[...t].map(i=>({key:`tag:${i}`,value:i})))}var te=E;return Y(ne);})();\n return mod;})()"
    },
    "tagComplete": {
      "events": [
        "editor:complete"
      ],
      "code": "(() => { var mod=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var y=(r=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(r,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):r)(function(r){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+r+'\" is not supported')});var l=(r,e)=>{for(var n in e)s(r,n,{get:e[n],enumerable:!0})},u=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of g(e))!x.call(r,i)&&i!==n&&s(r,i,{get:()=>e[i],enumerable:!(o=m(e,i))||o.enumerable});return r};var h=(r,e,n)=>(n=r!=null?p(P(r)):{},u(e||!r||!r.__esModule?s(n,\"default\",{value:r,enumerable:!0}):n,r)),v=r=>u(s({},\"__esModule\",{value:!0}),r);var B={};l(B,{default:()=>U});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var a={};l(a,{batchSet:()=>M,clearPageIndex:()=>O,clearPageIndexForPage:()=>C,del:()=>F,deletePrefixForPage:()=>E,get:()=>w,query:()=>S,queryPrefix:()=>k,set:()=>A});function A(r,e,n){return t(\"index.set\",r,e,n)}function M(r,e){return t(\"index.batchSet\",r,e)}function w(r,e){return t(\"index.get\",r,e)}function F(r,e){return t(\"index.delete\",r,e)}function k(r){return t(\"index.queryPrefix\",r)}function S(r){return t(\"index.query\",r)}function C(r){return t(\"index.clearPageIndexForPage\",r)}function E(r,e){return t(\"index.deletePrefixForPage\",r,e)}function O(){return t(\"index.clearPageIndex\")}var c=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},R=new c;var d=h(y(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function f(r){let e=/#[^#\\s]+$/.exec(r.linePrefix);if(!e)return null;let n=e[0].substring(1),o=await a.queryPrefix(`tag:${n}`);return{from:r.pos-n.length,options:o.map(i=>({label:i.value,type:\"tag\"}))}}var U=f;return v(B);})();\n return mod;})()"
    },
    "tagProvider": {
      "events": [
        "query:tag"
      ],
      "code": "(() => { var mod=(()=>{var h=Object.create;var u=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var M=(r=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(r,{get:(e,t)=>(typeof require!=\"undefined\"?require:e)[t]}):r)(function(r){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+r+'\" is not supported')});var p=(r,e)=>{for(var t in e)u(r,t,{get:e[t],enumerable:!0})},m=(r,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of T(e))!A.call(r,o)&&o!==t&&u(r,o,{get:()=>e[o],enumerable:!(i=v(e,o))||i.enumerable});return r};var w=(r,e,t)=>(t=r!=null?h(b(r)):{},m(e||!r||!r.__esModule?u(t,\"default\",{value:r,enumerable:!0}):t,r)),F=r=>m(u({},\"__esModule\",{value:!0}),r);var z={};p(z,{default:()=>_});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;var d={};p(d,{batchSet:()=>C,clearPageIndex:()=>q,clearPageIndexForPage:()=>D,del:()=>N,deletePrefixForPage:()=>L,get:()=>O,query:()=>R,queryPrefix:()=>I,set:()=>E});function E(r,e,t){return n(\"index.set\",r,e,t)}function C(r,e){return n(\"index.batchSet\",r,e)}function O(r,e){return n(\"index.get\",r,e)}function N(r,e){return n(\"index.delete\",r,e)}function I(r){return n(\"index.queryPrefix\",r)}function R(r){return n(\"index.query\",r)}function D(r){return n(\"index.clearPageIndexForPage\",r)}function L(r,e){return n(\"index.deletePrefixForPage\",r,e)}function q(){return n(\"index.clearPageIndex\")}var f=class{listPages(e=!1){return n(\"space.listPages\",e)}getPageMeta(e){return n(\"space.getPageMeta\",e)}readPage(e){return n(\"space.readPage\",e)}writePage(e,t){return n(\"space.writePage\",e,t)}deletePage(e){return n(\"space.deletePage\",e)}listPlugs(){return n(\"space.listPlugs\")}listAttachments(){return n(\"space.listAttachments\")}getAttachmentMeta(e){return n(\"space.getAttachmentMeta\",e)}readAttachment(e){return n(\"space.readAttachment\",e)}writeAttachment(e,t,i){return n(\"space.writeAttachment\",e,t,i)}deleteAttachment(e){return n(\"space.deleteAttachment\",e)}readFile(e,t){return n(\"space.readFile\",e,t)}getFileMeta(e){return n(\"space.getFileMeta\",e)}writeFile(e,t,i){return n(\"space.writeFile\",e,t,i)}deleteFile(e){return n(\"space.deleteFile\",e)}listFiles(e){return n(\"space.listFiles\",e)}},U=new f;function g(r,e){let t=[];if(r.filter.length===0)t=e.slice();else{e:for(let i of e){let o=i;for(let{op:c,prop:a,value:s}of r.filter)switch(c){case\"=\":{let l=o[a];if(Array.isArray(l)&&!Array.isArray(s)){if(!l.includes(s))continue e}else if(Array.isArray(l)&&Array.isArray(s)){if(!l.some(y=>s.includes(y)))continue e}else if(l!=s)continue e;break}case\"!=\":if(o[a]==s)continue e;break;case\"<\":if(!(o[a]<s))continue e;break;case\"<=\":if(!(o[a]<=s))continue e;break;case\">\":if(!(o[a]>s))continue e;break;case\">=\":if(!(o[a]>=s))continue e;break;case\"=~\":if(!new RegExp(s).exec(o[a]))continue e;break;case\"!=~\":if(new RegExp(s).exec(o[a]))continue e;break;case\"in\":if(!s.includes(o[a]))continue e;break}t.push(o)}}return r.ordering.length>0&&(t=t.sort((i,o)=>{for(let{orderBy:c,orderDesc:a}of r.ordering){if(i[c]<o[c]||i[c]===void 0)return a?1:-1;if(i[c]>o[c]||o[c]===void 0)return a?-1:1}return 0})),r.limit&&(t=t.slice(0,r.limit)),r.select&&(t=t.map(i=>{let o={};for(let c of r.select)o[c]=i[c];return o})),t}var P=w(M(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function x({query:r}){let e=new Map;for(let{value:t}of await d.queryPrefix(\"tag:\")){let i=e.get(t);i||(i=0),e.set(t,i+1)}return g(r,[...e.entries()].map(([t,i])=>({name:t,freq:i})))}var _=x;return F(z);})();\n return mod;})()"
    },
    "indexAnchors": {
      "events": [
        "page:index"
      ],
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var f=(r,e)=>{for(var n in e)a(r,n,{get:e[n],enumerable:!0})},T=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of h(e))!v.call(r,i)&&i!==n&&a(r,i,{get:()=>e[i],enumerable:!(o=y(e,i))||o.enumerable});return r};var b=r=>T(a({},\"__esModule\",{value:!0}),r);var L={};f(L,{default:()=>B});function m(r,e){return p(r,n=>n.type===e)}function p(r,e){if(e(r))return[r];let n=[];if(r.children)for(let o of r.children)n=[...n,...p(o,e)];return n}function c(r,e){if(r.children){let n=r.children.slice();for(let o of n){let i=e(o);if(i!==void 0){let d=r.children.indexOf(o);i?r.children.splice(d,1,i):r.children.splice(d,1)}else c(o,e)}}}function u(r){let e=[];if(r.text!==void 0)return r.text;for(let n of r.children)e.push(u(n));return e.join(\"\")}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var s={};f(s,{batchSet:()=>k,clearPageIndex:()=>O,clearPageIndexForPage:()=>E,del:()=>S,deletePrefixForPage:()=>R,get:()=>F,query:()=>C,queryPrefix:()=>M,set:()=>w});function w(r,e,n){return t(\"index.set\",r,e,n)}function k(r,e){return t(\"index.batchSet\",r,e)}function F(r,e){return t(\"index.get\",r,e)}function S(r,e){return t(\"index.delete\",r,e)}function M(r){return t(\"index.queryPrefix\",r)}function C(r){return t(\"index.query\",r)}function E(r){return t(\"index.clearPageIndexForPage\",r)}function R(r,e){return t(\"index.deletePrefixForPage\",r,e)}function O(){return t(\"index.clearPageIndex\")}var l=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},q=new l;function P(r){c(r,e=>{if(e.type!==\"Directive\")return;let n=u(e);return{from:e.from,to:e.to,text:new Array(n.length+1).join(\" \")}})}async function x({name:r,tree:e}){P(e);let n=[];m(e,\"NamedAnchor\").forEach(o=>{let i=o.children[0].text.substring(1);n.push({key:`a:${r}:${i}`,value:\"\"+o.from})}),await s.batchSet(r,n)}var B=x;return b(L);})();\n return mod;})()"
    },
    "anchorComplete": {
      "events": [
        "editor:complete"
      ],
      "code": "(() => { var mod=(()=>{var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var u=(r,e)=>{for(var n in e)c(r,n,{get:e[n],enumerable:!0})},P=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of p(e))!g.call(r,i)&&i!==n&&c(r,i,{get:()=>e[i],enumerable:!(o=m(e,i))||o.enumerable});return r};var x=r=>P(c({},\"__esModule\",{value:!0}),r);var se={};u(se,{default:()=>ie});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var s={};u(s,{confirm:()=>L,dispatch:()=>U,downloadFile:()=>C,filterBox:()=>R,flashNotification:()=>E,getCurrentPage:()=>h,getCursor:()=>b,getSelection:()=>A,getText:()=>T,getUiOption:()=>Q,hidePanel:()=>I,insertAtCursor:()=>D,insertAtPos:()=>N,moveCursor:()=>$,navigate:()=>F,openUrl:()=>M,prompt:()=>B,reloadPage:()=>S,replaceRange:()=>q,save:()=>k,setPage:()=>v,setSelection:()=>w,setUiOption:()=>V,showPanel:()=>O,vimEx:()=>j});function h(){return t(\"editor.getCurrentPage\")}function v(r){return t(\"editor.setPage\",r)}function T(){return t(\"editor.getText\")}function b(){return t(\"editor.getCursor\")}function A(){return t(\"editor.getSelection\")}function w(r,e){return t(\"editor.setSelection\",r,e)}function k(){return t(\"editor.save\")}function F(r,e,n=!1,o=!1){return t(\"editor.navigate\",r,e,n,o)}function S(){return t(\"editor.reloadPage\")}function M(r){return t(\"editor.openUrl\",r)}function C(r,e){return t(\"editor.downloadFile\",r,e)}function E(r,e=\"info\"){return t(\"editor.flashNotification\",r,e)}function R(r,e,n=\"\",o=\"\"){return t(\"editor.filterBox\",r,e,n,o)}function O(r,e,n,o=\"\"){return t(\"editor.showPanel\",r,e,n,o)}function I(r){return t(\"editor.hidePanel\",r)}function N(r,e){return t(\"editor.insertAtPos\",r,e)}function q(r,e,n){return t(\"editor.replaceRange\",r,e,n)}function $(r,e=!1){return t(\"editor.moveCursor\",r,e)}function D(r){return t(\"editor.insertAtCursor\",r)}function U(r){return t(\"editor.dispatch\",r)}function B(r,e=\"\"){return t(\"editor.prompt\",r,e)}function L(r){return t(\"editor.confirm\",r)}function Q(r){return t(\"editor.getUiOption\",r)}function V(r,e){return t(\"editor.setUiOption\",r,e)}function j(r){return t(\"editor.vimEx\",r)}var a={};u(a,{batchSet:()=>_,clearPageIndex:()=>Y,clearPageIndexForPage:()=>W,del:()=>G,deletePrefixForPage:()=>X,get:()=>z,query:()=>J,queryPrefix:()=>H,set:()=>K});function K(r,e,n){return t(\"index.set\",r,e,n)}function _(r,e){return t(\"index.batchSet\",r,e)}function z(r,e){return t(\"index.get\",r,e)}function G(r,e){return t(\"index.delete\",r,e)}function H(r){return t(\"index.queryPrefix\",r)}function J(r){return t(\"index.query\",r)}function W(r){return t(\"index.clearPageIndexForPage\",r)}function X(r,e){return t(\"index.deletePrefixForPage\",r,e)}function Y(){return t(\"index.clearPageIndex\")}var l=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},re=new l;async function d(r){let e=/\\[\\[([^\\]@:]*@[\\w\\.\\-\\/]*)$/.exec(r.linePrefix);if(!e)return null;let[n,o]=e[1].split(\"@\");n||(n=await s.getCurrentPage());let i=await a.queryPrefix(`a:${n}:${o}`);return{from:r.pos-o.length,options:i.map(f=>({label:f.key.split(\":\")[2],type:\"anchor\"}))}}var ie=d;return x(se);})();\n return mod;})()"
    },
    "searchIndex": {
      "events": [
        "page:index"
      ],
      "code": "(() => { var mod=(()=>{var c=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var p=(r,e)=>{for(var n in e)c(r,n,{get:e[n],enumerable:!0})},b=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of h(e))!v.call(r,i)&&i!==n&&c(r,i,{get:()=>e[i],enumerable:!(o=y(e,i))||o.enumerable});return r};var T=r=>b(c({},\"__esModule\",{value:!0}),r);var q={};p(q,{default:()=>N});var s=self.syscall;var l={};p(l,{fullTextDelete:()=>A,fullTextIndex:()=>S,fullTextSearch:()=>E});function S(r,e){return s(\"fulltext.index\",r,e)}function A(r){return s(\"fulltext.delete\",r)}function E(r,e={}){return s(\"fulltext.search\",r,e)}function u(r,e){if(r.children){let n=r.children.slice();for(let o of n){let i=e(o);if(i!==void 0){let m=r.children.indexOf(o);i?r.children.splice(m,1,i):r.children.splice(m,1)}else u(o,e)}}}function a(r){let e=[];if(r.text!==void 0)return r.text;for(let n of r.children)e.push(a(n));return e.join(\"\")}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var f=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},O=new f;function x(r){u(r,e=>{if(e.type!==\"Directive\")return;let n=a(e);return{from:e.from,to:e.to,text:new Array(n.length+1).join(\" \")}})}async function P(r){x(r.tree);let e=a(r.tree);await l.fullTextIndex(r.name,e)}var N=P;return T(q);})();\n return mod;})()"
    },
    "searchUnindex": {
      "env": "server",
      "events": [
        "page:deleted"
      ],
      "code": "(() => { var mod=(()=>{var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var u=(t,e)=>{for(var n in e)l(t,n,{get:e[n],enumerable:!0})},P=(t,e,n,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of g(e))!x.call(t,s)&&s!==n&&l(t,s,{get:()=>e[s],enumerable:!(i=d(e,s))||i.enumerable});return t};var y=t=>P(l({},\"__esModule\",{value:!0}),t);var I={};u(I,{default:()=>R});var o=self.syscall;var a={};u(a,{fullTextDelete:()=>F,fullTextIndex:()=>T,fullTextSearch:()=>w});function T(t,e){return o(\"fulltext.index\",t,e)}function F(t){return o(\"fulltext.delete\",t)}function w(t,e={}){return o(\"fulltext.search\",t,e)}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var c=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,i){return r(\"space.writeAttachment\",e,n,i)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,i){return r(\"space.writeFile\",e,n,i)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},D=new c;async function p(t){await a.fullTextDelete(t)}var R=p;return y(I);})();\n return mod;})()"
    },
    "searchQueryProvider": {
      "events": [
        "query:full-text"
      ],
      "code": "(() => { var mod=(()=>{var p=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var d=(r,e)=>{for(var o in e)p(r,o,{get:e[o],enumerable:!0})},F=(r,e,o,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let n of b(e))!T.call(r,n)&&n!==o&&p(r,n,{get:()=>e[n],enumerable:!(i=v(e,n))||i.enumerable});return r};var w=r=>F(p({},\"__esModule\",{value:!0}),r);var Y={};d(Y,{default:()=>X});var c=self.syscall;var f={};d(f,{fullTextDelete:()=>k,fullTextIndex:()=>E,fullTextSearch:()=>D});function E(r,e){return c(\"fulltext.index\",r,e)}function k(r){return c(\"fulltext.delete\",r)}function D(r,e={}){return c(\"fulltext.search\",r,e)}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var m={};d(m,{batchSet:()=>R,clearPageIndex:()=>V,clearPageIndexForPage:()=>Q,del:()=>L,deletePrefixForPage:()=>B,get:()=>I,query:()=>q,queryPrefix:()=>N,set:()=>O});function O(r,e,o){return t(\"index.set\",r,e,o)}function R(r,e){return t(\"index.batchSet\",r,e)}function I(r,e){return t(\"index.get\",r,e)}function L(r,e){return t(\"index.delete\",r,e)}function N(r){return t(\"index.queryPrefix\",r)}function q(r){return t(\"index.query\",r)}function Q(r){return t(\"index.clearPageIndexForPage\",r)}function B(r,e){return t(\"index.deletePrefixForPage\",r,e)}function V(){return t(\"index.clearPageIndex\")}var g=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,o){return t(\"space.writePage\",e,o)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,o,i){return t(\"space.writeAttachment\",e,o,i)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,o){return t(\"space.readFile\",e,o)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,o,i){return t(\"space.writeFile\",e,o,i)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},z=new g;function P(r,e){let o=[];if(r.filter.length===0)o=e.slice();else{e:for(let i of e){let n=i;for(let{op:l,prop:s,value:a}of r.filter)switch(l){case\"=\":{let u=n[s];if(Array.isArray(u)&&!Array.isArray(a)){if(!u.includes(a))continue e}else if(Array.isArray(u)&&Array.isArray(a)){if(!u.some(h=>a.includes(h)))continue e}else if(u!=a)continue e;break}case\"!=\":if(n[s]==a)continue e;break;case\"<\":if(!(n[s]<a))continue e;break;case\"<=\":if(!(n[s]<=a))continue e;break;case\">\":if(!(n[s]>a))continue e;break;case\">=\":if(!(n[s]>=a))continue e;break;case\"=~\":if(!new RegExp(a).exec(n[s]))continue e;break;case\"!=~\":if(new RegExp(a).exec(n[s]))continue e;break;case\"in\":if(!a.includes(n[s]))continue e;break}o.push(n)}}return r.ordering.length>0&&(o=o.sort((i,n)=>{for(let{orderBy:l,orderDesc:s}of r.ordering){if(i[l]<n[l]||i[l]===void 0)return s?1:-1;if(i[l]>n[l]||n[l]===void 0)return s?-1:1}return 0})),r.limit&&(o=o.slice(0,r.limit)),r.select&&(o=o.map(i=>{let n={};for(let l of r.select)n[l]=i[l];return n})),o}async function y({query:r}){let e=r.filter.find(n=>n.prop===\"phrase\");if(!e)throw Error(\"No 'phrase' filter specified, this is mandatory\");let o=await f.fullTextSearch(e.value,{highlightEllipsis:\"...\",limit:100}),i=new Map(o.map(n=>[n.name,n]));for(let{page:n,value:l}of await m.queryPrefix(\"meta:\")){let s=i.get(n);if(s)for(let[a,u]of Object.entries(l))s[a]=u}return r.filter.splice(r.filter.indexOf(e),1),o=P(r,o),o}var X=y;return w(Y);})();\n return mod;})()"
    },
    "searchCommand": {
      "command": {
        "name": "Search Space",
        "key": "Ctrl-Shift-f",
        "mac": "Cmd-Shift-f"
      },
      "code": "(() => { var mod=(()=>{var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var u=(r,e)=>{for(var n in e)l(r,n,{get:e[n],enumerable:!0})},P=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of g(e))!x.call(r,s)&&s!==n&&l(r,s,{get:()=>e[s],enumerable:!(o=d(e,s))||o.enumerable});return r};var y=r=>P(l({},\"__esModule\",{value:!0}),r);var ie={};u(ie,{default:()=>oe});var i=self.syscall;typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var a={};u(a,{confirm:()=>G,dispatch:()=>K,downloadFile:()=>R,filterBox:()=>L,flashNotification:()=>I,getCurrentPage:()=>M,getCursor:()=>E,getSelection:()=>k,getText:()=>A,getUiOption:()=>H,hidePanel:()=>q,insertAtCursor:()=>j,insertAtPos:()=>Q,moveCursor:()=>V,navigate:()=>$,openUrl:()=>O,prompt:()=>z,reloadPage:()=>U,replaceRange:()=>B,save:()=>C,setPage:()=>S,setSelection:()=>D,setUiOption:()=>J,showPanel:()=>N,vimEx:()=>W});function M(){return t(\"editor.getCurrentPage\")}function S(r){return t(\"editor.setPage\",r)}function A(){return t(\"editor.getText\")}function E(){return t(\"editor.getCursor\")}function k(){return t(\"editor.getSelection\")}function D(r,e){return t(\"editor.setSelection\",r,e)}function C(){return t(\"editor.save\")}function $(r,e,n=!1,o=!1){return t(\"editor.navigate\",r,e,n,o)}function U(){return t(\"editor.reloadPage\")}function O(r){return t(\"editor.openUrl\",r)}function R(r,e){return t(\"editor.downloadFile\",r,e)}function I(r,e=\"info\"){return t(\"editor.flashNotification\",r,e)}function L(r,e,n=\"\",o=\"\"){return t(\"editor.filterBox\",r,e,n,o)}function N(r,e,n,o=\"\"){return t(\"editor.showPanel\",r,e,n,o)}function q(r){return t(\"editor.hidePanel\",r)}function Q(r,e){return t(\"editor.insertAtPos\",r,e)}function B(r,e,n){return t(\"editor.replaceRange\",r,e,n)}function V(r,e=!1){return t(\"editor.moveCursor\",r,e)}function j(r){return t(\"editor.insertAtCursor\",r)}function K(r){return t(\"editor.dispatch\",r)}function z(r,e=\"\"){return t(\"editor.prompt\",r,e)}function G(r){return t(\"editor.confirm\",r)}function H(r){return t(\"editor.getUiOption\",r)}function J(r,e){return t(\"editor.setUiOption\",r,e)}function W(r){return t(\"editor.vimEx\",r)}var c=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},Z=new c;var ne=\"\\u{1F50D} \";async function p(){let r=await a.prompt(\"Search for: \");r&&await a.navigate(`${ne}${r}`)}var oe=p;return y(ie);})();\n return mod;})()"
    },
    "readPageSearch": {
      "env": "server",
      "pageNamespace": {
        "pattern": "🔍 .+",
        "operation": "readFile"
      },
      "code": "(() => { var mod=(()=>{var l=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var f=(t,e)=>{for(var n in e)l(t,n,{get:e[n],enumerable:!0})},h=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of P(e))!y.call(t,i)&&i!==n&&l(t,i,{get:()=>e[i],enumerable:!(o=x(e,i))||o.enumerable});return t};var v=t=>h(l({},\"__esModule\",{value:!0}),t);var Q={};f(Q,{default:()=>q});function b(t){let e=\"\",n=t.byteLength;for(let o=0;o<n;o++)e+=String.fromCharCode(t[o]);return btoa(e)}function m(t,e){return`data:${t};base64,${b(e)}`}var s=self.syscall;var a={};f(a,{fullTextDelete:()=>M,fullTextIndex:()=>S,fullTextSearch:()=>A});function S(t,e){return s(\"fulltext.index\",t,e)}function M(t){return s(\"fulltext.delete\",t)}function A(t,e={}){return s(\"fulltext.search\",t,e)}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var c=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},U=new c;var N=\"\\u{1F50D} \";async function g(t,e){let n=t.substring(N.length,t.length-3),o=await a.fullTextSearch(n,{highlightEllipsis:\"...\",highlightPostfix:\"==\",highlightPrefix:\"==\",summaryMaxLength:30,limit:100}),i=`# Search results for \"${n}\"\n${o.map(u=>`[[${u.name}]]:\n> ${u.snippet.split(`\n`).join(`\n> `)}`).join(`\n\n`)}\n  `;return{data:e===\"utf8\"?i:m(\"text/markdown\",new TextEncoder().encode(i)),meta:{name:t,contentType:\"text/markdown\",size:i.length,lastModified:0,perm:\"ro\"}}}var q=g;return v(Q);})();\n return mod;})()"
    },
    "getPageMetaSearch": {
      "env": "server",
      "pageNamespace": {
        "pattern": "🔍 .+",
        "operation": "getFileMeta"
      },
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var x=(n,e)=>{for(var t in e)a(n,t,{get:e[t],enumerable:!0})},P=(n,e,t,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of d(e))!g.call(n,s)&&s!==t&&a(n,s,{get:()=>e[s],enumerable:!(o=p(e,s))||o.enumerable});return n};var y=n=>P(a({},\"__esModule\",{value:!0}),n);var U={};x(U,{default:()=>C});var i=self.syscall;typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var l=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,t){return r(\"space.writePage\",e,t)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,t,o){return r(\"space.writeAttachment\",e,t,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,t){return r(\"space.readFile\",e,t)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,t,o){return r(\"space.writeFile\",e,t,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},A=new l;function m(n){return{name:n,contentType:\"text/markdown\",size:-1,lastModified:0,perm:\"ro\"}}var C=m;return y(U);})();\n return mod;})()"
    },
    "insertTemplateText": {
      "code": "(() => { var mod=(()=>{var h=Object.create;var c=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var u=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var m=(t,e)=>{for(var n in e)c(t,n,{get:e[n],enumerable:!0})},g=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of T(e))!S.call(t,i)&&i!==n&&c(t,i,{get:()=>e[i],enumerable:!(o=w(e,i))||o.enumerable});return t};var d=(t,e,n)=>(n=t!=null?h(v(t)):{},g(e||!t||!t.__esModule?c(n,\"default\",{value:t,enumerable:!0}):n,t)),M=t=>g(c({},\"__esModule\",{value:!0}),t);var ce={};m(ce,{default:()=>se});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var a={};m(a,{confirm:()=>H,dispatch:()=>V,downloadFile:()=>E,filterBox:()=>R,flashNotification:()=>I,getCurrentPage:()=>b,getCursor:()=>C,getSelection:()=>D,getText:()=>k,getUiOption:()=>_,hidePanel:()=>W,insertAtCursor:()=>G,insertAtPos:()=>q,moveCursor:()=>j,navigate:()=>L,openUrl:()=>O,prompt:()=>Q,reloadPage:()=>Y,replaceRange:()=>B,save:()=>$,setPage:()=>A,setSelection:()=>F,setUiOption:()=>z,showPanel:()=>U,vimEx:()=>J});function b(){return r(\"editor.getCurrentPage\")}function A(t){return r(\"editor.setPage\",t)}function k(){return r(\"editor.getText\")}function C(){return r(\"editor.getCursor\")}function D(){return r(\"editor.getSelection\")}function F(t,e){return r(\"editor.setSelection\",t,e)}function $(){return r(\"editor.save\")}function L(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function Y(){return r(\"editor.reloadPage\")}function O(t){return r(\"editor.openUrl\",t)}function E(t,e){return r(\"editor.downloadFile\",t,e)}function I(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function R(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function U(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function W(t){return r(\"editor.hidePanel\",t)}function q(t,e){return r(\"editor.insertAtPos\",t,e)}function B(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function j(t,e=!1){return r(\"editor.moveCursor\",t,e)}function G(t){return r(\"editor.insertAtCursor\",t)}function V(t){return r(\"editor.dispatch\",t)}function Q(t,e=\"\"){return r(\"editor.prompt\",t,e)}function H(t){return r(\"editor.confirm\",t)}function _(t){return r(\"editor.getUiOption\",t)}function z(t,e){return r(\"editor.setUiOption\",t,e)}function J(t){return r(\"editor.vimEx\",t)}var f=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},l=new f;var P=d(u(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function s(t){function e(n){let o=String(n);return o.length===1&&(o=\"0\"+o),o}return t.getFullYear()+\"-\"+e(t.getMonth()+1)+\"-\"+e(t.getDate())}var y=d(u(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var ie=d(u(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function ae(t,e){return t.replaceAll(/\\{\\{([^\\}]+)\\}\\}/g,(n,o)=>{switch(o){case\"today\":return s(new Date);case\"tomorrow\":{let i=new Date;return i.setDate(i.getDate()+1),s(i)}case\"yesterday\":{let i=new Date;return i.setDate(i.getDate()-1),s(i)}case\"lastWeek\":{let i=new Date;return i.setDate(i.getDate()-7),s(i)}case\"nextWeek\":{let i=new Date;return i.setDate(i.getDate()+7),s(i)}case\"page\":return e}return n})}async function x(t){let e=await a.getCursor(),n=await a.getCurrentPage(),o=t.value,i=o.indexOf(\"|^|\");o=o.replace(\"|^|\",\"\"),o=ae(o,n),await a.insertAtCursor(o),i!==-1&&await a.moveCursor(e+i)}var se=x;return M(ce);})();\n return mod;})()"
    },
    "applyLineReplace": {
      "code": "(() => { var mod=(()=>{var w=Object.create;var c=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var S=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty;var u=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var m=(t,e)=>{for(var n in e)c(t,n,{get:e[n],enumerable:!0})},g=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of v(e))!M.call(t,i)&&i!==n&&c(t,i,{get:()=>e[i],enumerable:!(o=T(e,i))||o.enumerable});return t};var p=(t,e,n)=>(n=t!=null?w(S(t)):{},g(e||!t||!t.__esModule?c(n,\"default\",{value:t,enumerable:!0}):n,t)),N=t=>g(c({},\"__esModule\",{value:!0}),t);var ce={};m(ce,{default:()=>se});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var a={};m(a,{confirm:()=>_,dispatch:()=>Q,downloadFile:()=>I,filterBox:()=>U,flashNotification:()=>R,getCurrentPage:()=>A,getCursor:()=>D,getSelection:()=>F,getText:()=>C,getUiOption:()=>z,hidePanel:()=>q,insertAtCursor:()=>V,insertAtPos:()=>B,moveCursor:()=>G,navigate:()=>Y,openUrl:()=>E,prompt:()=>H,reloadPage:()=>O,replaceRange:()=>j,save:()=>L,setPage:()=>k,setSelection:()=>$,setUiOption:()=>J,showPanel:()=>W,vimEx:()=>X});function A(){return r(\"editor.getCurrentPage\")}function k(t){return r(\"editor.setPage\",t)}function C(){return r(\"editor.getText\")}function D(){return r(\"editor.getCursor\")}function F(){return r(\"editor.getSelection\")}function $(t,e){return r(\"editor.setSelection\",t,e)}function L(){return r(\"editor.save\")}function Y(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function O(){return r(\"editor.reloadPage\")}function E(t){return r(\"editor.openUrl\",t)}function I(t,e){return r(\"editor.downloadFile\",t,e)}function R(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function U(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function W(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function q(t){return r(\"editor.hidePanel\",t)}function B(t,e){return r(\"editor.insertAtPos\",t,e)}function j(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function G(t,e=!1){return r(\"editor.moveCursor\",t,e)}function V(t){return r(\"editor.insertAtCursor\",t)}function Q(t){return r(\"editor.dispatch\",t)}function H(t,e=\"\"){return r(\"editor.prompt\",t,e)}function _(t){return r(\"editor.confirm\",t)}function z(t){return r(\"editor.getUiOption\",t)}function J(t,e){return r(\"editor.setUiOption\",t,e)}function X(t){return r(\"editor.vimEx\",t)}var f=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},l=new f;var P=p(u(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var y=p(u(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var ae=p(u(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function x(t){let e=await a.getCursor(),n=await a.getText(),o=new RegExp(t.match),i=e;for(;i>0&&n[i-1]!==`\n`;)i--;let s=n.slice(i,e),h=!s;s=s.replace(o,t.replace),await a.dispatch({changes:{from:i,to:e,insert:s},selection:h?{anchor:i+s.length}:void 0})}var se=x;return N(ce);})();\n return mod;})()"
    },
    "insertFrontMatter": {
      "redirect": "insertTemplateText",
      "slashCommand": {
        "name": "front-matter",
        "description": "Insert page front matter",
        "value": "---\n|^|\n---\n"
      }
    },
    "makeH1": {
      "redirect": "applyLineReplace",
      "slashCommand": {
        "name": "h1",
        "description": "Turn line into h1 header",
        "match": "^#*\\s*",
        "replace": "# "
      }
    },
    "makeH2": {
      "redirect": "applyLineReplace",
      "slashCommand": {
        "name": "h2",
        "description": "Turn line into h2 header",
        "match": "^#*\\s*",
        "replace": "## "
      }
    },
    "makeH3": {
      "redirect": "applyLineReplace",
      "slashCommand": {
        "name": "h3",
        "description": "Turn line into h3 header",
        "match": "^#*\\s*",
        "replace": "### "
      }
    },
    "makeH4": {
      "redirect": "applyLineReplace",
      "slashCommand": {
        "name": "h4",
        "description": "Turn line into h4 header",
        "match": "^#*\\s*",
        "replace": "#### "
      }
    },
    "newPage": {
      "command": {
        "name": "Page: New",
        "key": "Alt-Shift-n"
      },
      "code": "(() => { var mod=(()=>{var w=Object.create;var a=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var M=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var d=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},g=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of T(e))!F.call(t,s)&&s!==n&&a(t,s,{get:()=>e[s],enumerable:!(o=b(e,s))||o.enumerable});return t};var A=(t,e,n)=>(n=t!=null?w(k(t)):{},g(e||!t||!t.__esModule?a(n,\"default\",{value:t,enumerable:!0}):n,t)),S=t=>g(a({},\"__esModule\",{value:!0}),t);var de={};d(de,{default:()=>ue});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var l={};d(l,{confirm:()=>J,dispatch:()=>_,downloadFile:()=>B,filterBox:()=>Q,flashNotification:()=>Y,getCurrentPage:()=>C,getCursor:()=>L,getSelection:()=>D,getText:()=>$,getUiOption:()=>X,hidePanel:()=>W,insertAtCursor:()=>K,insertAtPos:()=>j,moveCursor:()=>H,navigate:()=>U,openUrl:()=>q,prompt:()=>z,reloadPage:()=>O,replaceRange:()=>G,save:()=>R,setPage:()=>N,setSelection:()=>I,setUiOption:()=>Z,showPanel:()=>V,vimEx:()=>ee});function C(){return r(\"editor.getCurrentPage\")}function N(t){return r(\"editor.setPage\",t)}function $(){return r(\"editor.getText\")}function L(){return r(\"editor.getCursor\")}function D(){return r(\"editor.getSelection\")}function I(t,e){return r(\"editor.setSelection\",t,e)}function R(){return r(\"editor.save\")}function U(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function O(){return r(\"editor.reloadPage\")}function q(t){return r(\"editor.openUrl\",t)}function B(t,e){return r(\"editor.downloadFile\",t,e)}function Y(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function Q(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function V(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function W(t){return r(\"editor.hidePanel\",t)}function j(t,e){return r(\"editor.insertAtPos\",t,e)}function G(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function H(t,e=!1){return r(\"editor.moveCursor\",t,e)}function K(t){return r(\"editor.insertAtCursor\",t)}function _(t){return r(\"editor.dispatch\",t)}function z(t,e=\"\"){return r(\"editor.prompt\",t,e)}function J(t){return r(\"editor.confirm\",t)}function X(t){return r(\"editor.getUiOption\",t)}function Z(t,e){return r(\"editor.setUiOption\",t,e)}function ee(t){return r(\"editor.vimEx\",t)}var c=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},u=new c;var i=self.syscall;var h=A(M(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function v(){let t=await u.listPages(),e=\"Untitled\",n=1;for(;t.find(o=>o.name===e);)e=`Untitled ${n}`,n++;await l.navigate(e)}var ue=v;return S(de);})();\n return mod;})()"
    },
    "insertHRTemplate": {
      "redirect": "insertTemplateText",
      "slashCommand": {
        "name": "hr",
        "description": "Insert a horizontal rule",
        "value": "---"
      }
    },
    "insertTable": {
      "redirect": "insertTemplateText",
      "slashCommand": {
        "name": "table",
        "description": "Insert a table",
        "boost": -1,
        "value": "| Header A | Header B |\n|----------|----------|\n| Cell A|^| | Cell B |\n"
      }
    },
    "quickNoteCommand": {
      "command": {
        "name": "Quick Note",
        "key": "Alt-Shift-n",
        "priority": 1
      },
      "code": "(() => { var mod=(()=>{var b=Object.create;var l=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var C=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty;var p=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var m=(t,e)=>{for(var n in e)l(t,n,{get:e[n],enumerable:!0})},T=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of k(e))!D.call(t,i)&&i!==n&&l(t,i,{get:()=>e[i],enumerable:!(o=A(e,i))||o.enumerable});return t};var f=(t,e,n)=>(n=t!=null?b(C(t)):{},T(e||!t||!t.__esModule?l(n,\"default\",{value:t,enumerable:!0}):n,t)),F=t=>T(l({},\"__esModule\",{value:!0}),t);var ge={};m(ge,{default:()=>fe});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var a={};m(a,{confirm:()=>ee,dispatch:()=>Z,downloadFile:()=>j,filterBox:()=>V,flashNotification:()=>G,getCurrentPage:()=>L,getCursor:()=>E,getSelection:()=>I,getText:()=>O,getUiOption:()=>te,hidePanel:()=>H,insertAtCursor:()=>X,insertAtPos:()=>_,moveCursor:()=>J,navigate:()=>U,openUrl:()=>B,prompt:()=>K,reloadPage:()=>W,replaceRange:()=>z,save:()=>q,setPage:()=>Y,setSelection:()=>R,setUiOption:()=>re,showPanel:()=>Q,vimEx:()=>ne});function L(){return r(\"editor.getCurrentPage\")}function Y(t){return r(\"editor.setPage\",t)}function O(){return r(\"editor.getText\")}function E(){return r(\"editor.getCursor\")}function I(){return r(\"editor.getSelection\")}function R(t,e){return r(\"editor.setSelection\",t,e)}function q(){return r(\"editor.save\")}function U(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function W(){return r(\"editor.reloadPage\")}function B(t){return r(\"editor.openUrl\",t)}function j(t,e){return r(\"editor.downloadFile\",t,e)}function G(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function V(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function Q(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function H(t){return r(\"editor.hidePanel\",t)}function _(t,e){return r(\"editor.insertAtPos\",t,e)}function z(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function J(t,e=!1){return r(\"editor.moveCursor\",t,e)}function X(t){return r(\"editor.insertAtCursor\",t)}function Z(t){return r(\"editor.dispatch\",t)}function K(t,e=\"\"){return r(\"editor.prompt\",t,e)}function ee(t){return r(\"editor.confirm\",t)}function te(t){return r(\"editor.getUiOption\",t)}function re(t,e){return r(\"editor.setUiOption\",t,e)}function ne(t){return r(\"editor.vimEx\",t)}var s={};m(s,{parseMarkdown:()=>ie});function ie(t){return r(\"markdown.parseMarkdown\",t)}var g=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},c=new g;var v=f(p(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function P(t,e){if(e(t))return[t];let n=[];if(t.children)for(let o of t.children)n=[...n,...P(o,e)];return n}function u(t,e){return P(t,n=>n.type===e)[0]}function y(t,e){P(t,e)}var x=f(p(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function de(t,e){let n=await c.readPage(t),o=await s.parseMarkdown(n),i;return y(o,d=>{if(d.type!==\"FencedCode\")return!1;let h=u(d,\"CodeInfo\");if(e&&!h||e&&!e.includes(h.children[0].text))return!1;let w=u(d,\"CodeText\");return w?(i=w.children[0].text,!0):!1}),i}async function S(t,e=[\"yaml\"]){let n=await de(t,e);if(n!==void 0)try{return x.parse(n)}catch(o){throw console.error(\"YAML Page parser error\",o),new Error(`YAML Error: ${o.message}`)}}var pe=f(p(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var me=\"SETTINGS\";async function M(t){try{let e=await S(me,[\"yaml\"])||{},n={};for(let[o,i]of Object.entries(t))o in e?n[o]=e[o]:n[o]=i;return n}catch(e){if(e.message===\"Page not found\")return t;throw e}}async function N(){let{quickNotePrefix:t}=await M({quickNotePrefix:\"\\u{1F4E5} \"}),e=new Date().toISOString(),[n,o]=e.split(\"T\");o=o.split(\".\")[0];let i=`${t}${n} ${o}`;await a.navigate(i)}var fe=N;return F(ge);})();\n return mod;})()"
    },
    "dailyNoteCommand": {
      "command": {
        "name": "Open Daily Note",
        "key": "Alt-Shift-d"
      },
      "code": "(() => { var mod=(()=>{var A=Object.create;var u=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var m=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var f=(t,e)=>{for(var n in e)u(t,n,{get:e[n],enumerable:!0})},v=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of C(e))!F.call(t,i)&&i!==n&&u(t,i,{get:()=>e[i],enumerable:!(o=k(e,i))||o.enumerable});return t};var g=(t,e,n)=>(n=t!=null?A(D(t)):{},v(e||!t||!t.__esModule?u(n,\"default\",{value:t,enumerable:!0}):n,t)),$=t=>v(u({},\"__esModule\",{value:!0}),t);var ye={};f(ye,{default:()=>Pe});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var c={};f(c,{confirm:()=>te,dispatch:()=>K,downloadFile:()=>G,filterBox:()=>Q,flashNotification:()=>V,getCurrentPage:()=>Y,getCursor:()=>I,getSelection:()=>R,getText:()=>E,getUiOption:()=>re,hidePanel:()=>_,insertAtCursor:()=>Z,insertAtPos:()=>z,moveCursor:()=>X,navigate:()=>q,openUrl:()=>j,prompt:()=>ee,reloadPage:()=>B,replaceRange:()=>J,save:()=>W,setPage:()=>O,setSelection:()=>U,setUiOption:()=>ne,showPanel:()=>H,vimEx:()=>oe});function Y(){return r(\"editor.getCurrentPage\")}function O(t){return r(\"editor.setPage\",t)}function E(){return r(\"editor.getText\")}function I(){return r(\"editor.getCursor\")}function R(){return r(\"editor.getSelection\")}function U(t,e){return r(\"editor.setSelection\",t,e)}function W(){return r(\"editor.save\")}function q(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function B(){return r(\"editor.reloadPage\")}function j(t){return r(\"editor.openUrl\",t)}function G(t,e){return r(\"editor.downloadFile\",t,e)}function V(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function Q(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function H(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function _(t){return r(\"editor.hidePanel\",t)}function z(t,e){return r(\"editor.insertAtPos\",t,e)}function J(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function X(t,e=!1){return r(\"editor.moveCursor\",t,e)}function Z(t){return r(\"editor.insertAtCursor\",t)}function K(t){return r(\"editor.dispatch\",t)}function ee(t,e=\"\"){return r(\"editor.prompt\",t,e)}function te(t){return r(\"editor.confirm\",t)}function re(t){return r(\"editor.getUiOption\",t)}function ne(t,e){return r(\"editor.setUiOption\",t,e)}function oe(t){return r(\"editor.vimEx\",t)}var l={};f(l,{parseMarkdown:()=>ae});function ae(t){return r(\"markdown.parseMarkdown\",t)}var P=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},a=new P;var S=g(m(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function y(t,e){if(e(t))return[t];let n=[];if(t.children)for(let o of t.children)n=[...n,...y(o,e)];return n}function d(t,e){return y(t,n=>n.type===e)[0]}function x(t,e){y(t,e)}function s(t){function e(n){let o=String(n);return o.length===1&&(o=\"0\"+o),o}return t.getFullYear()+\"-\"+e(t.getMonth()+1)+\"-\"+e(t.getDate())}var h=g(m(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function pe(t,e){let n=await a.readPage(t),o=await l.parseMarkdown(n),i;return x(o,p=>{if(p.type!==\"FencedCode\")return!1;let w=d(p,\"CodeInfo\");if(e&&!w||e&&!e.includes(w.children[0].text))return!1;let T=d(p,\"CodeText\");return T?(i=T.children[0].text,!0):!1}),i}async function M(t,e=[\"yaml\"]){let n=await pe(t,e);if(n!==void 0)try{return h.parse(n)}catch(o){throw console.error(\"YAML Page parser error\",o),new Error(`YAML Error: ${o.message}`)}}var me=g(m(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var fe=\"SETTINGS\";async function N(t){try{let e=await M(fe,[\"yaml\"])||{},n={};for(let[o,i]of Object.entries(t))o in e?n[o]=e[o]:n[o]=i;return n}catch(e){if(e.message===\"Page not found\")return t;throw e}}function ge(t,e){return t.replaceAll(/\\{\\{([^\\}]+)\\}\\}/g,(n,o)=>{switch(o){case\"today\":return s(new Date);case\"tomorrow\":{let i=new Date;return i.setDate(i.getDate()+1),s(i)}case\"yesterday\":{let i=new Date;return i.setDate(i.getDate()-1),s(i)}case\"lastWeek\":{let i=new Date;return i.setDate(i.getDate()-7),s(i)}case\"nextWeek\":{let i=new Date;return i.setDate(i.getDate()+7),s(i)}case\"page\":return e}return n})}async function b(){let{dailyNoteTemplate:t,dailyNotePrefix:e}=await N({dailyNoteTemplate:\"template/page/Daily Note\",dailyNotePrefix:\"\\u{1F4C5} \"}),n=\"\";try{n=await a.readPage(t)}catch{console.warn(`No daily note template found at ${t}`)}let o=s(new Date),i=`${e}${o}`;if(n){try{await a.getPageMeta(i)}catch{await a.writePage(i,ge(n,i))}await c.navigate(i)}else await c.navigate(i)}var Pe=b;return $(ye);})();\n return mod;})()"
    },
    "weeklyNoteCommand": {
      "command": {
        "name": "Open Weekly Note",
        "key": "Alt-Shift-w"
      },
      "code": "(() => { var mod=(()=>{var A=Object.create;var d=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var m=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,r)=>(typeof require!=\"undefined\"?require:e)[r]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var f=(t,e)=>{for(var r in e)d(t,r,{get:e[r],enumerable:!0})},v=(t,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of C(e))!F.call(t,i)&&i!==r&&d(t,i,{get:()=>e[i],enumerable:!(o=k(e,i))||o.enumerable});return t};var g=(t,e,r)=>(r=t!=null?A(D(t)):{},v(e||!t||!t.__esModule?d(r,\"default\",{value:t,enumerable:!0}):r,t)),$=t=>v(d({},\"__esModule\",{value:!0}),t);var xe={};f(xe,{default:()=>ye});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;var l={};f(l,{confirm:()=>te,dispatch:()=>K,downloadFile:()=>G,filterBox:()=>Q,flashNotification:()=>V,getCurrentPage:()=>Y,getCursor:()=>I,getSelection:()=>R,getText:()=>E,getUiOption:()=>re,hidePanel:()=>_,insertAtCursor:()=>Z,insertAtPos:()=>z,moveCursor:()=>X,navigate:()=>q,openUrl:()=>j,prompt:()=>ee,reloadPage:()=>B,replaceRange:()=>J,save:()=>W,setPage:()=>O,setSelection:()=>U,setUiOption:()=>ne,showPanel:()=>H,vimEx:()=>oe});function Y(){return n(\"editor.getCurrentPage\")}function O(t){return n(\"editor.setPage\",t)}function E(){return n(\"editor.getText\")}function I(){return n(\"editor.getCursor\")}function R(){return n(\"editor.getSelection\")}function U(t,e){return n(\"editor.setSelection\",t,e)}function W(){return n(\"editor.save\")}function q(t,e,r=!1,o=!1){return n(\"editor.navigate\",t,e,r,o)}function B(){return n(\"editor.reloadPage\")}function j(t){return n(\"editor.openUrl\",t)}function G(t,e){return n(\"editor.downloadFile\",t,e)}function V(t,e=\"info\"){return n(\"editor.flashNotification\",t,e)}function Q(t,e,r=\"\",o=\"\"){return n(\"editor.filterBox\",t,e,r,o)}function H(t,e,r,o=\"\"){return n(\"editor.showPanel\",t,e,r,o)}function _(t){return n(\"editor.hidePanel\",t)}function z(t,e){return n(\"editor.insertAtPos\",t,e)}function J(t,e,r){return n(\"editor.replaceRange\",t,e,r)}function X(t,e=!1){return n(\"editor.moveCursor\",t,e)}function Z(t){return n(\"editor.insertAtCursor\",t)}function K(t){return n(\"editor.dispatch\",t)}function ee(t,e=\"\"){return n(\"editor.prompt\",t,e)}function te(t){return n(\"editor.confirm\",t)}function re(t){return n(\"editor.getUiOption\",t)}function ne(t,e){return n(\"editor.setUiOption\",t,e)}function oe(t){return n(\"editor.vimEx\",t)}var u={};f(u,{parseMarkdown:()=>ae});function ae(t){return n(\"markdown.parseMarkdown\",t)}var P=class{listPages(e=!1){return n(\"space.listPages\",e)}getPageMeta(e){return n(\"space.getPageMeta\",e)}readPage(e){return n(\"space.readPage\",e)}writePage(e,r){return n(\"space.writePage\",e,r)}deletePage(e){return n(\"space.deletePage\",e)}listPlugs(){return n(\"space.listPlugs\")}listAttachments(){return n(\"space.listAttachments\")}getAttachmentMeta(e){return n(\"space.getAttachmentMeta\",e)}readAttachment(e){return n(\"space.readAttachment\",e)}writeAttachment(e,r,o){return n(\"space.writeAttachment\",e,r,o)}deleteAttachment(e){return n(\"space.deleteAttachment\",e)}readFile(e,r){return n(\"space.readFile\",e,r)}getFileMeta(e){return n(\"space.getFileMeta\",e)}writeFile(e,r,o){return n(\"space.writeFile\",e,r,o)}deleteFile(e){return n(\"space.deleteFile\",e)}listFiles(e){return n(\"space.listFiles\",e)}},s=new P;var S=g(m(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function y(t,e){if(e(t))return[t];let r=[];if(t.children)for(let o of t.children)r=[...r,...y(o,e)];return r}function p(t,e){return y(t,r=>r.type===e)[0]}function x(t,e){y(t,e)}function c(t){function e(r){let o=String(r);return o.length===1&&(o=\"0\"+o),o}return t.getFullYear()+\"-\"+e(t.getMonth()+1)+\"-\"+e(t.getDate())}var h=g(m(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function pe(t,e){let r=await s.readPage(t),o=await u.parseMarkdown(r),i;return x(o,a=>{if(a.type!==\"FencedCode\")return!1;let w=p(a,\"CodeInfo\");if(e&&!w||e&&!e.includes(w.children[0].text))return!1;let T=p(a,\"CodeText\");return T?(i=T.children[0].text,!0):!1}),i}async function M(t,e=[\"yaml\"]){let r=await pe(t,e);if(r!==void 0)try{return h.parse(r)}catch(o){throw console.error(\"YAML Page parser error\",o),new Error(`YAML Error: ${o.message}`)}}var me=g(m(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var fe=\"SETTINGS\";async function N(t){try{let e=await M(fe,[\"yaml\"])||{},r={};for(let[o,i]of Object.entries(t))o in e?r[o]=e[o]:r[o]=i;return r}catch(e){if(e.message===\"Page not found\")return t;throw e}}function ge(t,e){return t.replaceAll(/\\{\\{([^\\}]+)\\}\\}/g,(r,o)=>{switch(o){case\"today\":return c(new Date);case\"tomorrow\":{let i=new Date;return i.setDate(i.getDate()+1),c(i)}case\"yesterday\":{let i=new Date;return i.setDate(i.getDate()-1),c(i)}case\"lastWeek\":{let i=new Date;return i.setDate(i.getDate()-7),c(i)}case\"nextWeek\":{let i=new Date;return i.setDate(i.getDate()+7),c(i)}case\"page\":return e}return r})}function Pe(t=!1){let e=new Date,r=e.getDay(),o=e.getDate()-r;return t&&(o+=r==0?-6:1),new Date(e.setDate(o))}async function b(){let{weeklyNoteTemplate:t,weeklyNotePrefix:e,weeklyNoteMonday:r}=await N({weeklyNoteTemplate:\"template/page/Weekly Note\",weeklyNotePrefix:\"\\u{1F5D3}\\uFE0F \",weeklyNoteMonday:!1}),o=\"\";try{o=await s.readPage(t)}catch{console.warn(`No weekly note template found at ${t}`)}let i=c(Pe(r)),a=`${e}${i}`;if(o){try{await s.getPageMeta(a)}catch{await s.writePage(a,ge(o,a))}await l.navigate(a)}else await l.navigate(a)}var ye=b;return $(xe);})();\n return mod;})()"
    },
    "instantiateTemplateCommand": {
      "command": {
        "name": "Template: Instantiate Page"
      },
      "code": "(() => { var mod=(()=>{var U=Object.create;var T=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var B=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var v=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,r)=>(typeof require!=\"undefined\"?require:e)[r]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var S=(t,e)=>{for(var r in e)T(t,r,{get:e[r],enumerable:!0})},L=(t,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of q(e))!j.call(t,i)&&i!==r&&T(t,i,{get:()=>e[i],enumerable:!(o=W(e,i))||o.enumerable});return t};var M=(t,e,r)=>(r=t!=null?U(B(t)):{},L(e||!t||!t.__esModule?T(r,\"default\",{value:t,enumerable:!0}):r,t)),G=t=>L(T({},\"__esModule\",{value:!0}),t);var Ae={};S(Ae,{default:()=>be});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;var d={};S(d,{confirm:()=>me,dispatch:()=>de,downloadFile:()=>re,filterBox:()=>oe,flashNotification:()=>ne,getCurrentPage:()=>Q,getCursor:()=>z,getSelection:()=>J,getText:()=>_,getUiOption:()=>fe,hidePanel:()=>ae,insertAtCursor:()=>ue,insertAtPos:()=>se,moveCursor:()=>le,navigate:()=>K,openUrl:()=>te,prompt:()=>pe,reloadPage:()=>ee,replaceRange:()=>ce,save:()=>Z,setPage:()=>H,setSelection:()=>X,setUiOption:()=>ge,showPanel:()=>ie,vimEx:()=>Pe});function Q(){return n(\"editor.getCurrentPage\")}function H(t){return n(\"editor.setPage\",t)}function _(){return n(\"editor.getText\")}function z(){return n(\"editor.getCursor\")}function J(){return n(\"editor.getSelection\")}function X(t,e){return n(\"editor.setSelection\",t,e)}function Z(){return n(\"editor.save\")}function K(t,e,r=!1,o=!1){return n(\"editor.navigate\",t,e,r,o)}function ee(){return n(\"editor.reloadPage\")}function te(t){return n(\"editor.openUrl\",t)}function re(t,e){return n(\"editor.downloadFile\",t,e)}function ne(t,e=\"info\"){return n(\"editor.flashNotification\",t,e)}function oe(t,e,r=\"\",o=\"\"){return n(\"editor.filterBox\",t,e,r,o)}function ie(t,e,r,o=\"\"){return n(\"editor.showPanel\",t,e,r,o)}function ae(t){return n(\"editor.hidePanel\",t)}function se(t,e){return n(\"editor.insertAtPos\",t,e)}function ce(t,e,r){return n(\"editor.replaceRange\",t,e,r)}function le(t,e=!1){return n(\"editor.moveCursor\",t,e)}function ue(t){return n(\"editor.insertAtCursor\",t)}function de(t){return n(\"editor.dispatch\",t)}function pe(t,e=\"\"){return n(\"editor.prompt\",t,e)}function me(t){return n(\"editor.confirm\",t)}function fe(t){return n(\"editor.getUiOption\",t)}function ge(t,e){return n(\"editor.setUiOption\",t,e)}function Pe(t){return n(\"editor.vimEx\",t)}var m={};S(m,{parseMarkdown:()=>xe});function xe(t){return n(\"markdown.parseMarkdown\",t)}var N=class{listPages(e=!1){return n(\"space.listPages\",e)}getPageMeta(e){return n(\"space.getPageMeta\",e)}readPage(e){return n(\"space.readPage\",e)}writePage(e,r){return n(\"space.writePage\",e,r)}deletePage(e){return n(\"space.deletePage\",e)}listPlugs(){return n(\"space.listPlugs\")}listAttachments(){return n(\"space.listAttachments\")}getAttachmentMeta(e){return n(\"space.getAttachmentMeta\",e)}readAttachment(e){return n(\"space.readAttachment\",e)}writeAttachment(e,r,o){return n(\"space.writeAttachment\",e,r,o)}deleteAttachment(e){return n(\"space.deleteAttachment\",e)}readFile(e,r){return n(\"space.readFile\",e,r)}getFileMeta(e){return n(\"space.getFileMeta\",e)}writeFile(e,r,o){return n(\"space.writeFile\",e,r,o)}deleteFile(e){return n(\"space.deleteFile\",e)}listFiles(e){return n(\"space.listFiles\",e)}},l=new N;var g=M(v(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function b(t){if(!!t.children)for(let e of t.children){if(e.parent)return;e.parent=t,b(e)}}function A(t,e){if(e(t))return[t];let r=[];if(t.children)for(let o of t.children)r=[...r,...A(o,e)];return r}function k(t,e){if(t.children){let r=t.children.slice();for(let o of r){let i=e(o);if(i!==void 0){let a=t.children.indexOf(o);i?t.children.splice(a,1,i):t.children.splice(a,1)}else k(o,e)}}}function f(t,e){return A(t,r=>r.type===e)[0]}function C(t,e){A(t,e)}function y(t){let e=[];if(t.text!==void 0)return t.text;for(let r of t.children)e.push(y(r));return e.join(\"\")}function Y(t,e=[]){let r={};return b(t),k(t,o=>{if(o.type===\"Hashtag\"){if(o.parent&&o.parent.type===\"Paragraph\"){let u=o.children[0].text.substring(1);r.tags||(r.tags=[]),Array.isArray(r.tags)&&!r.tags.includes(u)&&r.tags.push(u)}return}if(o.type===\"FrontMatter\"){let u=o.children[1].children[0],x=y(u);try{let h=g.parse(x),w={...h};if(r={...r,...h},e.length>0){let F=!1;for(let $ of e)$ in w&&(delete w[$],F=!0);F&&(u.text=g.stringify(w))}if(Object.keys(w).length===0)return null}catch(h){console.error(\"Could not parse frontmatter\",h)}}if(o.type!==\"FencedCode\")return;let i=f(o,\"CodeInfo\");if(!i||i.children[0].text!==\"meta\")return;let a=f(o,\"CodeText\");if(!a)return;let s=a.children[0].text,p=g.parse(s),c={...p};if(r={...r,...p},e.length>0){let u=!1;for(let x of e)x in c&&(delete c[x],u=!0);u&&(a.children[0].text=g.stringify(c).trim())}if(Object.keys(c).length===0)return null}),r.name&&(r.displayName=r.name,delete r.name),r}function P(t){function e(r){let o=String(r);return o.length===1&&(o=\"0\"+o),o}return t.getFullYear()+\"-\"+e(t.getMonth()+1)+\"-\"+e(t.getDate())}var D=M(v(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function Se(t,e){let r=await l.readPage(t),o=await m.parseMarkdown(r),i;return C(o,a=>{if(a.type!==\"FencedCode\")return!1;let s=f(a,\"CodeInfo\");if(e&&!s||e&&!e.includes(s.children[0].text))return!1;let p=f(a,\"CodeText\");return p?(i=p.children[0].text,!0):!1}),i}async function O(t,e=[\"yaml\"]){let r=await Se(t,e);if(r!==void 0)try{return D.parse(r)}catch(o){throw console.error(\"YAML Page parser error\",o),new Error(`YAML Error: ${o.message}`)}}var Me=M(v(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var Ne=\"SETTINGS\";async function E(t){try{let e=await O(Ne,[\"yaml\"])||{},r={};for(let[o,i]of Object.entries(t))o in e?r[o]=e[o]:r[o]=i;return r}catch(e){if(e.message===\"Page not found\")return t;throw e}}async function R(){let t=await l.listPages(),{pageTemplatePrefix:e}=await E({pageTemplatePrefix:\"template/page/\"}),r=await d.filterBox(\"Template\",t.filter(c=>c.name.startsWith(e)).map(c=>({...c,name:c.name.slice(e.length)})),`Select the template to create a new page from (listing any page starting with <tt>${e}</tt>)`);if(!r)return;console.log(\"Selected template\",r);let o=await l.readPage(`${e}${r.name}`),i=await m.parseMarkdown(o),a=Y(i,[\"$name\",\"$disableDirectives\"]);a.$name&&(a.$name=I(a.$name,\"\"));let s=await d.prompt(\"Name of new page\",a.$name);if(!s)return;try{if(await l.getPageMeta(s),!await d.confirm(`Page ${s} already exists, are you sure you want to override it?`))return}catch{}let p=I(y(i),s);await l.writePage(s,p),await d.navigate(s)}function I(t,e){return t.replaceAll(/\\{\\{([^\\}]+)\\}\\}/g,(r,o)=>{switch(o){case\"today\":return P(new Date);case\"tomorrow\":{let i=new Date;return i.setDate(i.getDate()+1),P(i)}case\"yesterday\":{let i=new Date;return i.setDate(i.getDate()-1),P(i)}case\"lastWeek\":{let i=new Date;return i.setDate(i.getDate()-7),P(i)}case\"nextWeek\":{let i=new Date;return i.setDate(i.getDate()+7),P(i)}case\"page\":return e}return r})}var be=R;return G(Ae);})();\n return mod;})()"
    },
    "insertSnippet": {
      "command": {
        "name": "Template: Insert Snippet"
      },
      "slashCommand": {
        "name": "snippet",
        "description": "Insert a snippet"
      },
      "code": "(() => { var mod=(()=>{var D=Object.create;var m=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var L=Object.getPrototypeOf,Y=Object.prototype.hasOwnProperty;var P=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var y=(t,e)=>{for(var n in e)m(t,n,{get:e[n],enumerable:!0})},M=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of $(e))!Y.call(t,i)&&i!==n&&m(t,i,{get:()=>e[i],enumerable:!(o=F(e,i))||o.enumerable});return t};var x=(t,e,n)=>(n=t!=null?D(L(t)):{},M(e||!t||!t.__esModule?m(n,\"default\",{value:t,enumerable:!0}):n,t)),O=t=>M(m({},\"__esModule\",{value:!0}),t);var he={};y(he,{default:()=>xe});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};y(s,{confirm:()=>oe,dispatch:()=>re,downloadFile:()=>H,filterBox:()=>z,flashNotification:()=>_,getCurrentPage:()=>I,getCursor:()=>W,getSelection:()=>q,getText:()=>U,getUiOption:()=>ie,hidePanel:()=>X,insertAtCursor:()=>te,insertAtPos:()=>Z,moveCursor:()=>ee,navigate:()=>G,openUrl:()=>Q,prompt:()=>ne,reloadPage:()=>V,replaceRange:()=>K,save:()=>j,setPage:()=>R,setSelection:()=>B,setUiOption:()=>ae,showPanel:()=>J,vimEx:()=>se});function I(){return r(\"editor.getCurrentPage\")}function R(t){return r(\"editor.setPage\",t)}function U(){return r(\"editor.getText\")}function W(){return r(\"editor.getCursor\")}function q(){return r(\"editor.getSelection\")}function B(t,e){return r(\"editor.setSelection\",t,e)}function j(){return r(\"editor.save\")}function G(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function V(){return r(\"editor.reloadPage\")}function Q(t){return r(\"editor.openUrl\",t)}function H(t,e){return r(\"editor.downloadFile\",t,e)}function _(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function z(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function J(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function X(t){return r(\"editor.hidePanel\",t)}function Z(t,e){return r(\"editor.insertAtPos\",t,e)}function K(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function ee(t,e=!1){return r(\"editor.moveCursor\",t,e)}function te(t){return r(\"editor.insertAtCursor\",t)}function re(t){return r(\"editor.dispatch\",t)}function ne(t,e=\"\"){return r(\"editor.prompt\",t,e)}function oe(t){return r(\"editor.confirm\",t)}function ie(t){return r(\"editor.getUiOption\",t)}function ae(t,e){return r(\"editor.setUiOption\",t,e)}function se(t){return r(\"editor.vimEx\",t)}var d={};y(d,{parseMarkdown:()=>le});function le(t){return r(\"markdown.parseMarkdown\",t)}var h=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},c=new h;var N=x(P(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function w(t,e){if(e(t))return[t];let n=[];if(t.children)for(let o of t.children)n=[...n,...w(o,e)];return n}function g(t,e){return w(t,n=>n.type===e)[0]}function T(t,e){w(t,e)}function u(t){function e(n){let o=String(n);return o.length===1&&(o=\"0\"+o),o}return t.getFullYear()+\"-\"+e(t.getMonth()+1)+\"-\"+e(t.getDate())}var v=x(P(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function ge(t,e){let n=await c.readPage(t),o=await d.parseMarkdown(n),i;return T(o,l=>{if(l.type!==\"FencedCode\")return!1;let p=g(l,\"CodeInfo\");if(e&&!p||e&&!e.includes(p.children[0].text))return!1;let a=g(l,\"CodeText\");return a?(i=a.children[0].text,!0):!1}),i}async function b(t,e=[\"yaml\"]){let n=await ge(t,e);if(n!==void 0)try{return v.parse(n)}catch(o){throw console.error(\"YAML Page parser error\",o),new Error(`YAML Error: ${o.message}`)}}var Pe=x(P(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var ye=\"SETTINGS\";async function A(t){try{let e=await b(ye,[\"yaml\"])||{},n={};for(let[o,i]of Object.entries(t))o in e?n[o]=e[o]:n[o]=i;return n}catch(e){if(e.message===\"Page not found\")return t;throw e}}async function C(){let t=await c.listPages(),{snippetPrefix:e}=await A({snippetPrefix:\"snippet/\"}),n=await s.getCursor(),o=await s.getCurrentPage(),i=t.filter(f=>f.name.startsWith(e)).map(f=>({...f,name:f.name.slice(e.length)})),l=await s.filterBox(\"Snippet\",i,`Select the snippet to insert (listing any page starting with <tt>${e}</tt>)`);if(!l)return;let p=await c.readPage(`${e}${l.name}`),a=k(p,o),S=a.indexOf(\"|^|\");a=a.replace(\"|^|\",\"\"),a=k(a,o),await s.insertAtCursor(a),S!==-1&&await s.moveCursor(n+S)}function k(t,e){return t.replaceAll(/\\{\\{([^\\}]+)\\}\\}/g,(n,o)=>{switch(o){case\"today\":return u(new Date);case\"tomorrow\":{let i=new Date;return i.setDate(i.getDate()+1),u(i)}case\"yesterday\":{let i=new Date;return i.setDate(i.getDate()-1),u(i)}case\"lastWeek\":{let i=new Date;return i.setDate(i.getDate()-7),u(i)}case\"nextWeek\":{let i=new Date;return i.setDate(i.getDate()+7),u(i)}case\"page\":return e}return n})}var xe=C;return O(he);})();\n return mod;})()"
    },
    "insertTodayCommand": {
      "slashCommand": {
        "name": "today",
        "description": "Insert today's date",
        "value": "{{today}}"
      },
      "code": "(() => { var mod=(()=>{var h=Object.create;var c=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var u=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var m=(t,e)=>{for(var n in e)c(t,n,{get:e[n],enumerable:!0})},g=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of T(e))!S.call(t,i)&&i!==n&&c(t,i,{get:()=>e[i],enumerable:!(o=w(e,i))||o.enumerable});return t};var d=(t,e,n)=>(n=t!=null?h(v(t)):{},g(e||!t||!t.__esModule?c(n,\"default\",{value:t,enumerable:!0}):n,t)),M=t=>g(c({},\"__esModule\",{value:!0}),t);var ce={};m(ce,{default:()=>se});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var a={};m(a,{confirm:()=>H,dispatch:()=>V,downloadFile:()=>E,filterBox:()=>R,flashNotification:()=>I,getCurrentPage:()=>b,getCursor:()=>C,getSelection:()=>D,getText:()=>k,getUiOption:()=>_,hidePanel:()=>W,insertAtCursor:()=>G,insertAtPos:()=>q,moveCursor:()=>j,navigate:()=>L,openUrl:()=>O,prompt:()=>Q,reloadPage:()=>Y,replaceRange:()=>B,save:()=>$,setPage:()=>A,setSelection:()=>F,setUiOption:()=>z,showPanel:()=>U,vimEx:()=>J});function b(){return r(\"editor.getCurrentPage\")}function A(t){return r(\"editor.setPage\",t)}function k(){return r(\"editor.getText\")}function C(){return r(\"editor.getCursor\")}function D(){return r(\"editor.getSelection\")}function F(t,e){return r(\"editor.setSelection\",t,e)}function $(){return r(\"editor.save\")}function L(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function Y(){return r(\"editor.reloadPage\")}function O(t){return r(\"editor.openUrl\",t)}function E(t,e){return r(\"editor.downloadFile\",t,e)}function I(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function R(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function U(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function W(t){return r(\"editor.hidePanel\",t)}function q(t,e){return r(\"editor.insertAtPos\",t,e)}function B(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function j(t,e=!1){return r(\"editor.moveCursor\",t,e)}function G(t){return r(\"editor.insertAtCursor\",t)}function V(t){return r(\"editor.dispatch\",t)}function Q(t,e=\"\"){return r(\"editor.prompt\",t,e)}function H(t){return r(\"editor.confirm\",t)}function _(t){return r(\"editor.getUiOption\",t)}function z(t,e){return r(\"editor.setUiOption\",t,e)}function J(t){return r(\"editor.vimEx\",t)}var f=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},l=new f;var P=d(u(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function s(t){function e(n){let o=String(n);return o.length===1&&(o=\"0\"+o),o}return t.getFullYear()+\"-\"+e(t.getMonth()+1)+\"-\"+e(t.getDate())}var y=d(u(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var ie=d(u(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function ae(t,e){return t.replaceAll(/\\{\\{([^\\}]+)\\}\\}/g,(n,o)=>{switch(o){case\"today\":return s(new Date);case\"tomorrow\":{let i=new Date;return i.setDate(i.getDate()+1),s(i)}case\"yesterday\":{let i=new Date;return i.setDate(i.getDate()-1),s(i)}case\"lastWeek\":{let i=new Date;return i.setDate(i.getDate()-7),s(i)}case\"nextWeek\":{let i=new Date;return i.setDate(i.getDate()+7),s(i)}case\"page\":return e}return n})}async function x(t){let e=await a.getCursor(),n=await a.getCurrentPage(),o=t.value,i=o.indexOf(\"|^|\");o=o.replace(\"|^|\",\"\"),o=ae(o,n),await a.insertAtCursor(o),i!==-1&&await a.moveCursor(e+i)}var se=x;return M(ce);})();\n return mod;})()"
    },
    "insertTomorrowCommand": {
      "slashCommand": {
        "name": "tomorrow",
        "description": "Insert tomorrow's date",
        "value": "{{tomorrow}}"
      },
      "code": "(() => { var mod=(()=>{var h=Object.create;var c=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var u=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var m=(t,e)=>{for(var n in e)c(t,n,{get:e[n],enumerable:!0})},g=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of T(e))!S.call(t,i)&&i!==n&&c(t,i,{get:()=>e[i],enumerable:!(o=w(e,i))||o.enumerable});return t};var d=(t,e,n)=>(n=t!=null?h(v(t)):{},g(e||!t||!t.__esModule?c(n,\"default\",{value:t,enumerable:!0}):n,t)),M=t=>g(c({},\"__esModule\",{value:!0}),t);var ce={};m(ce,{default:()=>se});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var a={};m(a,{confirm:()=>H,dispatch:()=>V,downloadFile:()=>E,filterBox:()=>R,flashNotification:()=>I,getCurrentPage:()=>b,getCursor:()=>C,getSelection:()=>D,getText:()=>k,getUiOption:()=>_,hidePanel:()=>W,insertAtCursor:()=>G,insertAtPos:()=>q,moveCursor:()=>j,navigate:()=>L,openUrl:()=>O,prompt:()=>Q,reloadPage:()=>Y,replaceRange:()=>B,save:()=>$,setPage:()=>A,setSelection:()=>F,setUiOption:()=>z,showPanel:()=>U,vimEx:()=>J});function b(){return r(\"editor.getCurrentPage\")}function A(t){return r(\"editor.setPage\",t)}function k(){return r(\"editor.getText\")}function C(){return r(\"editor.getCursor\")}function D(){return r(\"editor.getSelection\")}function F(t,e){return r(\"editor.setSelection\",t,e)}function $(){return r(\"editor.save\")}function L(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function Y(){return r(\"editor.reloadPage\")}function O(t){return r(\"editor.openUrl\",t)}function E(t,e){return r(\"editor.downloadFile\",t,e)}function I(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function R(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function U(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function W(t){return r(\"editor.hidePanel\",t)}function q(t,e){return r(\"editor.insertAtPos\",t,e)}function B(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function j(t,e=!1){return r(\"editor.moveCursor\",t,e)}function G(t){return r(\"editor.insertAtCursor\",t)}function V(t){return r(\"editor.dispatch\",t)}function Q(t,e=\"\"){return r(\"editor.prompt\",t,e)}function H(t){return r(\"editor.confirm\",t)}function _(t){return r(\"editor.getUiOption\",t)}function z(t,e){return r(\"editor.setUiOption\",t,e)}function J(t){return r(\"editor.vimEx\",t)}var f=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},l=new f;var P=d(u(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function s(t){function e(n){let o=String(n);return o.length===1&&(o=\"0\"+o),o}return t.getFullYear()+\"-\"+e(t.getMonth()+1)+\"-\"+e(t.getDate())}var y=d(u(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var ie=d(u(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function ae(t,e){return t.replaceAll(/\\{\\{([^\\}]+)\\}\\}/g,(n,o)=>{switch(o){case\"today\":return s(new Date);case\"tomorrow\":{let i=new Date;return i.setDate(i.getDate()+1),s(i)}case\"yesterday\":{let i=new Date;return i.setDate(i.getDate()-1),s(i)}case\"lastWeek\":{let i=new Date;return i.setDate(i.getDate()-7),s(i)}case\"nextWeek\":{let i=new Date;return i.setDate(i.getDate()+7),s(i)}case\"page\":return e}return n})}async function x(t){let e=await a.getCursor(),n=await a.getCurrentPage(),o=t.value,i=o.indexOf(\"|^|\");o=o.replace(\"|^|\",\"\"),o=ae(o,n),await a.insertAtCursor(o),i!==-1&&await a.moveCursor(e+i)}var se=x;return M(ce);})();\n return mod;})()"
    },
    "quoteSelectionCommand": {
      "command": {
        "name": "Text: Quote Selection",
        "key": "Ctrl-Shift-.",
        "mac": "Cmd-Shift-."
      },
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var c=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},f=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of g(e))!p.call(t,s)&&s!==n&&a(t,s,{get:()=>e[s],enumerable:!(o=m(e,s))||o.enumerable});return t};var d=t=>f(a({},\"__esModule\",{value:!0}),t);var X={};c(X,{default:()=>W});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var i={};c(i,{confirm:()=>N,dispatch:()=>q,downloadFile:()=>C,filterBox:()=>E,flashNotification:()=>R,getCurrentPage:()=>P,getCursor:()=>v,getSelection:()=>w,getText:()=>h,getUiOption:()=>B,hidePanel:()=>I,insertAtCursor:()=>k,insertAtPos:()=>O,moveCursor:()=>$,navigate:()=>F,openUrl:()=>M,prompt:()=>L,reloadPage:()=>A,replaceRange:()=>U,save:()=>b,setPage:()=>y,setSelection:()=>S,setUiOption:()=>D,showPanel:()=>T,vimEx:()=>K});function P(){return r(\"editor.getCurrentPage\")}function y(t){return r(\"editor.setPage\",t)}function h(){return r(\"editor.getText\")}function v(){return r(\"editor.getCursor\")}function w(){return r(\"editor.getSelection\")}function S(t,e){return r(\"editor.setSelection\",t,e)}function b(){return r(\"editor.save\")}function F(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function A(){return r(\"editor.reloadPage\")}function M(t){return r(\"editor.openUrl\",t)}function C(t,e){return r(\"editor.downloadFile\",t,e)}function R(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function E(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function T(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function I(t){return r(\"editor.hidePanel\",t)}function O(t,e){return r(\"editor.insertAtPos\",t,e)}function U(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function $(t,e=!1){return r(\"editor.moveCursor\",t,e)}function k(t){return r(\"editor.insertAtCursor\",t)}function q(t){return r(\"editor.dispatch\",t)}function L(t,e=\"\"){return r(\"editor.prompt\",t,e)}function N(t){return r(\"editor.confirm\",t)}function B(t){return r(\"editor.getUiOption\",t)}function D(t,e){return r(\"editor.setUiOption\",t,e)}function K(t){return r(\"editor.vimEx\",t)}var l=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},z=new l;async function u(){let t=await i.getText(),e=await i.getSelection(),n=e.from;for(;n>=0&&t[n]!==`\n`;)n--;n++,t[n]===\">\"&&t[n+1]===\" \"?(t=t.slice(n+2,e.to),t=t.replaceAll(`\n> `,`\n`)):(t=t.slice(n,e.to),t=`> ${t.replaceAll(`\n`,`\n> `)}`),await i.replaceRange(n,e.to,t)}var W=u;return d(X);})();\n return mod;})()"
    },
    "listifySelection": {
      "command": {
        "name": "Text: Listify Selection",
        "key": "Ctrl-Shift-8",
        "mac": "Cmd-Shift-8"
      },
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var c=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},f=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of g(e))!p.call(t,s)&&s!==n&&a(t,s,{get:()=>e[s],enumerable:!(o=m(e,s))||o.enumerable});return t};var d=t=>f(a({},\"__esModule\",{value:!0}),t);var X={};c(X,{default:()=>W});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var i={};c(i,{confirm:()=>N,dispatch:()=>L,downloadFile:()=>C,filterBox:()=>E,flashNotification:()=>R,getCurrentPage:()=>P,getCursor:()=>v,getSelection:()=>w,getText:()=>h,getUiOption:()=>B,hidePanel:()=>I,insertAtCursor:()=>k,insertAtPos:()=>O,moveCursor:()=>$,navigate:()=>F,openUrl:()=>M,prompt:()=>q,reloadPage:()=>A,replaceRange:()=>U,save:()=>b,setPage:()=>y,setSelection:()=>S,setUiOption:()=>D,showPanel:()=>T,vimEx:()=>K});function P(){return r(\"editor.getCurrentPage\")}function y(t){return r(\"editor.setPage\",t)}function h(){return r(\"editor.getText\")}function v(){return r(\"editor.getCursor\")}function w(){return r(\"editor.getSelection\")}function S(t,e){return r(\"editor.setSelection\",t,e)}function b(){return r(\"editor.save\")}function F(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function A(){return r(\"editor.reloadPage\")}function M(t){return r(\"editor.openUrl\",t)}function C(t,e){return r(\"editor.downloadFile\",t,e)}function R(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function E(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function T(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function I(t){return r(\"editor.hidePanel\",t)}function O(t,e){return r(\"editor.insertAtPos\",t,e)}function U(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function $(t,e=!1){return r(\"editor.moveCursor\",t,e)}function k(t){return r(\"editor.insertAtCursor\",t)}function L(t){return r(\"editor.dispatch\",t)}function q(t,e=\"\"){return r(\"editor.prompt\",t,e)}function N(t){return r(\"editor.confirm\",t)}function B(t){return r(\"editor.getUiOption\",t)}function D(t,e){return r(\"editor.setUiOption\",t,e)}function K(t){return r(\"editor.vimEx\",t)}var l=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},z=new l;async function u(){let t=await i.getText(),e=await i.getSelection();if(e.to==0&&e.from==0){await i.insertAtCursor(\"* \");return}let n=e.from;for(t[n]==`\n`&&n--;n>=0&&t[n]!==`\n`;)n--;n++,t=t.slice(n,e.to),t=`* ${t.replaceAll(/\\n(?!\\n)/g,`\n* `)}`,await i.replaceRange(n,e.to,t)}var W=u;return d(X);})();\n return mod;})()"
    },
    "numberListifySelection": {
      "command": {
        "name": "Text: Number Listify Selection"
      },
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var c=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},f=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of g(e))!p.call(t,s)&&s!==n&&a(t,s,{get:()=>e[s],enumerable:!(o=m(e,s))||o.enumerable});return t};var d=t=>f(a({},\"__esModule\",{value:!0}),t);var X={};c(X,{default:()=>W});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var i={};c(i,{confirm:()=>N,dispatch:()=>k,downloadFile:()=>C,filterBox:()=>E,flashNotification:()=>R,getCurrentPage:()=>P,getCursor:()=>v,getSelection:()=>w,getText:()=>h,getUiOption:()=>B,hidePanel:()=>I,insertAtCursor:()=>$,insertAtPos:()=>L,moveCursor:()=>U,navigate:()=>F,openUrl:()=>M,prompt:()=>q,reloadPage:()=>A,replaceRange:()=>O,save:()=>b,setPage:()=>y,setSelection:()=>S,setUiOption:()=>D,showPanel:()=>T,vimEx:()=>K});function P(){return r(\"editor.getCurrentPage\")}function y(t){return r(\"editor.setPage\",t)}function h(){return r(\"editor.getText\")}function v(){return r(\"editor.getCursor\")}function w(){return r(\"editor.getSelection\")}function S(t,e){return r(\"editor.setSelection\",t,e)}function b(){return r(\"editor.save\")}function F(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function A(){return r(\"editor.reloadPage\")}function M(t){return r(\"editor.openUrl\",t)}function C(t,e){return r(\"editor.downloadFile\",t,e)}function R(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function E(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function T(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function I(t){return r(\"editor.hidePanel\",t)}function L(t,e){return r(\"editor.insertAtPos\",t,e)}function O(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function U(t,e=!1){return r(\"editor.moveCursor\",t,e)}function $(t){return r(\"editor.insertAtCursor\",t)}function k(t){return r(\"editor.dispatch\",t)}function q(t,e=\"\"){return r(\"editor.prompt\",t,e)}function N(t){return r(\"editor.confirm\",t)}function B(t){return r(\"editor.getUiOption\",t)}function D(t,e){return r(\"editor.setUiOption\",t,e)}function K(t){return r(\"editor.vimEx\",t)}var l=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},z=new l;async function u(){let t=await i.getText(),e=await i.getSelection(),n=e.from;for(;n>=0&&t[n]!==`\n`;)n--;n++,t=t.slice(n,e.to);let o=1;t=`1. ${t.replaceAll(/\\n(?!\\n)/g,()=>(o++,`\n${o}. `))}`,await i.replaceRange(n,e.to,t)}var W=u;return d(X);})();\n return mod;})()"
    },
    "linkSelection": {
      "command": {
        "name": "Text: Link Selection",
        "key": "Ctrl-Shift-k",
        "mac": "Cmd-Shift-k"
      },
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var c=(r,e)=>{for(var n in e)a(r,n,{get:e[n],enumerable:!0})},f=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of g(e))!p.call(r,i)&&i!==n&&a(r,i,{get:()=>e[i],enumerable:!(o=m(e,i))||o.enumerable});return r};var d=r=>f(a({},\"__esModule\",{value:!0}),r);var X={};c(X,{default:()=>W});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var s={};c(s,{confirm:()=>N,dispatch:()=>L,downloadFile:()=>C,filterBox:()=>E,flashNotification:()=>R,getCurrentPage:()=>P,getCursor:()=>v,getSelection:()=>w,getText:()=>h,getUiOption:()=>B,hidePanel:()=>I,insertAtCursor:()=>$,insertAtPos:()=>k,moveCursor:()=>U,navigate:()=>F,openUrl:()=>M,prompt:()=>q,reloadPage:()=>A,replaceRange:()=>O,save:()=>b,setPage:()=>y,setSelection:()=>S,setUiOption:()=>D,showPanel:()=>T,vimEx:()=>K});function P(){return t(\"editor.getCurrentPage\")}function y(r){return t(\"editor.setPage\",r)}function h(){return t(\"editor.getText\")}function v(){return t(\"editor.getCursor\")}function w(){return t(\"editor.getSelection\")}function S(r,e){return t(\"editor.setSelection\",r,e)}function b(){return t(\"editor.save\")}function F(r,e,n=!1,o=!1){return t(\"editor.navigate\",r,e,n,o)}function A(){return t(\"editor.reloadPage\")}function M(r){return t(\"editor.openUrl\",r)}function C(r,e){return t(\"editor.downloadFile\",r,e)}function R(r,e=\"info\"){return t(\"editor.flashNotification\",r,e)}function E(r,e,n=\"\",o=\"\"){return t(\"editor.filterBox\",r,e,n,o)}function T(r,e,n,o=\"\"){return t(\"editor.showPanel\",r,e,n,o)}function I(r){return t(\"editor.hidePanel\",r)}function k(r,e){return t(\"editor.insertAtPos\",r,e)}function O(r,e,n){return t(\"editor.replaceRange\",r,e,n)}function U(r,e=!1){return t(\"editor.moveCursor\",r,e)}function $(r){return t(\"editor.insertAtCursor\",r)}function L(r){return t(\"editor.dispatch\",r)}function q(r,e=\"\"){return t(\"editor.prompt\",r,e)}function N(r){return t(\"editor.confirm\",r)}function B(r){return t(\"editor.getUiOption\",r)}function D(r,e){return t(\"editor.setUiOption\",r,e)}function K(r){return t(\"editor.vimEx\",r)}var l=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},z=new l;async function u(){let r=await s.getText(),e=await s.getSelection(),n=r.slice(e.from,e.to),o=\"[]()\",i=1;if(n.length>0)try{new URL(n),o=`[](${n})`}catch{o=`[${n}]()`,i=o.length-1}await s.replaceRange(e.from,e.to,o),await s.moveCursor(e.from+i)}var W=u;return d(X);})();\n return mod;})()"
    },
    "bold": {
      "command": {
        "name": "Text: Bold",
        "key": "Ctrl-b",
        "mac": "Cmd-b",
        "wrapper": "**"
      },
      "code": "(() => { var mod=(()=>{var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var m=(e,t)=>{for(var n in t)l(e,n,{get:t[n],enumerable:!0})},x=(e,t,n,o)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of f(t))!d.call(e,i)&&i!==n&&l(e,i,{get:()=>t[i],enumerable:!(o=p(t,i))||o.enumerable});return e};var P=e=>x(l({},\"__esModule\",{value:!0}),e);var _={};m(_,{default:()=>Z});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};m(s,{confirm:()=>D,dispatch:()=>N,downloadFile:()=>E,filterBox:()=>I,flashNotification:()=>T,getCurrentPage:()=>h,getCursor:()=>S,getSelection:()=>b,getText:()=>w,getUiOption:()=>K,hidePanel:()=>U,insertAtCursor:()=>q,insertAtPos:()=>$,moveCursor:()=>L,navigate:()=>M,openUrl:()=>R,prompt:()=>B,reloadPage:()=>C,replaceRange:()=>k,save:()=>A,setPage:()=>v,setSelection:()=>F,setUiOption:()=>Q,showPanel:()=>O,vimEx:()=>V});function h(){return r(\"editor.getCurrentPage\")}function v(e){return r(\"editor.setPage\",e)}function w(){return r(\"editor.getText\")}function S(){return r(\"editor.getCursor\")}function b(){return r(\"editor.getSelection\")}function F(e,t){return r(\"editor.setSelection\",e,t)}function A(){return r(\"editor.save\")}function M(e,t,n=!1,o=!1){return r(\"editor.navigate\",e,t,n,o)}function C(){return r(\"editor.reloadPage\")}function R(e){return r(\"editor.openUrl\",e)}function E(e,t){return r(\"editor.downloadFile\",e,t)}function T(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function I(e,t,n=\"\",o=\"\"){return r(\"editor.filterBox\",e,t,n,o)}function O(e,t,n,o=\"\"){return r(\"editor.showPanel\",e,t,n,o)}function U(e){return r(\"editor.hidePanel\",e)}function $(e,t){return r(\"editor.insertAtPos\",e,t)}function k(e,t,n){return r(\"editor.replaceRange\",e,t,n)}function L(e,t=!1){return r(\"editor.moveCursor\",e,t)}function q(e){return r(\"editor.insertAtCursor\",e)}function N(e){return r(\"editor.dispatch\",e)}function B(e,t=\"\"){return r(\"editor.prompt\",e,t)}function D(e){return r(\"editor.confirm\",e)}function K(e){return r(\"editor.getUiOption\",e)}function Q(e,t){return r(\"editor.setUiOption\",e,t)}function V(e){return r(\"editor.vimEx\",e)}var c=class{listPages(t=!1){return r(\"space.listPages\",t)}getPageMeta(t){return r(\"space.getPageMeta\",t)}readPage(t){return r(\"space.readPage\",t)}writePage(t,n){return r(\"space.writePage\",t,n)}deletePage(t){return r(\"space.deletePage\",t)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(t){return r(\"space.getAttachmentMeta\",t)}readAttachment(t){return r(\"space.readAttachment\",t)}writeAttachment(t,n,o){return r(\"space.writeAttachment\",t,n,o)}deleteAttachment(t){return r(\"space.deleteAttachment\",t)}readFile(t,n){return r(\"space.readFile\",t,n)}getFileMeta(t){return r(\"space.getFileMeta\",t)}writeFile(t,n,o){return r(\"space.writeFile\",t,n,o)}deleteFile(t){return r(\"space.deleteFile\",t)}listFiles(t){return r(\"space.listFiles\",t)}},H=new c;function g(e){return Y(e.wrapper)}async function Y(e){let t=await s.getText(),n=await s.getSelection();if(n.from===n.to)o(n.from)?await s.moveCursor(n.from+e.length):(await s.insertAtCursor(e+e),await s.moveCursor(n.from+e.length));else{let i=n.from,a=n.to,u=o(i);o(i)||(i=n.from-e.length,a=n.to+e.length,u=o(i)),u?(await s.replaceRange(i,a,t.substring(i+e.length,a-e.length)),await s.setSelection(i,a-e.length*2)):(await s.replaceRange(n.from,n.to,e+t.slice(n.from,n.to)+e),await s.setSelection(n.from+e.length,n.to+e.length))}function o(i){for(let a=0;a<e.length;a++)if(t[i+a]!==e[a])return!1;return!0}}var Z=g;return P(_);})();\n return mod;})()"
    },
    "italic": {
      "command": {
        "name": "Text: Italic",
        "key": "Ctrl-i",
        "mac": "Cmd-i",
        "wrapper": "_"
      },
      "code": "(() => { var mod=(()=>{var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var m=(e,t)=>{for(var n in t)l(e,n,{get:t[n],enumerable:!0})},x=(e,t,n,o)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of f(t))!d.call(e,i)&&i!==n&&l(e,i,{get:()=>t[i],enumerable:!(o=p(t,i))||o.enumerable});return e};var P=e=>x(l({},\"__esModule\",{value:!0}),e);var _={};m(_,{default:()=>Z});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};m(s,{confirm:()=>D,dispatch:()=>N,downloadFile:()=>E,filterBox:()=>I,flashNotification:()=>T,getCurrentPage:()=>h,getCursor:()=>S,getSelection:()=>b,getText:()=>w,getUiOption:()=>K,hidePanel:()=>U,insertAtCursor:()=>q,insertAtPos:()=>$,moveCursor:()=>L,navigate:()=>M,openUrl:()=>R,prompt:()=>B,reloadPage:()=>C,replaceRange:()=>k,save:()=>A,setPage:()=>v,setSelection:()=>F,setUiOption:()=>Q,showPanel:()=>O,vimEx:()=>V});function h(){return r(\"editor.getCurrentPage\")}function v(e){return r(\"editor.setPage\",e)}function w(){return r(\"editor.getText\")}function S(){return r(\"editor.getCursor\")}function b(){return r(\"editor.getSelection\")}function F(e,t){return r(\"editor.setSelection\",e,t)}function A(){return r(\"editor.save\")}function M(e,t,n=!1,o=!1){return r(\"editor.navigate\",e,t,n,o)}function C(){return r(\"editor.reloadPage\")}function R(e){return r(\"editor.openUrl\",e)}function E(e,t){return r(\"editor.downloadFile\",e,t)}function T(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function I(e,t,n=\"\",o=\"\"){return r(\"editor.filterBox\",e,t,n,o)}function O(e,t,n,o=\"\"){return r(\"editor.showPanel\",e,t,n,o)}function U(e){return r(\"editor.hidePanel\",e)}function $(e,t){return r(\"editor.insertAtPos\",e,t)}function k(e,t,n){return r(\"editor.replaceRange\",e,t,n)}function L(e,t=!1){return r(\"editor.moveCursor\",e,t)}function q(e){return r(\"editor.insertAtCursor\",e)}function N(e){return r(\"editor.dispatch\",e)}function B(e,t=\"\"){return r(\"editor.prompt\",e,t)}function D(e){return r(\"editor.confirm\",e)}function K(e){return r(\"editor.getUiOption\",e)}function Q(e,t){return r(\"editor.setUiOption\",e,t)}function V(e){return r(\"editor.vimEx\",e)}var c=class{listPages(t=!1){return r(\"space.listPages\",t)}getPageMeta(t){return r(\"space.getPageMeta\",t)}readPage(t){return r(\"space.readPage\",t)}writePage(t,n){return r(\"space.writePage\",t,n)}deletePage(t){return r(\"space.deletePage\",t)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(t){return r(\"space.getAttachmentMeta\",t)}readAttachment(t){return r(\"space.readAttachment\",t)}writeAttachment(t,n,o){return r(\"space.writeAttachment\",t,n,o)}deleteAttachment(t){return r(\"space.deleteAttachment\",t)}readFile(t,n){return r(\"space.readFile\",t,n)}getFileMeta(t){return r(\"space.getFileMeta\",t)}writeFile(t,n,o){return r(\"space.writeFile\",t,n,o)}deleteFile(t){return r(\"space.deleteFile\",t)}listFiles(t){return r(\"space.listFiles\",t)}},H=new c;function g(e){return Y(e.wrapper)}async function Y(e){let t=await s.getText(),n=await s.getSelection();if(n.from===n.to)o(n.from)?await s.moveCursor(n.from+e.length):(await s.insertAtCursor(e+e),await s.moveCursor(n.from+e.length));else{let i=n.from,a=n.to,u=o(i);o(i)||(i=n.from-e.length,a=n.to+e.length,u=o(i)),u?(await s.replaceRange(i,a,t.substring(i+e.length,a-e.length)),await s.setSelection(i,a-e.length*2)):(await s.replaceRange(n.from,n.to,e+t.slice(n.from,n.to)+e),await s.setSelection(n.from+e.length,n.to+e.length))}function o(i){for(let a=0;a<e.length;a++)if(t[i+a]!==e[a])return!1;return!0}}var Z=g;return P(_);})();\n return mod;})()"
    },
    "strikethrough": {
      "command": {
        "name": "Text: Strikethrough",
        "key": "Ctrl-Shift-s",
        "mac": "Cmd-Shift-s",
        "wrapper": "~~"
      },
      "code": "(() => { var mod=(()=>{var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var m=(e,t)=>{for(var n in t)l(e,n,{get:t[n],enumerable:!0})},x=(e,t,n,o)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of f(t))!d.call(e,i)&&i!==n&&l(e,i,{get:()=>t[i],enumerable:!(o=p(t,i))||o.enumerable});return e};var P=e=>x(l({},\"__esModule\",{value:!0}),e);var _={};m(_,{default:()=>Z});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};m(s,{confirm:()=>D,dispatch:()=>N,downloadFile:()=>E,filterBox:()=>I,flashNotification:()=>T,getCurrentPage:()=>h,getCursor:()=>S,getSelection:()=>b,getText:()=>w,getUiOption:()=>K,hidePanel:()=>U,insertAtCursor:()=>q,insertAtPos:()=>$,moveCursor:()=>L,navigate:()=>M,openUrl:()=>R,prompt:()=>B,reloadPage:()=>C,replaceRange:()=>k,save:()=>A,setPage:()=>v,setSelection:()=>F,setUiOption:()=>Q,showPanel:()=>O,vimEx:()=>V});function h(){return r(\"editor.getCurrentPage\")}function v(e){return r(\"editor.setPage\",e)}function w(){return r(\"editor.getText\")}function S(){return r(\"editor.getCursor\")}function b(){return r(\"editor.getSelection\")}function F(e,t){return r(\"editor.setSelection\",e,t)}function A(){return r(\"editor.save\")}function M(e,t,n=!1,o=!1){return r(\"editor.navigate\",e,t,n,o)}function C(){return r(\"editor.reloadPage\")}function R(e){return r(\"editor.openUrl\",e)}function E(e,t){return r(\"editor.downloadFile\",e,t)}function T(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function I(e,t,n=\"\",o=\"\"){return r(\"editor.filterBox\",e,t,n,o)}function O(e,t,n,o=\"\"){return r(\"editor.showPanel\",e,t,n,o)}function U(e){return r(\"editor.hidePanel\",e)}function $(e,t){return r(\"editor.insertAtPos\",e,t)}function k(e,t,n){return r(\"editor.replaceRange\",e,t,n)}function L(e,t=!1){return r(\"editor.moveCursor\",e,t)}function q(e){return r(\"editor.insertAtCursor\",e)}function N(e){return r(\"editor.dispatch\",e)}function B(e,t=\"\"){return r(\"editor.prompt\",e,t)}function D(e){return r(\"editor.confirm\",e)}function K(e){return r(\"editor.getUiOption\",e)}function Q(e,t){return r(\"editor.setUiOption\",e,t)}function V(e){return r(\"editor.vimEx\",e)}var c=class{listPages(t=!1){return r(\"space.listPages\",t)}getPageMeta(t){return r(\"space.getPageMeta\",t)}readPage(t){return r(\"space.readPage\",t)}writePage(t,n){return r(\"space.writePage\",t,n)}deletePage(t){return r(\"space.deletePage\",t)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(t){return r(\"space.getAttachmentMeta\",t)}readAttachment(t){return r(\"space.readAttachment\",t)}writeAttachment(t,n,o){return r(\"space.writeAttachment\",t,n,o)}deleteAttachment(t){return r(\"space.deleteAttachment\",t)}readFile(t,n){return r(\"space.readFile\",t,n)}getFileMeta(t){return r(\"space.getFileMeta\",t)}writeFile(t,n,o){return r(\"space.writeFile\",t,n,o)}deleteFile(t){return r(\"space.deleteFile\",t)}listFiles(t){return r(\"space.listFiles\",t)}},H=new c;function g(e){return Y(e.wrapper)}async function Y(e){let t=await s.getText(),n=await s.getSelection();if(n.from===n.to)o(n.from)?await s.moveCursor(n.from+e.length):(await s.insertAtCursor(e+e),await s.moveCursor(n.from+e.length));else{let i=n.from,a=n.to,u=o(i);o(i)||(i=n.from-e.length,a=n.to+e.length,u=o(i)),u?(await s.replaceRange(i,a,t.substring(i+e.length,a-e.length)),await s.setSelection(i,a-e.length*2)):(await s.replaceRange(n.from,n.to,e+t.slice(n.from,n.to)+e),await s.setSelection(n.from+e.length,n.to+e.length))}function o(i){for(let a=0;a<e.length;a++)if(t[i+a]!==e[a])return!1;return!0}}var Z=g;return P(_);})();\n return mod;})()"
    },
    "marker": {
      "command": {
        "name": "Text: Marker",
        "key": "Alt-m",
        "wrapper": "=="
      },
      "code": "(() => { var mod=(()=>{var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var m=(e,t)=>{for(var n in t)l(e,n,{get:t[n],enumerable:!0})},x=(e,t,n,o)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of f(t))!d.call(e,i)&&i!==n&&l(e,i,{get:()=>t[i],enumerable:!(o=p(t,i))||o.enumerable});return e};var P=e=>x(l({},\"__esModule\",{value:!0}),e);var _={};m(_,{default:()=>Z});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};m(s,{confirm:()=>D,dispatch:()=>N,downloadFile:()=>E,filterBox:()=>I,flashNotification:()=>T,getCurrentPage:()=>h,getCursor:()=>S,getSelection:()=>b,getText:()=>w,getUiOption:()=>K,hidePanel:()=>U,insertAtCursor:()=>q,insertAtPos:()=>$,moveCursor:()=>L,navigate:()=>M,openUrl:()=>R,prompt:()=>B,reloadPage:()=>C,replaceRange:()=>k,save:()=>A,setPage:()=>v,setSelection:()=>F,setUiOption:()=>Q,showPanel:()=>O,vimEx:()=>V});function h(){return r(\"editor.getCurrentPage\")}function v(e){return r(\"editor.setPage\",e)}function w(){return r(\"editor.getText\")}function S(){return r(\"editor.getCursor\")}function b(){return r(\"editor.getSelection\")}function F(e,t){return r(\"editor.setSelection\",e,t)}function A(){return r(\"editor.save\")}function M(e,t,n=!1,o=!1){return r(\"editor.navigate\",e,t,n,o)}function C(){return r(\"editor.reloadPage\")}function R(e){return r(\"editor.openUrl\",e)}function E(e,t){return r(\"editor.downloadFile\",e,t)}function T(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function I(e,t,n=\"\",o=\"\"){return r(\"editor.filterBox\",e,t,n,o)}function O(e,t,n,o=\"\"){return r(\"editor.showPanel\",e,t,n,o)}function U(e){return r(\"editor.hidePanel\",e)}function $(e,t){return r(\"editor.insertAtPos\",e,t)}function k(e,t,n){return r(\"editor.replaceRange\",e,t,n)}function L(e,t=!1){return r(\"editor.moveCursor\",e,t)}function q(e){return r(\"editor.insertAtCursor\",e)}function N(e){return r(\"editor.dispatch\",e)}function B(e,t=\"\"){return r(\"editor.prompt\",e,t)}function D(e){return r(\"editor.confirm\",e)}function K(e){return r(\"editor.getUiOption\",e)}function Q(e,t){return r(\"editor.setUiOption\",e,t)}function V(e){return r(\"editor.vimEx\",e)}var c=class{listPages(t=!1){return r(\"space.listPages\",t)}getPageMeta(t){return r(\"space.getPageMeta\",t)}readPage(t){return r(\"space.readPage\",t)}writePage(t,n){return r(\"space.writePage\",t,n)}deletePage(t){return r(\"space.deletePage\",t)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(t){return r(\"space.getAttachmentMeta\",t)}readAttachment(t){return r(\"space.readAttachment\",t)}writeAttachment(t,n,o){return r(\"space.writeAttachment\",t,n,o)}deleteAttachment(t){return r(\"space.deleteAttachment\",t)}readFile(t,n){return r(\"space.readFile\",t,n)}getFileMeta(t){return r(\"space.getFileMeta\",t)}writeFile(t,n,o){return r(\"space.writeFile\",t,n,o)}deleteFile(t){return r(\"space.deleteFile\",t)}listFiles(t){return r(\"space.listFiles\",t)}},H=new c;function g(e){return Y(e.wrapper)}async function Y(e){let t=await s.getText(),n=await s.getSelection();if(n.from===n.to)o(n.from)?await s.moveCursor(n.from+e.length):(await s.insertAtCursor(e+e),await s.moveCursor(n.from+e.length));else{let i=n.from,a=n.to,u=o(i);o(i)||(i=n.from-e.length,a=n.to+e.length,u=o(i)),u?(await s.replaceRange(i,a,t.substring(i+e.length,a-e.length)),await s.setSelection(i,a-e.length*2)):(await s.replaceRange(n.from,n.to,e+t.slice(n.from,n.to)+e),await s.setSelection(n.from+e.length,n.to+e.length))}function o(i){for(let a=0;a<e.length;a++)if(t[i+a]!==e[a])return!1;return!0}}var Z=g;return P(_);})();\n return mod;})()"
    },
    "extractToPageCommand": {
      "command": {
        "name": "Extract text to new page"
      },
      "code": "(() => { var mod=(()=>{var m=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var g=(t,e)=>{for(var n in e)m(t,n,{get:e[n],enumerable:!0})},f=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of p(e))!d.call(t,s)&&s!==n&&m(t,s,{get:()=>e[s],enumerable:!(o=l(e,s))||o.enumerable});return t};var P=t=>f(m({},\"__esModule\",{value:!0}),t);var X={};g(X,{default:()=>J});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var i={};g(i,{confirm:()=>B,dispatch:()=>L,downloadFile:()=>C,filterBox:()=>I,flashNotification:()=>E,getCurrentPage:()=>y,getCursor:()=>w,getSelection:()=>b,getText:()=>h,getUiOption:()=>D,hidePanel:()=>O,insertAtCursor:()=>q,insertAtPos:()=>R,moveCursor:()=>U,navigate:()=>M,openUrl:()=>k,prompt:()=>$,reloadPage:()=>A,replaceRange:()=>T,save:()=>S,setPage:()=>v,setSelection:()=>F,setUiOption:()=>K,showPanel:()=>N,vimEx:()=>Q});function y(){return r(\"editor.getCurrentPage\")}function v(t){return r(\"editor.setPage\",t)}function h(){return r(\"editor.getText\")}function w(){return r(\"editor.getCursor\")}function b(){return r(\"editor.getSelection\")}function F(t,e){return r(\"editor.setSelection\",t,e)}function S(){return r(\"editor.save\")}function M(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function A(){return r(\"editor.reloadPage\")}function k(t){return r(\"editor.openUrl\",t)}function C(t,e){return r(\"editor.downloadFile\",t,e)}function E(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function I(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function N(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function O(t){return r(\"editor.hidePanel\",t)}function R(t,e){return r(\"editor.insertAtPos\",t,e)}function T(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function U(t,e=!1){return r(\"editor.moveCursor\",t,e)}function q(t){return r(\"editor.insertAtCursor\",t)}function L(t){return r(\"editor.dispatch\",t)}function $(t,e=\"\"){return r(\"editor.prompt\",t,e)}function B(t){return r(\"editor.confirm\",t)}function D(t){return r(\"editor.getUiOption\",t)}function K(t,e){return r(\"editor.setUiOption\",t,e)}function Q(t){return r(\"editor.vimEx\",t)}var u=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},a=new u;async function c(){let t=await i.prompt(\"New page title:\",\"new page\");if(!t)return;console.log(\"New name\",t);try{throw await a.getPageMeta(t),new Error(`Page ${t} already exists, cannot rename to existing page.`)}catch(o){if(!o.message.includes(\"not found\"))throw await i.flashNotification(o.message,\"error\"),o}let e=await i.getText(),n=await i.getSelection();e=e.slice(n.from,n.to),await i.replaceRange(n.from,n.to,`[[${t}]]`),console.log(\"Writing new page to space\"),await a.writePage(t,e),console.log(\"Navigating to new page\"),await i.navigate(t)}var J=c;return P(X);})();\n return mod;})()"
    },
    "updatePlugsCommand": {
      "command": {
        "name": "Plugs: Update",
        "key": "Ctrl-Shift-p",
        "mac": "Cmd-Shift-p"
      },
      "code": "(() => { var mod=(()=>{var y=Object.create;var u=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var T=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var c=(t,e)=>{for(var n in e)u(t,n,{get:e[n],enumerable:!0})},f=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of v(e))!b.call(t,a)&&a!==n&&u(t,a,{get:()=>e[a],enumerable:!(o=h(e,a))||o.enumerable});return t};var F=(t,e,n)=>(n=t!=null?y(w(t)):{},f(e||!t||!t.__esModule?u(n,\"default\",{value:t,enumerable:!0}):n,t)),S=t=>f(u({},\"__esModule\",{value:!0}),t);var fe={};c(fe,{default:()=>ge});var s=self.syscall;typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var i={};c(i,{confirm:()=>Z,dispatch:()=>z,downloadFile:()=>j,filterBox:()=>K,flashNotification:()=>B,getCurrentPage:()=>L,getCursor:()=>D,getSelection:()=>R,getText:()=>N,getUiOption:()=>ee,hidePanel:()=>Q,insertAtCursor:()=>W,insertAtPos:()=>_,moveCursor:()=>J,navigate:()=>Y,openUrl:()=>G,prompt:()=>X,reloadPage:()=>q,replaceRange:()=>H,save:()=>I,setPage:()=>k,setSelection:()=>O,setUiOption:()=>te,showPanel:()=>V,vimEx:()=>re});function L(){return r(\"editor.getCurrentPage\")}function k(t){return r(\"editor.setPage\",t)}function N(){return r(\"editor.getText\")}function D(){return r(\"editor.getCursor\")}function R(){return r(\"editor.getSelection\")}function O(t,e){return r(\"editor.setSelection\",t,e)}function I(){return r(\"editor.save\")}function Y(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function q(){return r(\"editor.reloadPage\")}function G(t){return r(\"editor.openUrl\",t)}function j(t,e){return r(\"editor.downloadFile\",t,e)}function B(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function K(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function V(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function Q(t){return r(\"editor.hidePanel\",t)}function _(t,e){return r(\"editor.insertAtPos\",t,e)}function H(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function J(t,e=!1){return r(\"editor.moveCursor\",t,e)}function W(t){return r(\"editor.insertAtCursor\",t)}function z(t){return r(\"editor.dispatch\",t)}function X(t,e=\"\"){return r(\"editor.prompt\",t,e)}function Z(t){return r(\"editor.confirm\",t)}function ee(t){return r(\"editor.getUiOption\",t)}function te(t,e){return r(\"editor.setUiOption\",t,e)}function re(t){return r(\"editor.vimEx\",t)}var m=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},g=new m;var l={};c(l,{getEnv:()=>ue,invokeCommand:()=>se,invokeFunction:()=>ie,listCommands:()=>ae,reloadPlugs:()=>le});function ie(t,e,...n){return r(\"system.invokeFunction\",t,e,...n)}function se(t){return r(\"system.invokeCommand\",t)}function ae(){return r(\"system.listCommands\")}function le(){r(\"system.reloadPlugs\")}function ue(){return r(\"system.getEnv\")}var P=F(T(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function x(){await i.save(),await i.flashNotification(\"Updating plugs...\");try{await l.invokeFunction(\"server\",\"updatePlugs\"),await i.flashNotification(\"And... done!\"),l.reloadPlugs()}catch(t){i.flashNotification(\"Error updating plugs: \"+t.message,\"error\")}}var ge=x;return S(fe);})();\n return mod;})()"
    },
    "updatePlugs": {
      "env": "server",
      "code": "(() => { var mod=(()=>{var S=Object.create;var c=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var E=(r=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(r,{get:(e,t)=>(typeof require!=\"undefined\"?require:e)[t]}):r)(function(r){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+r+'\" is not supported')});var g=(r,e)=>{for(var t in e)c(r,t,{get:e[t],enumerable:!0})},v=(r,e,t,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of A(e))!C.call(r,i)&&i!==t&&c(r,i,{get:()=>e[i],enumerable:!(o=M(e,i))||o.enumerable});return r};var U=(r,e,t)=>(t=r!=null?S($(r)):{},v(e||!r||!r.__esModule?c(t,\"default\",{value:r,enumerable:!0}):t,r)),L=r=>v(c({},\"__esModule\",{value:!0}),r);var Z={};g(Z,{default:()=>X});var l=self.syscall;var m={};g(m,{dispatchEvent:()=>N,listEvents:()=>D});function N(r,e,t){return new Promise((o,i)=>{let s=-1;t&&(s=setTimeout(()=>{console.log(\"Timeout!\"),i(\"timeout\")},t)),l(\"event.dispatch\",r,e).then(a=>{s!==-1&&clearTimeout(s),o(a)}).catch(i)})}function D(){return l(\"event.list\")}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;var f={};g(f,{parseMarkdown:()=>j});function j(r){return n(\"markdown.parseMarkdown\",r)}var p=class{listPages(e=!1){return n(\"space.listPages\",e)}getPageMeta(e){return n(\"space.getPageMeta\",e)}readPage(e){return n(\"space.readPage\",e)}writePage(e,t){return n(\"space.writePage\",e,t)}deletePage(e){return n(\"space.deletePage\",e)}listPlugs(){return n(\"space.listPlugs\")}listAttachments(){return n(\"space.listAttachments\")}getAttachmentMeta(e){return n(\"space.getAttachmentMeta\",e)}readAttachment(e){return n(\"space.readAttachment\",e)}writeAttachment(e,t,o){return n(\"space.writeAttachment\",e,t,o)}deleteAttachment(e){return n(\"space.deleteAttachment\",e)}readFile(e,t){return n(\"space.readFile\",e,t)}getFileMeta(e){return n(\"space.getFileMeta\",e)}writeFile(e,t,o){return n(\"space.writeFile\",e,t,o)}deleteFile(e){return n(\"space.deleteFile\",e)}listFiles(e){return n(\"space.listFiles\",e)}},u=new p;var d={};g(d,{getEnv:()=>H,invokeCommand:()=>V,invokeFunction:()=>K,listCommands:()=>Q,reloadPlugs:()=>_});function K(r,e,...t){return n(\"system.invokeFunction\",r,e,...t)}function V(r){return n(\"system.invokeCommand\",r)}function Q(){return n(\"system.listCommands\")}function _(){n(\"system.reloadPlugs\")}function H(){return n(\"system.getEnv\")}function P(r,e){if(e(r))return[r];let t=[];if(r.children)for(let o of r.children)t=[...t,...P(o,e)];return t}function x(r,e){return P(r,t=>t.type===e)[0]}function b(r,e){P(r,e)}var y=U(E(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function z(r,e){let t=await u.readPage(r),o=await f.parseMarkdown(t),i;return b(o,s=>{if(s.type!==\"FencedCode\")return!1;let a=x(s,\"CodeInfo\");if(e&&!a||e&&!e.includes(a.children[0].text))return!1;let h=x(s,\"CodeText\");return h?(i=h.children[0].text,!0):!1}),i}async function T(r,e=[\"yaml\"]){let t=await z(r,e);if(t!==void 0)try{return y.parse(t)}catch(o){throw console.error(\"YAML Page parser error\",o),new Error(`YAML Error: ${o.message}`)}}async function F(){let r=[];try{let t=await T(\"PLUGS\");if(r=t.filter(o=>typeof o==\"string\"),r.length!==t.length)throw new Error(\"Some of the plugs were not in a yaml list format, they were ignored\")}catch(t){if(t.message.includes(\"Could not read file\")){console.warn(\"No PLUGS page found, not loading anything\");return}throw new Error(`Error processing PLUGS: ${t.message}`)}console.log(\"Plug YAML\",r);let e=[];for(let t of r){let[o,...i]=t.split(\":\"),s=await m.dispatchEvent(`get-plug:${o}`,i.join(\":\"));s.length===0&&console.error(\"Could not resolve plug\",t);let a=s[0];e.push(a.name),await u.writeAttachment(`_plug/${a.name}.plug.json`,\"utf8\",JSON.stringify(a))}for(let t of await u.listPlugs()){let o=t.substring(6,t.length-10);e.includes(o)||await u.deleteAttachment(t)}d.reloadPlugs()}var X=F;return L(Z);})();\n return mod;})()"
    },
    "getPlugHTTPS": {
      "events": [
        "get-plug:https"
      ],
      "code": "(() => { var mod=(()=>{var x=Object.create;var a=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var b=(r=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(r,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):r)(function(r){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+r+'\" is not supported')});var T=(r,e)=>{for(var n in e)a(r,n,{get:e[n],enumerable:!0})},c=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of h(e))!w.call(r,s)&&s!==n&&a(r,s,{get:()=>e[s],enumerable:!(o=y(e,s))||o.enumerable});return r};var F=(r,e,n)=>(n=r!=null?x(v(r)):{},c(e||!r||!r.__esModule?a(n,\"default\",{value:r,enumerable:!0}):n,r)),S=r=>c(a({},\"__esModule\",{value:!0}),r);var O={};T(O,{default:()=>R});var i=self.syscall;typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var l=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},u=new l;var p=F(b(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function P(r){let e=`https:${r}`;console.log(\"Now fetching plug manifest from\",e);let n=await fetch(e);if(n.status!==200)throw new Error(`Could not fetch plug manifest from ${e}`);return n.json()}var R=P;return S(O);})();\n return mod;})()"
    },
    "getPlugGithub": {
      "events": [
        "get-plug:github"
      ],
      "code": "(() => { var mod=(()=>{var y=Object.create;var a=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var T=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var F=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},g=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of v(e))!b.call(t,i)&&i!==n&&a(t,i,{get:()=>e[i],enumerable:!(o=h(e,i))||o.enumerable});return t};var S=(t,e,n)=>(n=t!=null?y(w(t)):{},g(e||!t||!t.__esModule?a(n,\"default\",{value:t,enumerable:!0}):n,t)),M=t=>g(a({},\"__esModule\",{value:!0}),t);var G={};F(G,{default:()=>I});var s=self.syscall;typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var u=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},c=new u;var P=S(T(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function O(t){let e=`https:${t}`;console.log(\"Now fetching plug manifest from\",e);let n=await fetch(e);if(n.status!==200)throw new Error(`Could not fetch plug manifest from ${e}`);return n.json()}function x(t){let[e,n,o]=t.split(\"/\"),[i,l]=n.split(\"@\");return l||(l=\"main\"),O(`//raw.githubusercontent.com/${e}/${i}/${l}/${o}`)}var I=x;return M(G);})();\n return mod;})()"
    },
    "getPlugGithubRelease": {
      "events": [
        "get-plug:ghr"
      ],
      "code": "(() => { var mod=(()=>{var y=Object.create;var a=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var T=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,r)=>(typeof require!=\"undefined\"?require:e)[r]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var F=(t,e)=>{for(var r in e)a(t,r,{get:e[r],enumerable:!0})},g=(t,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of v(e))!b.call(t,i)&&i!==r&&a(t,i,{get:()=>e[i],enumerable:!(o=h(e,i))||o.enumerable});return t};var S=(t,e,r)=>(r=t!=null?y(w(t)):{},g(e||!t||!t.__esModule?a(r,\"default\",{value:t,enumerable:!0}):r,t)),M=t=>g(a({},\"__esModule\",{value:!0}),t);var G={};F(G,{default:()=>I});var s=self.syscall;typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;var l=class{listPages(e=!1){return n(\"space.listPages\",e)}getPageMeta(e){return n(\"space.getPageMeta\",e)}readPage(e){return n(\"space.readPage\",e)}writePage(e,r){return n(\"space.writePage\",e,r)}deletePage(e){return n(\"space.deletePage\",e)}listPlugs(){return n(\"space.listPlugs\")}listAttachments(){return n(\"space.listAttachments\")}getAttachmentMeta(e){return n(\"space.getAttachmentMeta\",e)}readAttachment(e){return n(\"space.readAttachment\",e)}writeAttachment(e,r,o){return n(\"space.writeAttachment\",e,r,o)}deleteAttachment(e){return n(\"space.deleteAttachment\",e)}readFile(e,r){return n(\"space.readFile\",e,r)}getFileMeta(e){return n(\"space.getFileMeta\",e)}writeFile(e,r,o){return n(\"space.writeFile\",e,r,o)}deleteFile(e){return n(\"space.deleteFile\",e)}listFiles(e){return n(\"space.listFiles\",e)}},u=new l;var P=S(T(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function O(t){let e=`https:${t}`;console.log(\"Now fetching plug manifest from\",e);let r=await fetch(e);if(r.status!==200)throw new Error(`Could not fetch plug manifest from ${e}`);return r.json()}async function x(t){let[e,r,o]=t.split(\"/\");if(!o||o===\"latest\"){console.log(\"fetching the latest version\");let c=await fetch(`https://api.github.com/repos/${e}/${r}/releases/latest`);if(c.status!==200)throw new Error(`Could not fetch latest relase manifest from ${t}}`);o=(await c.json()).name}let i=`//github.com/${e}/${r}/releases/download/${o}/${r}.plug.json`;return O(i)}var I=x;return M(G);})();\n return mod;})()"
    },
    "addPlugCommand": {
      "command": {
        "name": "Plugs: Add"
      },
      "code": "(() => { var mod=(()=>{var S=Object.create;var c=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var E=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,n)=>(typeof require!=\"undefined\"?require:t)[n]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var m=(e,t)=>{for(var n in t)c(e,n,{get:t[n],enumerable:!0})},v=(e,t,n,o)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of A(t))!C.call(e,i)&&i!==n&&c(e,i,{get:()=>t[i],enumerable:!(o=M(t,i))||o.enumerable});return e};var U=(e,t,n)=>(n=e!=null?S($(e)):{},v(t||!e||!e.__esModule?c(n,\"default\",{value:e,enumerable:!0}):n,e)),L=e=>v(c({},\"__esModule\",{value:!0}),e);var Te={};m(Te,{default:()=>be});var a=self.syscall;typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};m(s,{confirm:()=>se,dispatch:()=>oe,downloadFile:()=>J,filterBox:()=>z,flashNotification:()=>W,getCurrentPage:()=>Y,getCursor:()=>j,getSelection:()=>B,getText:()=>G,getUiOption:()=>ae,hidePanel:()=>Z,insertAtCursor:()=>ne,insertAtPos:()=>ee,moveCursor:()=>re,navigate:()=>Q,openUrl:()=>H,prompt:()=>ie,reloadPage:()=>_,replaceRange:()=>te,save:()=>V,setPage:()=>q,setSelection:()=>K,setUiOption:()=>le,showPanel:()=>X,vimEx:()=>ue});function Y(){return r(\"editor.getCurrentPage\")}function q(e){return r(\"editor.setPage\",e)}function G(){return r(\"editor.getText\")}function j(){return r(\"editor.getCursor\")}function B(){return r(\"editor.getSelection\")}function K(e,t){return r(\"editor.setSelection\",e,t)}function V(){return r(\"editor.save\")}function Q(e,t,n=!1,o=!1){return r(\"editor.navigate\",e,t,n,o)}function _(){return r(\"editor.reloadPage\")}function H(e){return r(\"editor.openUrl\",e)}function J(e,t){return r(\"editor.downloadFile\",e,t)}function W(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function z(e,t,n=\"\",o=\"\"){return r(\"editor.filterBox\",e,t,n,o)}function X(e,t,n,o=\"\"){return r(\"editor.showPanel\",e,t,n,o)}function Z(e){return r(\"editor.hidePanel\",e)}function ee(e,t){return r(\"editor.insertAtPos\",e,t)}function te(e,t,n){return r(\"editor.replaceRange\",e,t,n)}function re(e,t=!1){return r(\"editor.moveCursor\",e,t)}function ne(e){return r(\"editor.insertAtCursor\",e)}function oe(e){return r(\"editor.dispatch\",e)}function ie(e,t=\"\"){return r(\"editor.prompt\",e,t)}function se(e){return r(\"editor.confirm\",e)}function ae(e){return r(\"editor.getUiOption\",e)}function le(e,t){return r(\"editor.setUiOption\",e,t)}function ue(e){return r(\"editor.vimEx\",e)}var g={};m(g,{parseMarkdown:()=>me});function me(e){return r(\"markdown.parseMarkdown\",e)}var d=class{listPages(t=!1){return r(\"space.listPages\",t)}getPageMeta(t){return r(\"space.getPageMeta\",t)}readPage(t){return r(\"space.readPage\",t)}writePage(t,n){return r(\"space.writePage\",t,n)}deletePage(t){return r(\"space.deletePage\",t)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(t){return r(\"space.getAttachmentMeta\",t)}readAttachment(t){return r(\"space.readAttachment\",t)}writeAttachment(t,n,o){return r(\"space.writeAttachment\",t,n,o)}deleteAttachment(t){return r(\"space.deleteAttachment\",t)}readFile(t,n){return r(\"space.readFile\",t,n)}getFileMeta(t){return r(\"space.getFileMeta\",t)}writeFile(t,n,o){return r(\"space.writeFile\",t,n,o)}deleteFile(t){return r(\"space.deleteFile\",t)}listFiles(t){return r(\"space.listFiles\",t)}},l=new d;var u={};m(u,{getEnv:()=>xe,invokeCommand:()=>de,invokeFunction:()=>fe,listCommands:()=>pe,reloadPlugs:()=>Pe});function fe(e,t,...n){return r(\"system.invokeFunction\",e,t,...n)}function de(e){return r(\"system.invokeCommand\",e)}function pe(){return r(\"system.listCommands\")}function Pe(){r(\"system.reloadPlugs\")}function xe(){return r(\"system.getEnv\")}function p(e,t){if(t(e))return[e];let n=[];if(e.children)for(let o of e.children)n=[...n,...p(o,t)];return n}function P(e,t){return p(e,n=>n.type===t)[0]}function b(e,t){p(e,t)}var x=U(E(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function ve(e,t){let n=await l.readPage(e),o=await g.parseMarkdown(n),i;return b(o,f=>{if(f.type!==\"FencedCode\")return!1;let y=P(f,\"CodeInfo\");if(t&&!y||t&&!t.includes(y.children[0].text))return!1;let h=P(f,\"CodeText\");return h?(i=h.children[0].text,!0):!1}),i}async function T(e,t=[\"yaml\"]){let n=await ve(e,t);if(n!==void 0)try{return x.parse(n)}catch(o){throw console.error(\"YAML Page parser error\",o),new Error(`YAML Error: ${o.message}`)}}var we=`This file lists all plugs that SilverBullet will load. Run the {[Plugs: Update]} command to update and reload this list of plugs.\n\n`;async function F(){let e=await s.prompt(\"Plug URI:\");if(!e)return;e.startsWith(\"-\")&&(e=e.replace(/^\\-\\s*/,\"\"));let t=[];try{t=await T(\"PLUGS\")}catch(n){console.error(\"ERROR\",n)}if(t.includes(e)){await s.flashNotification(\"Plug already installed\",\"error\");return}t.push(e),await l.writePage(\"PLUGS\",we+\"```yaml\\n\"+t.map(n=>`- ${n}`).join(`\n`)+\"\\n```\"),await s.navigate(\"PLUGS\"),await u.invokeFunction(\"server\",\"updatePlugs\"),await s.flashNotification(\"Plug added!\"),u.reloadPlugs()}var be=F;return L(Te);})();\n return mod;})()"
    },
    "parseCommand": {
      "command": {
        "name": "Debug: Parse Document"
      },
      "code": "(() => { var mod=(()=>{var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var m=(r,e)=>{for(var o in e)l(r,o,{get:e[o],enumerable:!0})},f=(r,e,o,n)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!p.call(r,i)&&i!==o&&l(r,i,{get:()=>e[i],enumerable:!(n=d(e,i))||n.enumerable});return r};var P=r=>f(l({},\"__esModule\",{value:!0}),r);var Y={};m(Y,{default:()=>X});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var s={};m(s,{confirm:()=>H,dispatch:()=>U,downloadFile:()=>k,filterBox:()=>L,flashNotification:()=>E,getCurrentPage:()=>y,getCursor:()=>b,getSelection:()=>w,getText:()=>h,getUiOption:()=>N,hidePanel:()=>D,insertAtCursor:()=>B,insertAtPos:()=>T,moveCursor:()=>R,navigate:()=>M,openUrl:()=>C,prompt:()=>q,reloadPage:()=>A,replaceRange:()=>O,save:()=>F,setPage:()=>v,setSelection:()=>S,setUiOption:()=>j,showPanel:()=>I,vimEx:()=>K});function y(){return t(\"editor.getCurrentPage\")}function v(r){return t(\"editor.setPage\",r)}function h(){return t(\"editor.getText\")}function b(){return t(\"editor.getCursor\")}function w(){return t(\"editor.getSelection\")}function S(r,e){return t(\"editor.setSelection\",r,e)}function F(){return t(\"editor.save\")}function M(r,e,o=!1,n=!1){return t(\"editor.navigate\",r,e,o,n)}function A(){return t(\"editor.reloadPage\")}function C(r){return t(\"editor.openUrl\",r)}function k(r,e){return t(\"editor.downloadFile\",r,e)}function E(r,e=\"info\"){return t(\"editor.flashNotification\",r,e)}function L(r,e,o=\"\",n=\"\"){return t(\"editor.filterBox\",r,e,o,n)}function I(r,e,o,n=\"\"){return t(\"editor.showPanel\",r,e,o,n)}function D(r){return t(\"editor.hidePanel\",r)}function T(r,e){return t(\"editor.insertAtPos\",r,e)}function O(r,e,o){return t(\"editor.replaceRange\",r,e,o)}function R(r,e=!1){return t(\"editor.moveCursor\",r,e)}function B(r){return t(\"editor.insertAtCursor\",r)}function U(r){return t(\"editor.dispatch\",r)}function q(r,e=\"\"){return t(\"editor.prompt\",r,e)}function H(r){return t(\"editor.confirm\",r)}function N(r){return t(\"editor.getUiOption\",r)}function j(r,e){return t(\"editor.setUiOption\",r,e)}function K(r){return t(\"editor.vimEx\",r)}var a={};m(a,{parseMarkdown:()=>V});function V(r){return t(\"markdown.parseMarkdown\",r)}var c=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,o){return t(\"space.writePage\",e,o)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,o,n){return t(\"space.writeAttachment\",e,o,n)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,o){return t(\"space.readFile\",e,o)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,o,n){return t(\"space.writeFile\",e,o,n)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},$=new c;async function g(){console.log(\"AST\",JSON.stringify(await a.parseMarkdown(await s.getText()),null,2))}var X=g;return P(Y);})();\n return mod;})()"
    },
    "showLogsCommand": {
      "command": {
        "name": "Show Logs",
        "key": "Ctrl-Alt-l",
        "mac": "Cmd-Alt-l"
      },
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var m=(r,e)=>{for(var o in e)a(r,o,{get:e[o],enumerable:!0})},f=(r,e,o,n)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!p.call(r,i)&&i!==o&&a(r,i,{get:()=>e[i],enumerable:!(n=d(e,i))||n.enumerable});return r};var P=r=>f(a({},\"__esModule\",{value:!0}),r);var X={};m(X,{default:()=>W});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var s={};m(s,{confirm:()=>H,dispatch:()=>U,downloadFile:()=>k,filterBox:()=>E,flashNotification:()=>L,getCurrentPage:()=>y,getCursor:()=>b,getSelection:()=>w,getText:()=>h,getUiOption:()=>N,hidePanel:()=>D,insertAtCursor:()=>B,insertAtPos:()=>T,moveCursor:()=>R,navigate:()=>M,openUrl:()=>C,prompt:()=>q,reloadPage:()=>A,replaceRange:()=>O,save:()=>F,setPage:()=>v,setSelection:()=>S,setUiOption:()=>j,showPanel:()=>I,vimEx:()=>K});function y(){return t(\"editor.getCurrentPage\")}function v(r){return t(\"editor.setPage\",r)}function h(){return t(\"editor.getText\")}function b(){return t(\"editor.getCursor\")}function w(){return t(\"editor.getSelection\")}function S(r,e){return t(\"editor.setSelection\",r,e)}function F(){return t(\"editor.save\")}function M(r,e,o=!1,n=!1){return t(\"editor.navigate\",r,e,o,n)}function A(){return t(\"editor.reloadPage\")}function C(r){return t(\"editor.openUrl\",r)}function k(r,e){return t(\"editor.downloadFile\",r,e)}function L(r,e=\"info\"){return t(\"editor.flashNotification\",r,e)}function E(r,e,o=\"\",n=\"\"){return t(\"editor.filterBox\",r,e,o,n)}function I(r,e,o,n=\"\"){return t(\"editor.showPanel\",r,e,o,n)}function D(r){return t(\"editor.hidePanel\",r)}function T(r,e){return t(\"editor.insertAtPos\",r,e)}function O(r,e,o){return t(\"editor.replaceRange\",r,e,o)}function R(r,e=!1){return t(\"editor.moveCursor\",r,e)}function B(r){return t(\"editor.insertAtCursor\",r)}function U(r){return t(\"editor.dispatch\",r)}function q(r,e=\"\"){return t(\"editor.prompt\",r,e)}function H(r){return t(\"editor.confirm\",r)}function N(r){return t(\"editor.getUiOption\",r)}function j(r,e){return t(\"editor.setUiOption\",r,e)}function K(r){return t(\"editor.vimEx\",r)}var l=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,o){return t(\"space.writePage\",e,o)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,o,n){return t(\"space.writeAttachment\",e,o,n)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,o){return t(\"space.readFile\",e,o)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,o,n){return t(\"space.writeFile\",e,o,n)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},J=new l;async function g(){await s.showPanel(\"bhs\",1,`\n    <style>\n    #close {\n      width: 100%;\n    }\n    #client-log-header {\n        position: absolute;\n        left: 0;\n        top: 35px;\n    }\n    #server-log-header {\n        position: absolute;\n        right: 0;\n        top: 35px;\n        width: 50%;\n    }\n    #client-log {\n        position: absolute;\n        left: 0;\n        top: 60px;\n        bottom: 0;\n        width: 50%;\n        overflow: scroll;\n    }\n    #server-log {\n        position: absolute;\n        right: 0;\n        top: 60px;\n        bottom: 0;\n        width: 50%;\n        overflow: scroll;\n    }\n    </style>\n    <button onclick=\"self.close()\" id=\"close\">Close</button>\n    <div id=\"client-log-header\">Client logs (max 100)</div>\n    <div id=\"client-log\">Loading...</div>\n    <div id=\"server-log-header\">Server logs (max 100)</div>\n    <div id=\"server-log\">Loading...</div>`,`\n      const clientDiv = document.getElementById(\"client-log\");\n      clientDiv.scrollTop = clientDiv.scrollHeight;\n      const serverDiv = document.getElementById(\"server-log\");\n      serverDiv.scrollTop = serverDiv.scrollHeight;\n\n      self.close = () => {\n        syscall(\"event.dispatch\", \"log:hide\");\n      };\n\n      syscall(\"system.getEnv\").then((env) => {\n        const clientServerMode = !!env;\n        if (!clientServerMode) {\n          // Running in hybrid mode (mobile), so let's ignore server logs (they're the same as client logs)\n          serverDiv.style.display = \"none\";\n          clientDiv.style.width = \"100%\";\n          document.getElementById(\"server-log-header\").style.display = \"none\";\n        }\n  \n        setInterval(() => {\n          Promise.resolve().then(async () => {\n            if(clientServerMode) {\n              const serverLogs = await syscall(\"sandbox.getServerLogs\");\n              serverDiv.innerHTML = \"<pre>\" + serverLogs.map((le) => \"[\" + le.level + \"] \" + le.message).join(\"\\\\n\") + \"</pre>\";\n            }\n            const clientLogs = await syscall(\"sandbox.getLogs\");\n            clientDiv.innerHTML = \"<pre>\" + clientLogs.map((le) => \"[\" + le.level + \"] \" + le.message).join(\"\\\\n\") + \"</pre>\";\n          }).catch(console.error);\n        }, 1000);\n      });\n      `)}var W=g;return P(X);})();\n return mod;})()"
    },
    "hideBhsCommand": {
      "command": {
        "name": "UI: Hide BHS",
        "key": "Ctrl-Alt-b",
        "mac": "Cmd-Alt-b"
      },
      "events": [
        "log:hide"
      ],
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var m=(r,e)=>{for(var o in e)a(r,o,{get:e[o],enumerable:!0})},f=(r,e,o,n)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!p.call(r,i)&&i!==o&&a(r,i,{get:()=>e[i],enumerable:!(n=d(e,i))||n.enumerable});return r};var P=r=>f(a({},\"__esModule\",{value:!0}),r);var X={};m(X,{default:()=>W});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var s={};m(s,{confirm:()=>H,dispatch:()=>U,downloadFile:()=>k,filterBox:()=>L,flashNotification:()=>E,getCurrentPage:()=>y,getCursor:()=>b,getSelection:()=>w,getText:()=>h,getUiOption:()=>N,hidePanel:()=>D,insertAtCursor:()=>R,insertAtPos:()=>T,moveCursor:()=>B,navigate:()=>M,openUrl:()=>C,prompt:()=>q,reloadPage:()=>A,replaceRange:()=>O,save:()=>F,setPage:()=>v,setSelection:()=>S,setUiOption:()=>j,showPanel:()=>I,vimEx:()=>K});function y(){return t(\"editor.getCurrentPage\")}function v(r){return t(\"editor.setPage\",r)}function h(){return t(\"editor.getText\")}function b(){return t(\"editor.getCursor\")}function w(){return t(\"editor.getSelection\")}function S(r,e){return t(\"editor.setSelection\",r,e)}function F(){return t(\"editor.save\")}function M(r,e,o=!1,n=!1){return t(\"editor.navigate\",r,e,o,n)}function A(){return t(\"editor.reloadPage\")}function C(r){return t(\"editor.openUrl\",r)}function k(r,e){return t(\"editor.downloadFile\",r,e)}function E(r,e=\"info\"){return t(\"editor.flashNotification\",r,e)}function L(r,e,o=\"\",n=\"\"){return t(\"editor.filterBox\",r,e,o,n)}function I(r,e,o,n=\"\"){return t(\"editor.showPanel\",r,e,o,n)}function D(r){return t(\"editor.hidePanel\",r)}function T(r,e){return t(\"editor.insertAtPos\",r,e)}function O(r,e,o){return t(\"editor.replaceRange\",r,e,o)}function B(r,e=!1){return t(\"editor.moveCursor\",r,e)}function R(r){return t(\"editor.insertAtCursor\",r)}function U(r){return t(\"editor.dispatch\",r)}function q(r,e=\"\"){return t(\"editor.prompt\",r,e)}function H(r){return t(\"editor.confirm\",r)}function N(r){return t(\"editor.getUiOption\",r)}function j(r,e){return t(\"editor.setUiOption\",r,e)}function K(r){return t(\"editor.vimEx\",r)}var l=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,o){return t(\"space.writePage\",e,o)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,o,n){return t(\"space.writeAttachment\",e,o,n)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,o){return t(\"space.readFile\",e,o)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,o,n){return t(\"space.writeFile\",e,o,n)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},J=new l;async function g(){await s.hidePanel(\"bhs\")}var W=g;return P(X);})();\n return mod;})()"
    },
    "unfurlLink": {
      "command": {
        "name": "Link: Unfurl",
        "key": "Ctrl-Shift-u",
        "mac": "Cmd-Shift-u",
        "contexts": [
          "NakedURL"
        ]
      },
      "code": "(() => { var mod=(()=>{var p=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var c=(t,e)=>{for(var n in e)p(t,n,{get:e[n],enumerable:!0})},b=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of h(e))!v.call(t,i)&&i!==n&&p(t,i,{get:()=>e[i],enumerable:!(o=y(e,i))||o.enumerable});return t};var T=t=>b(p({},\"__esModule\",{value:!0}),t);var pe={};c(pe,{default:()=>de});function g(t,e){if(e<t.from||e>=t.to)return null;if(!t.children)return t;for(let n of t.children){let o=g(n,e);if(o&&o.text!==void 0)return t;if(o)return o}return null}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};c(s,{confirm:()=>j,dispatch:()=>Q,downloadFile:()=>O,filterBox:()=>L,flashNotification:()=>R,getCurrentPage:()=>F,getCursor:()=>A,getSelection:()=>E,getText:()=>M,getUiOption:()=>z,hidePanel:()=>I,insertAtCursor:()=>V,insertAtPos:()=>q,moveCursor:()=>K,navigate:()=>C,openUrl:()=>D,prompt:()=>G,reloadPage:()=>$,replaceRange:()=>B,save:()=>k,setPage:()=>S,setSelection:()=>U,setUiOption:()=>H,showPanel:()=>N,vimEx:()=>J});function F(){return r(\"editor.getCurrentPage\")}function S(t){return r(\"editor.setPage\",t)}function M(){return r(\"editor.getText\")}function A(){return r(\"editor.getCursor\")}function E(){return r(\"editor.getSelection\")}function U(t,e){return r(\"editor.setSelection\",t,e)}function k(){return r(\"editor.save\")}function C(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function $(){return r(\"editor.reloadPage\")}function D(t){return r(\"editor.openUrl\",t)}function O(t,e){return r(\"editor.downloadFile\",t,e)}function R(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function L(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function N(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function I(t){return r(\"editor.hidePanel\",t)}function q(t,e){return r(\"editor.insertAtPos\",t,e)}function B(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function K(t,e=!1){return r(\"editor.moveCursor\",t,e)}function V(t){return r(\"editor.insertAtCursor\",t)}function Q(t){return r(\"editor.dispatch\",t)}function G(t,e=\"\"){return r(\"editor.prompt\",t,e)}function j(t){return r(\"editor.confirm\",t)}function z(t){return r(\"editor.getUiOption\",t)}function H(t,e){return r(\"editor.setUiOption\",t,e)}function J(t){return r(\"editor.vimEx\",t)}var m={};c(m,{parseMarkdown:()=>X});function X(t){return r(\"markdown.parseMarkdown\",t)}var x=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},Z=new x;var f={};c(f,{getEnv:()=>ne,invokeCommand:()=>ee,invokeFunction:()=>_,listCommands:()=>te,reloadPlugs:()=>re});function _(t,e,...n){return r(\"system.invokeFunction\",t,e,...n)}function ee(t){return r(\"system.invokeCommand\",t)}function te(){return r(\"system.listCommands\")}function re(){r(\"system.reloadPlugs\")}function ne(){return r(\"system.getEnv\")}var a=self.syscall;var d={};c(d,{dispatchEvent:()=>ae,listEvents:()=>le});function ae(t,e,n){return new Promise((o,i)=>{let u=-1;n&&(u=setTimeout(()=>{console.log(\"Timeout!\"),i(\"timeout\")},n)),a(\"event.dispatch\",t,e).then(l=>{u!==-1&&clearTimeout(u),o(l)}).catch(i)})}function le(){return a(\"event.list\")}async function P(){let t=await m.parseMarkdown(await s.getText()),e=g(t,await s.getCursor()),n=e.children[0].text;console.log(\"Got URL to unfurl\",n);let o=await d.dispatchEvent(\"unfurl:options\",n),i=[];for(let l of o)i.push(...l);let u=await s.filterBox(\"Unfurl\",i,\"Select the unfurl strategy of your choice\");if(!!u)try{let l=await f.invokeFunction(\"server\",\"unfurlExec\",u.id,n);await s.replaceRange(e?.from,e?.to,l)}catch(l){await s.flashNotification(l.message,\"error\")}}var de=P;return T(pe);})();\n return mod;})()"
    },
    "unfurlExec": {
      "env": "server",
      "code": "(() => { var mod=(()=>{var u=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var m=(n,e)=>{for(var r in e)u(n,r,{get:e[r],enumerable:!0})},v=(n,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of y(e))!h.call(n,i)&&i!==r&&u(n,i,{get:()=>e[i],enumerable:!(o=P(e,i))||o.enumerable});return n};var b=n=>v(u({},\"__esModule\",{value:!0}),n);var L={};m(L,{default:()=>R});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var c=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,r){return t(\"space.writePage\",e,r)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,r,o){return t(\"space.writeAttachment\",e,r,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,r){return t(\"space.readFile\",e,r)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,r,o){return t(\"space.writeFile\",e,r,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},S=new c;var s=self.syscall;var a={};m(a,{dispatchEvent:()=>U,listEvents:()=>k});function U(n,e,r){return new Promise((o,i)=>{let l=-1;r&&(l=setTimeout(()=>{console.log(\"Timeout!\"),i(\"timeout\")},r)),s(\"event.dispatch\",n,e).then(x=>{l!==-1&&clearTimeout(l),o(x)}).catch(i)})}function k(){return s(\"event.list\")}async function g(n,e){let r=await a.dispatchEvent(`unfurl:${n}`,e);if(r.length===0)throw new Error(\"Unfurl failed\");return r[0]}var R=g;return b(L);})();\n return mod;})()"
    },
    "titleUnfurlOptions": {
      "events": [
        "unfurl:options"
      ],
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var P=(n,e)=>{for(var r in e)a(n,r,{get:e[r],enumerable:!0})},y=(n,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of g(e))!x.call(n,s)&&s!==r&&a(n,s,{get:()=>e[s],enumerable:!(o=p(e,s))||o.enumerable});return n};var h=n=>y(a({},\"__esModule\",{value:!0}),n);var O={};P(O,{default:()=>C});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var l=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,r){return t(\"space.writePage\",e,r)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,r,o){return t(\"space.writeAttachment\",e,r,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,r){return t(\"space.readFile\",e,r)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,r,o){return t(\"space.writeFile\",e,r,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},w=new l;var i=self.syscall;function d(){return[{id:\"title-unfurl\",name:\"Extract title\"}]}var C=d;return h(O);})();\n return mod;})()"
    },
    "titleUnfurl": {
      "events": [
        "unfurl:title-unfurl"
      ],
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var P=(n,e)=>{for(var r in e)a(n,r,{get:e[r],enumerable:!0})},y=(n,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of g(e))!x.call(n,s)&&s!==r&&a(n,s,{get:()=>e[s],enumerable:!(o=p(e,s))||o.enumerable});return n};var h=n=>y(a({},\"__esModule\",{value:!0}),n);var D={};P(D,{default:()=>$});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var l=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,r){return t(\"space.writePage\",e,r)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,r,o){return t(\"space.writeAttachment\",e,r,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,r){return t(\"space.readFile\",e,r)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,r,o){return t(\"space.writeFile\",e,r,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},w=new l;var i=self.syscall;var C=/<title[^>]*>\\s*([^<]+)\\s*<\\/title\\s*>/i;async function d(n){let e=await fetch(n);if(e.status<200||e.status>=300)throw console.error(\"Unfurl failed\",await e.text()),new Error(`Failed to fetch: ${await e.statusText}`);let r=await e.text(),o=C.exec(r);if(o)return`[${o[1]}](${n})`;throw new Error(\"No title found\")}var $=d;return h(D);})();\n return mod;})()"
    },
    "embedWidget": {
      "codeWidget": "embed",
      "code": "(() => { var mod=(()=>{var m=Object.create;var n=Object.defineProperty;var a=Object.getOwnPropertyDescriptor;var s=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var c=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,i)=>(typeof require!=\"undefined\"?require:t)[i]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var p=(e,t)=>{for(var i in t)n(e,i,{get:t[i],enumerable:!0})},u=(e,t,i,r)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let o of s(t))!b.call(e,o)&&o!==i&&n(e,o,{get:()=>t[o],enumerable:!(r=a(t,o))||r.enumerable});return e};var f=(e,t,i)=>(i=e!=null?m(g(e)):{},u(t||!e||!e.__esModule?n(i,\"default\",{value:e,enumerable:!0}):i,e)),y=e=>u(n({},\"__esModule\",{value:!0}),e);var C={};p(C,{default:()=>w});var d=f(c(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function l(e){let t=e.match(/youtube\\.com\\/watch\\?v=([^&]+)/);return t||(t=e.match(/youtu.be\\/([^&]+)/),t)?t[1]:null}function h(e){try{let t=d.parse(e),i=t.url,r=l(i);return r&&(i=`https://www.youtube.com/embed/${r}`,t.width=t.width||560,t.height=t.height||315),{url:i,height:t.height,width:t.width}}catch(t){return{html:`ERROR: Could not parse body as YAML: ${t.message}`,script:\"\"}}}var w=h;return y(C);})();\n return mod;})()"
    },
    "statsCommand": {
      "command": {
        "name": "Stats: Show"
      },
      "code": "(() => { var mod=(()=>{var a=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var c=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},f=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of d(e))!p.call(t,i)&&i!==n&&a(t,i,{get:()=>e[i],enumerable:!(o=l(e,i))||o.enumerable});return t};var P=t=>f(a({},\"__esModule\",{value:!0}),t);var Z={};c(Z,{default:()=>Y});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};c(s,{confirm:()=>B,dispatch:()=>L,downloadFile:()=>k,filterBox:()=>I,flashNotification:()=>E,getCurrentPage:()=>y,getCursor:()=>b,getSelection:()=>F,getText:()=>h,getUiOption:()=>D,hidePanel:()=>R,insertAtCursor:()=>q,insertAtPos:()=>T,moveCursor:()=>$,navigate:()=>M,openUrl:()=>C,prompt:()=>N,reloadPage:()=>A,replaceRange:()=>U,save:()=>w,setPage:()=>v,setSelection:()=>S,setUiOption:()=>K,showPanel:()=>O,vimEx:()=>Q});function y(){return r(\"editor.getCurrentPage\")}function v(t){return r(\"editor.setPage\",t)}function h(){return r(\"editor.getText\")}function b(){return r(\"editor.getCursor\")}function F(){return r(\"editor.getSelection\")}function S(t,e){return r(\"editor.setSelection\",t,e)}function w(){return r(\"editor.save\")}function M(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function A(){return r(\"editor.reloadPage\")}function C(t){return r(\"editor.openUrl\",t)}function k(t,e){return r(\"editor.downloadFile\",t,e)}function E(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function I(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function O(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function R(t){return r(\"editor.hidePanel\",t)}function T(t,e){return r(\"editor.insertAtPos\",t,e)}function U(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function $(t,e=!1){return r(\"editor.moveCursor\",t,e)}function q(t){return r(\"editor.insertAtCursor\",t)}function L(t){return r(\"editor.dispatch\",t)}function N(t,e=\"\"){return r(\"editor.prompt\",t,e)}function B(t){return r(\"editor.confirm\",t)}function D(t){return r(\"editor.getUiOption\",t)}function K(t,e){return r(\"editor.setUiOption\",t,e)}function Q(t){return r(\"editor.vimEx\",t)}var m=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},u=new m;function J(t){let e=t.match(/[\\w\\d\\'-]+/gi);return e?e.length:0}function X(t){return Math.ceil(t/225)}async function g(){let t=await s.getText(),e=await u.listPages(),n=J(t),o=X(n);await s.flashNotification(`${t.length} characters; ${n} words; ${o} minutes read; ${e.length} total pages in space.`)}var Y=g;return P(Z);})();\n return mod;})()"
    },
    "readPageCloud": {
      "env": "server",
      "pageNamespace": {
        "pattern": "💭 .+",
        "operation": "readFile"
      },
      "code": "(() => { var mod=(()=>{var s=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var T=(e,r)=>{for(var o in r)s(e,o,{get:r[o],enumerable:!0})},g=(e,r,o,n)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let t of m(r))!P.call(e,t)&&t!==o&&s(e,t,{get:()=>r[t],enumerable:!(n=h(r,t))||n.enumerable});return e};var x=e=>g(s({},\"__esModule\",{value:!0}),e);var M={};T(M,{default:()=>w});function a(e,r){if(e.children){let o=e.children.slice();for(let n of o){let t=r(n);if(t!==void 0){let i=e.children.indexOf(n);t?e.children.splice(i,1,t):e.children.splice(i,1)}else a(n,r)}}}function l(e){let r=[];if(e.text!==void 0)return e.text;for(let o of e.children)r.push(l(o));return r.join(\"\")}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var d=self.syscall;function f(e){return d(\"markdown.parseMarkdown\",e)}function y(e){let r=\"\",o=e.byteLength;for(let n=0;n<o;n++)r+=String.fromCharCode(e[n]);return btoa(r)}function u(e,r){return`data:${e};base64,${y(r)}`}var c=\"\\u{1F4AD} \";async function p(e,r){let o=e.substring(c.length,e.length-3),n=o;n.includes(\"/\")||(n+=\"/index\"),n.startsWith(\"127.0.0.1\")?n=`http://${n}`:n=`https://${n}`;let t=\"\";try{let i=await fetch(`${encodeURI(n)}.md`);t=await i.text(),i.ok||(t=`ERROR: ${t}`)}catch(i){console.error(\"ERROR thrown\",i.message),t=`ERROR: ${i.message}`}return t=await b(t,`${c}${o.split(\"/\")[0]}/`),{data:r===\"utf8\"?t:u(\"text/markdown\",new TextEncoder().encode(t)),meta:{name:e,contentType:\"text/markdown\",lastModified:0,size:t.length,perm:\"ro\"}}}async function b(e,r){let o=await f(e);return a(o,n=>{n.type===\"WikiLinkPage\"&&(n.children[0].text.startsWith(c)||(n.children[0].text=r+n.children[0].text))}),e=l(o),e}var w=p;return x(M);})();\n return mod;})()"
    },
    "getPageMetaCloud": {
      "env": "server",
      "pageNamespace": {
        "pattern": "💭 .+",
        "operation": "getFileMeta"
      },
      "code": "(() => { var mod=(()=>{var o=Object.defineProperty;var a=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var c=Object.prototype.hasOwnProperty;var d=(e,r)=>{for(var t in r)o(e,t,{get:r[t],enumerable:!0})},f=(e,r,t,i)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let n of l(r))!c.call(e,n)&&n!==t&&o(e,n,{get:()=>r[n],enumerable:!(i=a(r,n))||i.enumerable});return e};var u=e=>f(o({},\"__esModule\",{value:!0}),e);var m={};d(m,{default:()=>h});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var p=self.syscall;function s(e){return Promise.resolve({name:e,size:0,contentType:\"text/markdown\",lastModified:0,perm:\"ro\"})}var h=s;return u(m);})();\n return mod;})()"
    },
    "toggleVimMode": {
      "command": {
        "name": "Editor: Toggle Vim Mode"
      },
      "code": "(() => { var mod=(()=>{var P=Object.create;var a=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var T=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(r,n)=>(typeof require!=\"undefined\"?require:r)[n]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var u=(e,r)=>{for(var n in r)a(e,n,{get:r[n],enumerable:!0})},d=(e,r,n,o)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let i of y(r))!v.call(e,i)&&i!==n&&a(e,i,{get:()=>r[i],enumerable:!(o=x(r,i))||o.enumerable});return e};var M=(e,r,n)=>(n=e!=null?P(h(e)):{},d(r||!e||!e.__esModule?a(n,\"default\",{value:e,enumerable:!0}):n,e)),w=e=>d(a({},\"__esModule\",{value:!0}),e);var oe={};u(oe,{default:()=>ne});var s={};u(s,{del:()=>S,get:()=>F,set:()=>b});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;function b(e,r){return t(\"clientStore.set\",e,r)}function F(e){return t(\"clientStore.get\",e)}function S(e){return t(\"clientStore.delete\",e)}var c={};u(c,{confirm:()=>H,dispatch:()=>z,downloadFile:()=>V,filterBox:()=>q,flashNotification:()=>Y,getCurrentPage:()=>A,getCursor:()=>E,getSelection:()=>N,getText:()=>k,getUiOption:()=>J,hidePanel:()=>D,insertAtCursor:()=>j,insertAtPos:()=>K,moveCursor:()=>$,navigate:()=>R,openUrl:()=>L,prompt:()=>G,reloadPage:()=>U,replaceRange:()=>Q,save:()=>O,setPage:()=>C,setSelection:()=>I,setUiOption:()=>W,showPanel:()=>B,vimEx:()=>X});function A(){return t(\"editor.getCurrentPage\")}function C(e){return t(\"editor.setPage\",e)}function k(){return t(\"editor.getText\")}function E(){return t(\"editor.getCursor\")}function N(){return t(\"editor.getSelection\")}function I(e,r){return t(\"editor.setSelection\",e,r)}function O(){return t(\"editor.save\")}function R(e,r,n=!1,o=!1){return t(\"editor.navigate\",e,r,n,o)}function U(){return t(\"editor.reloadPage\")}function L(e){return t(\"editor.openUrl\",e)}function V(e,r){return t(\"editor.downloadFile\",e,r)}function Y(e,r=\"info\"){return t(\"editor.flashNotification\",e,r)}function q(e,r,n=\"\",o=\"\"){return t(\"editor.filterBox\",e,r,n,o)}function B(e,r,n,o=\"\"){return t(\"editor.showPanel\",e,r,n,o)}function D(e){return t(\"editor.hidePanel\",e)}function K(e,r){return t(\"editor.insertAtPos\",e,r)}function Q(e,r,n){return t(\"editor.replaceRange\",e,r,n)}function $(e,r=!1){return t(\"editor.moveCursor\",e,r)}function j(e){return t(\"editor.insertAtCursor\",e)}function z(e){return t(\"editor.dispatch\",e)}function G(e,r=\"\"){return t(\"editor.prompt\",e,r)}function H(e){return t(\"editor.confirm\",e)}function J(e){return t(\"editor.getUiOption\",e)}function W(e,r){return t(\"editor.setUiOption\",e,r)}function X(e){return t(\"editor.vimEx\",e)}var l=class{listPages(r=!1){return t(\"space.listPages\",r)}getPageMeta(r){return t(\"space.getPageMeta\",r)}readPage(r){return t(\"space.readPage\",r)}writePage(r,n){return t(\"space.writePage\",r,n)}deletePage(r){return t(\"space.deletePage\",r)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(r){return t(\"space.getAttachmentMeta\",r)}readAttachment(r){return t(\"space.readAttachment\",r)}writeAttachment(r,n,o){return t(\"space.writeAttachment\",r,n,o)}deleteAttachment(r){return t(\"space.deleteAttachment\",r)}readFile(r,n){return t(\"space.readFile\",r,n)}getFileMeta(r){return t(\"space.getFileMeta\",r)}writeFile(r,n,o){return t(\"space.writeFile\",r,n,o)}deleteFile(r){return t(\"space.deleteFile\",r)}listFiles(r){return t(\"space.listFiles\",r)}},f=new l;var p=M(T(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function g(){let e=await s.get(\"vimMode\");e=!e,await c.setUiOption(\"vimMode\",e),await s.set(\"vimMode\",e)}var ne=g;return w(oe);})();\n return mod;})()"
    },
    "loadVimRc": {
      "command": {
        "name": "Editor: Vim: Load VIMRC"
      },
      "events": [
        "editor:modeswitch"
      ],
      "code": "(() => { var mod=(()=>{var w=Object.create;var a=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var S=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var C=(r=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(r,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):r)(function(r){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+r+'\" is not supported')});var l=(r,e)=>{for(var n in e)a(r,n,{get:e[n],enumerable:!0})},x=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of F(e))!A.call(r,i)&&i!==n&&a(r,i,{get:()=>e[i],enumerable:!(o=b(e,i))||o.enumerable});return r};var k=(r,e,n)=>(n=r!=null?w(S(r)):{},x(e||!r||!r.__esModule?a(n,\"default\",{value:r,enumerable:!0}):n,r)),E=r=>x(a({},\"__esModule\",{value:!0}),r);var ue={};l(ue,{default:()=>ce});function d(r,e){if(e(r))return[r];let n=[];if(r.children)for(let o of r.children)n=[...n,...d(o,e)];return n}function m(r,e){return d(r,n=>n.type===e)[0]}function y(r,e){d(r,e)}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var s={};l(s,{confirm:()=>Z,dispatch:()=>W,downloadFile:()=>D,filterBox:()=>Q,flashNotification:()=>K,getCurrentPage:()=>N,getCursor:()=>R,getSelection:()=>U,getText:()=>O,getUiOption:()=>_,hidePanel:()=>j,insertAtCursor:()=>J,insertAtPos:()=>z,moveCursor:()=>H,navigate:()=>Y,openUrl:()=>B,prompt:()=>X,reloadPage:()=>q,replaceRange:()=>G,save:()=>V,setPage:()=>I,setSelection:()=>L,setUiOption:()=>ee,showPanel:()=>$,vimEx:()=>re});function N(){return t(\"editor.getCurrentPage\")}function I(r){return t(\"editor.setPage\",r)}function O(){return t(\"editor.getText\")}function R(){return t(\"editor.getCursor\")}function U(){return t(\"editor.getSelection\")}function L(r,e){return t(\"editor.setSelection\",r,e)}function V(){return t(\"editor.save\")}function Y(r,e,n=!1,o=!1){return t(\"editor.navigate\",r,e,n,o)}function q(){return t(\"editor.reloadPage\")}function B(r){return t(\"editor.openUrl\",r)}function D(r,e){return t(\"editor.downloadFile\",r,e)}function K(r,e=\"info\"){return t(\"editor.flashNotification\",r,e)}function Q(r,e,n=\"\",o=\"\"){return t(\"editor.filterBox\",r,e,n,o)}function $(r,e,n,o=\"\"){return t(\"editor.showPanel\",r,e,n,o)}function j(r){return t(\"editor.hidePanel\",r)}function z(r,e){return t(\"editor.insertAtPos\",r,e)}function G(r,e,n){return t(\"editor.replaceRange\",r,e,n)}function H(r,e=!1){return t(\"editor.moveCursor\",r,e)}function J(r){return t(\"editor.insertAtCursor\",r)}function W(r){return t(\"editor.dispatch\",r)}function X(r,e=\"\"){return t(\"editor.prompt\",r,e)}function Z(r){return t(\"editor.confirm\",r)}function _(r){return t(\"editor.getUiOption\",r)}function ee(r,e){return t(\"editor.setUiOption\",r,e)}function re(r){return t(\"editor.vimEx\",r)}var c={};l(c,{parseMarkdown:()=>ne});function ne(r){return t(\"markdown.parseMarkdown\",r)}var f=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},p=new f;var v=k(C(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function T(r,e){let n=await p.readPage(r),o=await c.parseMarkdown(n),i;return y(o,u=>{if(u.type!==\"FencedCode\")return!1;let g=m(u,\"CodeInfo\");if(e&&!g||e&&!e.includes(g.children[0].text))return!1;let P=m(u,\"CodeText\");return P?(i=P.children[0].text,!0):!1}),i}async function M(){if(!await s.getUiOption(\"vimMode\")){console.log(\"Not in vim mode\");return}try{let e=await T(\"VIMRC\");if(e){console.log(\"Now running vim ex commands from VIMRC\");let n=e.split(`\n`);for(let o of n)try{console.log(\"Running vim ex command\",o),await s.vimEx(o)}catch(i){await s.flashNotification(i.message,\"error\")}}}catch{}}var ce=M;return E(ue);})();\n return mod;})()"
    }
  },
  "assets": {}
}