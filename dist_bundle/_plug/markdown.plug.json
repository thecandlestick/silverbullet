{
  "name": "markdown",
  "imports": [
    "https://get.silverbullet.md/global.plug.json"
  ],
  "assets": {
    "assets/handler.js": "data:application/javascript;base64,ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJvb3QiKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIChlKSA9PiB7CiAgLy8gY29uc29sZS5sb2coIkdvdCBjbGljayIsIGUudGFyZ2V0KQogIGNvbnN0IGRhdGFTZXQgPSBlLnRhcmdldC5kYXRhc2V0OwogIGlmIChkYXRhU2V0WyJvbmNsaWNrIl0pIHsKICAgIHN5c2NhbGwoImV2ZW50LmRpc3BhdGNoIiwgInByZXZpZXc6Y2xpY2siLCBkYXRhU2V0WyJvbmNsaWNrIl0pLmNhdGNoKChlKSA9PgogICAgICBjb25zb2xlLmxvZygiRXJyb3IiLCBlKQogICAgKTsKICB9IGVsc2UgaWYgKGRhdGFTZXRbInBvcyJdKSB7CiAgICBzeXNjYWxsKAogICAgICAiZXZlbnQuZGlzcGF0Y2giLAogICAgICAicHJldmlldzpjbGljayIsCiAgICAgIEpTT04uc3RyaW5naWZ5KFsicG9zIiwgZGF0YVNldFsicG9zIl1dKSwKICAgICkuY2F0Y2goKGUpID0+IGNvbnNvbGUubG9nKCJFcnJvciIsIGUpKTsKICB9Cn0pOwo=",
    "assets/styles.css": "data:text/css;base64,Ym9keSB7CiAgZm9udC1mYW1pbHk6IGdlb3JnaWEsdGltZXMsc2VyaWY7CiAgZm9udC1zaXplOiAxNHB0OwogIG1heC13aWR0aDogODAwcHg7CiAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgbWFyZ2luLXJpZ2h0OiBhdXRvOwogIHBhZGRpbmctbGVmdDogMjBweDsKICBwYWRkaW5nLXJpZ2h0OiAyMHB4Owp9CgppbWcgewogIG1heC13aWR0aDogMTAwJTsKfQoKdGFibGUuZnJvbnQtbWF0dGVyIHsKICBib3JkZXI6IDFweCBzb2xpZCAjNTU1OwogIGZvbnQtc2l6ZTogNzUlOwp9Cgp0YWJsZS5mcm9udC1tYXR0ZXIgLmtleSB7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KCnRhYmxlIHsKICB3aWR0aDogMTAwJTsKICBib3JkZXItc3BhY2luZzogMDsKfQoKdWwgbGkgcCB7CiAgbWFyZ2luOiAwOwp9Cgp0aGVhZCB0ciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzOwogICAgY29sb3I6ICNlZWU7Cn0KCnRoLCB0ZCB7CiAgICBwYWRkaW5nOiA4cHg7Cn0KCnRib2R5IHRyOm50aC1vZi10eXBlKGV2ZW4pIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmM2YzZjM7Cn0KCmFbaHJlZl0gewogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKfQoKYmxvY2txdW90ZSB7CiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjMzMzOwogIG1hcmdpbi1sZWZ0OiAycHg7CiAgcGFkZGluZy1sZWZ0OiAxMHB4Owp9CgpociB7CiAgICBtYXJnaW46IDFlbSAwIDFlbSAwOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgYm9yZGVyLWNvbG9yOiAjNzc3OwogICAgYm9yZGVyLXdpZHRoOiAwOwogICAgYm9yZGVyLXN0eWxlOiBkb3R0ZWQ7Cn0KCmhyOmFmdGVyIHsKICAgIGNvbnRlbnQ6ICLCt8K3wrciOwogICAgbGV0dGVyLXNwYWNpbmc6IDFlbTsKfQoKc3Bhbi5oaWdobGlnaHQgewogIGJhY2tncm91bmQtY29sb3I6IHllbGxvdzsKfQo="
  },
  "requiredPermissions": [
    "fs"
  ],
  "functions": {
    "toggle": {
      "command": {
        "name": "Markdown Preview: Toggle",
        "key": "Ctrl-p",
        "mac": "Cmd-p"
      },
      "code": "(() => { var mod=(()=>{var F=Object.create;var u=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var v=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(r,n)=>(typeof require!=\"undefined\"?require:r)[n]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var s=(e,r)=>{for(var n in r)u(e,n,{get:r[n],enumerable:!0})},w=(e,r,n,o)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let i of C(r))!N.call(e,i)&&i!==n&&u(e,i,{get:()=>r[i],enumerable:!(o=k(r,i))||o.enumerable});return e};var T=(e,r,n)=>(n=e!=null?F(E(e)):{},w(r||!e||!e.__esModule?u(n,\"default\",{value:e,enumerable:!0}):n,e)),I=e=>w(u({},\"__esModule\",{value:!0}),e);var Te={};s(Te,{default:()=>we});var a={};s(a,{del:()=>L,get:()=>Y,set:()=>O});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;function O(e,r){return t(\"clientStore.set\",e,r)}function Y(e){return t(\"clientStore.get\",e)}function L(e){return t(\"clientStore.delete\",e)}var c={};s(c,{confirm:()=>ne,dispatch:()=>re,downloadFile:()=>K,filterBox:()=>_,flashNotification:()=>Q,getCurrentPage:()=>R,getCursor:()=>j,getSelection:()=>q,getText:()=>B,getUiOption:()=>oe,hidePanel:()=>J,insertAtCursor:()=>ee,insertAtPos:()=>W,moveCursor:()=>Z,navigate:()=>$,openUrl:()=>H,prompt:()=>te,reloadPage:()=>D,replaceRange:()=>X,save:()=>V,setPage:()=>U,setSelection:()=>G,setUiOption:()=>ie,showPanel:()=>z,vimEx:()=>se});function R(){return t(\"editor.getCurrentPage\")}function U(e){return t(\"editor.setPage\",e)}function B(){return t(\"editor.getText\")}function j(){return t(\"editor.getCursor\")}function q(){return t(\"editor.getSelection\")}function G(e,r){return t(\"editor.setSelection\",e,r)}function V(){return t(\"editor.save\")}function $(e,r,n=!1,o=!1){return t(\"editor.navigate\",e,r,n,o)}function D(){return t(\"editor.reloadPage\")}function H(e){return t(\"editor.openUrl\",e)}function K(e,r){return t(\"editor.downloadFile\",e,r)}function Q(e,r=\"info\"){return t(\"editor.flashNotification\",e,r)}function _(e,r,n=\"\",o=\"\"){return t(\"editor.filterBox\",e,r,n,o)}function z(e,r,n,o=\"\"){return t(\"editor.showPanel\",e,r,n,o)}function J(e){return t(\"editor.hidePanel\",e)}function W(e,r){return t(\"editor.insertAtPos\",e,r)}function X(e,r,n){return t(\"editor.replaceRange\",e,r,n)}function Z(e,r=!1){return t(\"editor.moveCursor\",e,r)}function ee(e){return t(\"editor.insertAtCursor\",e)}function re(e){return t(\"editor.dispatch\",e)}function te(e,r=\"\"){return t(\"editor.prompt\",e,r)}function ne(e){return t(\"editor.confirm\",e)}function oe(e){return t(\"editor.getUiOption\",e)}function ie(e,r){return t(\"editor.setUiOption\",e,r)}function se(e){return t(\"editor.vimEx\",e)}var l={};s(l,{parseMarkdown:()=>ce});function ce(e){return t(\"markdown.parseMarkdown\",e)}var p=class{listPages(r=!1){return t(\"space.listPages\",r)}getPageMeta(r){return t(\"space.getPageMeta\",r)}readPage(r){return t(\"space.readPage\",r)}writePage(r,n){return t(\"space.writePage\",r,n)}deletePage(r){return t(\"space.deletePage\",r)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(r){return t(\"space.getAttachmentMeta\",r)}readAttachment(r){return t(\"space.readAttachment\",r)}writeAttachment(r,n,o){return t(\"space.writeAttachment\",r,n,o)}deleteAttachment(r){return t(\"space.deleteAttachment\",r)}readFile(r,n){return t(\"space.readFile\",r,n)}getFileMeta(r){return t(\"space.getFileMeta\",r)}writeFile(r,n,o){return t(\"space.writeFile\",r,n,o)}deleteFile(r){return t(\"space.deleteFile\",r)}listFiles(r){return t(\"space.listFiles\",r)}},d=new p;var m={};s(m,{getEnv:()=>pe,invokeCommand:()=>de,invokeFunction:()=>le,listCommands:()=>me,reloadPlugs:()=>fe});function le(e,r,...n){return t(\"system.invokeFunction\",e,r,...n)}function de(e){return t(\"system.invokeCommand\",e)}function me(){return t(\"system.listCommands\")}function fe(){t(\"system.reloadPlugs\")}function pe(){return t(\"system.getEnv\")}function g(e,r){if(r(e))return[e];let n=[];if(e.children)for(let o of e.children)n=[...n,...g(o,r)];return n}function P(e,r){return g(e,n=>n.type===r)[0]}function S(e,r){g(e,r)}var x=T(v(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function xe(e,r){let n=await d.readPage(e),o=await l.parseMarkdown(n),i;return S(o,f=>{if(f.type!==\"FencedCode\")return!1;let y=P(f,\"CodeInfo\");if(r&&!y||r&&!r.includes(y.children[0].text))return!1;let h=P(f,\"CodeText\");return h?(i=h.children[0].text,!0):!1}),i}async function b(e,r=[\"yaml\"]){let n=await xe(e,r);if(n!==void 0)try{return x.parse(n)}catch(o){throw console.error(\"YAML Page parser error\",o),new Error(`YAML Error: ${o.message}`)}}var ye=T(v(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var he=\"SETTINGS\";async function M(e){try{let r=await b(he,[\"yaml\"])||{},n={};for(let[o,i]of Object.entries(e))o in r?n[o]=r[o]:n[o]=i;return n}catch(r){if(r.message===\"Page not found\")return e;throw r}}async function A(){let e=!!await a.get(\"enableMarkdownPreview\");await a.set(\"enableMarkdownPreview\",!e),e?await ve():await m.invokeFunction(\"client\",\"preview\")}async function ve(){let e=await M({previewOnRHS:!0});await c.hidePanel(e.previewOnRHS?\"rhs\":\"lhs\")}var we=A;return I(Te);})();\n return mod;})()"
    },
    "preview": {
      "env": "client",
      "events": [
        "plug:load",
        "editor:updated",
        "editor:pageLoaded",
        "editor:pageReloaded"
      ],
      "code": "(() => { var mod=(()=>{var L=Object.create;var p=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var I=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(r,t)=>(typeof require!=\"undefined\"?require:r)[t]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var g=(e,r)=>{for(var t in r)p(e,t,{get:r[t],enumerable:!0})},F=(e,r,t,n)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let i of U(r))!H.call(e,i)&&i!==t&&p(e,i,{get:()=>r[i],enumerable:!(n=R(r,i))||n.enumerable});return e};var B=(e,r,t)=>(t=e!=null?L(N(e)):{},F(r||!e||!e.__esModule?p(t,\"default\",{value:e,enumerable:!0}):t,e)),q=e=>F(p({},\"__esModule\",{value:!0}),e);var $e={};g($e,{default:()=>Oe});var y={};g(y,{del:()=>W,get:()=>J,set:()=>j});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var o=self.syscall;function j(e,r){return o(\"clientStore.set\",e,r)}function J(e){return o(\"clientStore.get\",e)}function W(e){return o(\"clientStore.delete\",e)}var m={};g(m,{confirm:()=>me,dispatch:()=>de,downloadFile:()=>re,filterBox:()=>ne,flashNotification:()=>te,getCurrentPage:()=>X,getCursor:()=>Y,getSelection:()=>Q,getText:()=>V,getUiOption:()=>fe,hidePanel:()=>ie,insertAtCursor:()=>ce,insertAtPos:()=>se,moveCursor:()=>le,navigate:()=>_,openUrl:()=>ee,prompt:()=>ue,reloadPage:()=>Z,replaceRange:()=>ae,save:()=>G,setPage:()=>K,setSelection:()=>z,setUiOption:()=>pe,showPanel:()=>oe,vimEx:()=>ge});function X(){return o(\"editor.getCurrentPage\")}function K(e){return o(\"editor.setPage\",e)}function V(){return o(\"editor.getText\")}function Y(){return o(\"editor.getCursor\")}function Q(){return o(\"editor.getSelection\")}function z(e,r){return o(\"editor.setSelection\",e,r)}function G(){return o(\"editor.save\")}function _(e,r,t=!1,n=!1){return o(\"editor.navigate\",e,r,t,n)}function Z(){return o(\"editor.reloadPage\")}function ee(e){return o(\"editor.openUrl\",e)}function re(e,r){return o(\"editor.downloadFile\",e,r)}function te(e,r=\"info\"){return o(\"editor.flashNotification\",e,r)}function ne(e,r,t=\"\",n=\"\"){return o(\"editor.filterBox\",e,r,t,n)}function oe(e,r,t,n=\"\"){return o(\"editor.showPanel\",e,r,t,n)}function ie(e){return o(\"editor.hidePanel\",e)}function se(e,r){return o(\"editor.insertAtPos\",e,r)}function ae(e,r,t){return o(\"editor.replaceRange\",e,r,t)}function le(e,r=!1){return o(\"editor.moveCursor\",e,r)}function ce(e){return o(\"editor.insertAtCursor\",e)}function de(e){return o(\"editor.dispatch\",e)}function ue(e,r=\"\"){return o(\"editor.prompt\",e,r)}function me(e){return o(\"editor.confirm\",e)}function fe(e){return o(\"editor.getUiOption\",e)}function pe(e,r){return o(\"editor.setUiOption\",e,r)}function ge(e){return o(\"editor.vimEx\",e)}function M(e){return o(\"markdown.parseMarkdown\",e)}var x=class{listPages(r=!1){return o(\"space.listPages\",r)}getPageMeta(r){return o(\"space.getPageMeta\",r)}readPage(r){return o(\"space.readPage\",r)}writePage(r,t){return o(\"space.writePage\",r,t)}deletePage(r){return o(\"space.deletePage\",r)}listPlugs(){return o(\"space.listPlugs\")}listAttachments(){return o(\"space.listAttachments\")}getAttachmentMeta(r){return o(\"space.getAttachmentMeta\",r)}readAttachment(r){return o(\"space.readAttachment\",r)}writeAttachment(r,t,n){return o(\"space.writeAttachment\",r,t,n)}deleteAttachment(r){return o(\"space.deleteAttachment\",r)}readFile(r,t){return o(\"space.readFile\",r,t)}getFileMeta(r){return o(\"space.getFileMeta\",r)}writeFile(r,t,n){return o(\"space.writeFile\",r,t,n)}deleteFile(r){return o(\"space.deleteFile\",r)}listFiles(r){return o(\"space.listFiles\",r)}},P=new x;var f={};g(f,{readAsset:()=>ve});function Te(e){let r=atob(e),t=r.length,n=new Uint8Array(t);for(let i=0;i<t;i++)n[i]=r.charCodeAt(i);return n}function S(e){let r=e.split(\",\",2)[1];return Te(r)}var c=self.syscall;async function ve(e,r=\"utf8\"){let t=await c(\"asset.readAsset\",e);switch(r){case\"utf8\":return new TextDecoder().decode(S(t));case\"dataurl\":return t}}function b(e,r){if(r(e))return[e];let t=[];if(e.children)for(let n of e.children)t=[...t,...b(n,r)];return t}function u(e,r){return b(e,t=>t.type===r)[0]}function C(e,r){b(e,r)}function d(e){let r=[];if(e.text!==void 0)return e.text;for(let t of e.children)r.push(d(t));return r.join(\"\")}var h=B(I(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var v=\"FRAGMENT\";function T(e){return e.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\")}function w(e){if(!e)return\"\";if(typeof e==\"string\")return T(e);let r=e.attrs?\" \"+Object.entries(e.attrs).filter(([,n])=>n!==void 0).map(([n,i])=>`${n}=\"${T(i)}\"`).join(\" \"):\"\",t=typeof e.body==\"string\"?T(e.body):e.body.map(w).join(\"\");return e.name===v?t:e.body?`<${e.name}${r}>${t}</${e.name}>`:`<${e.name}${r}/>`}function a(e){let r=[];for(let t of e)t&&r.push(t);return r}function Se(e,r={}){C(e,t=>{if(t.type===\"Paragraph\"&&r.smartHardBreak)for(let n of t.children)!n.type&&n.text===`\n`&&(n.type=\"HardBreak\");return!1})}function k(e,r={}){let t=Ce(e,r);return r.annotationPositions?t?(typeof t==\"string\"||e.from&&(t.attrs||(t.attrs={}),t.attrs[\"data-pos\"]=\"\"+e.from),t):null:t}function Ce(e,r={}){if(e.type?.endsWith(\"Mark\")||e.type?.endsWith(\"Delimiter\"))return null;switch(e.type){case\"Document\":return{name:v,body:a(t(e.children))};case\"FrontMatter\":if(r.renderFrontMatter){let n=d(e.children[1]),i=h.parse(n),s=[];for(let[l,E]of Object.entries(i))s.push({name:\"tr\",body:[{name:\"td\",attrs:{class:\"key\"},body:l},{name:\"td\",attrs:{class:\"value\"},body:h.stringify(E)}]});return{name:\"table\",attrs:{class:\"front-matter\"},body:s}}else return null;case\"CommentBlock\":return null;case\"ATXHeading1\":return{name:\"h1\",body:a(t(e.children))};case\"ATXHeading2\":return{name:\"h2\",body:a(t(e.children))};case\"ATXHeading3\":return{name:\"h3\",body:a(t(e.children))};case\"ATXHeading4\":return{name:\"h4\",body:a(t(e.children))};case\"ATXHeading5\":return{name:\"h5\",body:a(t(e.children))};case\"Paragraph\":return{name:\"p\",body:a(t(e.children))};case\"FencedCode\":case\"CodeBlock\":return e.children=e.children.filter(n=>n.type),{name:\"pre\",body:a(t(e.children))};case\"CodeInfo\":return null;case\"CodeText\":return e.children[0].text;case\"Blockquote\":return{name:\"blockquote\",body:a(t(e.children))};case\"HardBreak\":return{name:\"br\",body:\"\"};case\"Emphasis\":return{name:\"em\",body:a(t(e.children))};case\"Highlight\":return{name:\"span\",attrs:{class:\"highlight\"},body:a(t(e.children))};case\"Strikethrough\":return{name:\"del\",body:a(t(e.children))};case\"InlineCode\":return{name:\"tt\",body:a(t(e.children))};case\"BulletList\":return{name:\"ul\",body:a(t(e.children))};case\"OrderedList\":return{name:\"ol\",body:a(t(e.children))};case\"ListItem\":return{name:\"li\",body:a(t(e.children))};case\"StrongEmphasis\":return{name:\"strong\",body:a(t(e.children))};case\"HorizontalRule\":return{name:\"hr\",body:\"\"};case\"Link\":{let n=e.children[1].text,i=u(e,\"URL\");if(!i)return d(e);let s=i.children[0].text;return s.indexOf(\"://\")===-1&&(s=`${r.attachmentUrlPrefix||\"\"}${s}`),{name:\"a\",attrs:{href:s},body:n}}case\"Image\":{let n=e.children[1].text,i=u(e,\"URL\");if(!i)return d(e);let s=i.children[0].text;return s.indexOf(\"://\")===-1&&(s=`${r.attachmentUrlPrefix||\"\"}${s}`),{name:\"img\",attrs:{src:s,alt:n},body:\"\"}}case\"WikiLink\":{let n=u(e,\"WikiLinkPage\").children[0].text,i=n,s=u(e,\"WikiLinkAlias\");return s&&(i=s.children[0].text),{name:\"a\",attrs:{href:`/${n.replaceAll(\" \",\"_\").replace(\"@\",\"#\")}`},body:i}}case\"NakedURL\":{let n=e.children[0].text;return{name:\"a\",attrs:{href:n},body:n}}case\"Hashtag\":return{name:\"strong\",body:e.children[0].text};case\"Task\":return{name:\"span\",body:a(t(e.children))};case\"TaskMarker\":return{name:\"input\",attrs:{type:\"checkbox\",checked:e.children[0].text!==\"[ ]\"?\"checked\":void 0,\"data-onclick\":JSON.stringify([\"task\",e.to])},body:\"\"};case\"NamedAnchor\":return{name:\"a\",attrs:{name:e.children[0].text?.substring(1)},body:\"\"};case\"CommandLink\":{let n=e.children[1].children[0].text;return{name:\"button\",attrs:{\"data-onclick\":JSON.stringify([\"command\",n])},body:n}}case\"DeadlineDate\":return d(e);case\"Table\":return{name:\"table\",body:a(t(e.children))};case\"TableHeader\":return{name:\"thead\",body:[{name:\"tr\",body:a(t(e.children))}]};case\"TableCell\":return{name:\"td\",body:a(t(e.children))};case\"TableRow\":{let n=e.children,i=[],s=!1;for(let l of n)l.type===\"TableDelimiter\"&&s&&i.push({type:\"TableCell\",children:[]}),l.type===\"TableDelimiter\"&&(s=!0),l.type===\"TableCell\"&&(s=!1),i.push(l);return{name:\"tr\",body:a(t(i))}}case\"Directive\":{let n=u(e,\"DirectiveBody\");return k(n.children[0],r)}case void 0:return e.text;default:if(r.failOnUnknown)throw console.error(\"Not handling\",JSON.stringify(e,null,2)),new Error(`Unknown markdown node type ${e.type}`);return console.warn(\"Not handling\",JSON.stringify(e,null,2)),d(e)}function t(n){return n.map(i=>k(i,r))}}async function O(e,r){if(await r(e),typeof e!=\"string\"&&e.body)for(let t of e.body)await O(t,r)}async function $(e,r={}){Se(e,r);let t=k(e,r);return t&&r.inlineAttachments&&await O(t,async n=>{typeof n!=\"string\"&&n.name===\"img\"&&(n.attrs.src=await r.inlineAttachments(n.attrs.src))}),w(t)}async function D(){if(!await y.get(\"enableMarkdownPreview\"))return;let e=await m.getText(),r=await M(e),t=await f.readAsset(\"assets/styles.css\"),n=await f.readAsset(\"assets/handler.js\"),i=await $(r,{smartHardBreak:!0,annotationPositions:!0,renderFrontMatter:!0,inlineAttachments:async s=>{if(!s.includes(\"://\"))try{return await P.readAttachment(s)}catch(l){return console.error(l),s}return s}});await m.showPanel(\"rhs\",2,`<html><head><style>${t}</style></head><body><div id=\"root\">${i}</div></body></html>`,n)}var Oe=D;return q($e);})();\n return mod;})()"
    },
    "previewClickHandler": {
      "env": "client",
      "events": [
        "preview:click"
      ],
      "code": "(() => { var mod=(()=>{var x=Object.create;var a=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var w=(r=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(r,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):r)(function(r){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+r+'\" is not supported')});var d=(r,e)=>{for(var n in e)a(r,n,{get:e[n],enumerable:!0})},m=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of b(e))!v.call(r,s)&&s!==n&&a(r,s,{get:()=>e[s],enumerable:!(o=P(e,s))||o.enumerable});return r};var k=(r,e,n)=>(n=r!=null?x(T(r)):{},m(e||!r||!r.__esModule?a(n,\"default\",{value:r,enumerable:!0}):n,r)),F=r=>m(a({},\"__esModule\",{value:!0}),r);var fe={};d(fe,{default:()=>me});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var l={};d(l,{confirm:()=>V,dispatch:()=>X,downloadFile:()=>U,filterBox:()=>H,flashNotification:()=>N,getCurrentPage:()=>M,getCursor:()=>C,getSelection:()=>O,getText:()=>S,getUiOption:()=>Y,hidePanel:()=>B,insertAtCursor:()=>W,insertAtPos:()=>q,moveCursor:()=>J,navigate:()=>E,openUrl:()=>R,prompt:()=>K,reloadPage:()=>L,replaceRange:()=>j,save:()=>D,setPage:()=>A,setSelection:()=>$,setUiOption:()=>Q,showPanel:()=>I,vimEx:()=>z});function M(){return t(\"editor.getCurrentPage\")}function A(r){return t(\"editor.setPage\",r)}function S(){return t(\"editor.getText\")}function C(){return t(\"editor.getCursor\")}function O(){return t(\"editor.getSelection\")}function $(r,e){return t(\"editor.setSelection\",r,e)}function D(){return t(\"editor.save\")}function E(r,e,n=!1,o=!1){return t(\"editor.navigate\",r,e,n,o)}function L(){return t(\"editor.reloadPage\")}function R(r){return t(\"editor.openUrl\",r)}function U(r,e){return t(\"editor.downloadFile\",r,e)}function N(r,e=\"info\"){return t(\"editor.flashNotification\",r,e)}function H(r,e,n=\"\",o=\"\"){return t(\"editor.filterBox\",r,e,n,o)}function I(r,e,n,o=\"\"){return t(\"editor.showPanel\",r,e,n,o)}function B(r){return t(\"editor.hidePanel\",r)}function q(r,e){return t(\"editor.insertAtPos\",r,e)}function j(r,e,n){return t(\"editor.replaceRange\",r,e,n)}function J(r,e=!1){return t(\"editor.moveCursor\",r,e)}function W(r){return t(\"editor.insertAtCursor\",r)}function X(r){return t(\"editor.dispatch\",r)}function K(r,e=\"\"){return t(\"editor.prompt\",r,e)}function V(r){return t(\"editor.confirm\",r)}function Y(r){return t(\"editor.getUiOption\",r)}function Q(r,e){return t(\"editor.setUiOption\",r,e)}function z(r){return t(\"editor.vimEx\",r)}var u=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},p=new u;var c={};d(c,{getEnv:()=>oe,invokeCommand:()=>re,invokeFunction:()=>ee,listCommands:()=>te,reloadPlugs:()=>ne});function ee(r,e,...n){return t(\"system.invokeFunction\",r,e,...n)}function re(r){return t(\"system.invokeCommand\",r)}function te(){return t(\"system.listCommands\")}function ne(){t(\"system.reloadPlugs\")}function oe(){return t(\"system.getEnv\")}var i=self.syscall;var y=k(w(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function h(r){let[e,n]=JSON.parse(r);switch(e){case\"pos\":await l.moveCursor(+n,!0);break;case\"command\":await c.invokeCommand(n);break}}var me=h;return F(fe);})();\n return mod;})()"
    },
    "sharePublisher": {
      "events": [
        "share:file"
      ],
      "code": "(() => { var mod=(()=>{var L=Object.create;var f=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var U=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var H=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(r,t)=>(typeof require!=\"undefined\"?require:r)[t]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var x=(e,r)=>{for(var t in r)f(e,t,{get:r[t],enumerable:!0})},M=(e,r,t,n)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let o of R(r))!N.call(e,o)&&o!==t&&f(e,o,{get:()=>r[o],enumerable:!(n=D(r,o))||n.enumerable});return e};var I=(e,r,t)=>(t=e!=null?L(U(e)):{},M(r||!e||!e.__esModule?f(t,\"default\",{value:e,enumerable:!0}):t,e)),B=e=>M(f({},\"__esModule\",{value:!0}),e);var ie={};x(ie,{default:()=>oe});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var i=self.syscall;var p={};x(p,{parseMarkdown:()=>j});function j(e){return i(\"markdown.parseMarkdown\",e)}var P=class{listPages(r=!1){return i(\"space.listPages\",r)}getPageMeta(r){return i(\"space.getPageMeta\",r)}readPage(r){return i(\"space.readPage\",r)}writePage(r,t){return i(\"space.writePage\",r,t)}deletePage(r){return i(\"space.deletePage\",r)}listPlugs(){return i(\"space.listPlugs\")}listAttachments(){return i(\"space.listAttachments\")}getAttachmentMeta(r){return i(\"space.getAttachmentMeta\",r)}readAttachment(r){return i(\"space.readAttachment\",r)}writeAttachment(r,t,n){return i(\"space.writeAttachment\",r,t,n)}deleteAttachment(r){return i(\"space.deleteAttachment\",r)}readFile(r,t){return i(\"space.readFile\",r,t)}getFileMeta(r){return i(\"space.getFileMeta\",r)}writeFile(r,t,n){return i(\"space.writeFile\",r,t,n)}deleteFile(r){return i(\"space.deleteFile\",r)}listFiles(r){return i(\"space.listFiles\",r)}},b=new P;var g={};x(g,{readAsset:()=>z});function Q(e){let r=atob(e),t=r.length,n=new Uint8Array(t);for(let o=0;o<t;o++)n[o]=r.charCodeAt(o);return n}function A(e){let r=e.split(\",\",2)[1];return Q(r)}var l=self.syscall;async function z(e,r=\"utf8\"){let t=await l(\"asset.readAsset\",e);switch(r){case\"utf8\":return new TextDecoder().decode(A(t));case\"dataurl\":return t}}var m=class{constructor(r){this.root=r}readFile(r,t=\"utf8\"){return l(\"fs.readFile\",`${this.root}/${r}`,t)}async getFileMeta(r){return this.removeRootDir(await l(\"fs.getFileMeta\",`${this.root}/${r}`))}writeFile(r,t,n=\"utf8\"){return l(\"fs.writeFile\",`${this.root}/${r}`,t,n)}deleteFile(r){return l(\"fs.deleteFile\",`${this.root}/${r}`)}async listFiles(r,t=!1){return(await l(\"fs.listFiles\",`${this.root}/${r}`,t)).map(this.removeRootDir.bind(this))}removeRootDir(r){return r.name=r.name.substring(this.root.length+1),r}};function T(e,r){if(r(e))return[e];let t=[];if(e.children)for(let n of e.children)t=[...t,...T(n,r)];return t}function d(e,r){return T(e,t=>t.type===r)[0]}function S(e,r){T(e,r)}function u(e){let r=[];if(e.text!==void 0)return e.text;for(let t of e.children)r.push(u(t));return r.join(\"\")}var y=I(H(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var k=\"FRAGMENT\";function v(e){return e.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\")}function w(e){if(!e)return\"\";if(typeof e==\"string\")return v(e);let r=e.attrs?\" \"+Object.entries(e.attrs).filter(([,n])=>n!==void 0).map(([n,o])=>`${n}=\"${v(o)}\"`).join(\" \"):\"\",t=typeof e.body==\"string\"?v(e.body):e.body.map(w).join(\"\");return e.name===k?t:e.body?`<${e.name}${r}>${t}</${e.name}>`:`<${e.name}${r}/>`}function s(e){let r=[];for(let t of e)t&&r.push(t);return r}function te(e,r={}){S(e,t=>{if(t.type===\"Paragraph\"&&r.smartHardBreak)for(let n of t.children)!n.type&&n.text===`\n`&&(n.type=\"HardBreak\");return!1})}function F(e,r={}){let t=ne(e,r);return r.annotationPositions?t?(typeof t==\"string\"||e.from&&(t.attrs||(t.attrs={}),t.attrs[\"data-pos\"]=\"\"+e.from),t):null:t}function ne(e,r={}){if(e.type?.endsWith(\"Mark\")||e.type?.endsWith(\"Delimiter\"))return null;switch(e.type){case\"Document\":return{name:k,body:s(t(e.children))};case\"FrontMatter\":if(r.renderFrontMatter){let n=u(e.children[1]),o=y.parse(n),a=[];for(let[c,h]of Object.entries(o))a.push({name:\"tr\",body:[{name:\"td\",attrs:{class:\"key\"},body:c},{name:\"td\",attrs:{class:\"value\"},body:y.stringify(h)}]});return{name:\"table\",attrs:{class:\"front-matter\"},body:a}}else return null;case\"CommentBlock\":return null;case\"ATXHeading1\":return{name:\"h1\",body:s(t(e.children))};case\"ATXHeading2\":return{name:\"h2\",body:s(t(e.children))};case\"ATXHeading3\":return{name:\"h3\",body:s(t(e.children))};case\"ATXHeading4\":return{name:\"h4\",body:s(t(e.children))};case\"ATXHeading5\":return{name:\"h5\",body:s(t(e.children))};case\"Paragraph\":return{name:\"p\",body:s(t(e.children))};case\"FencedCode\":case\"CodeBlock\":return e.children=e.children.filter(n=>n.type),{name:\"pre\",body:s(t(e.children))};case\"CodeInfo\":return null;case\"CodeText\":return e.children[0].text;case\"Blockquote\":return{name:\"blockquote\",body:s(t(e.children))};case\"HardBreak\":return{name:\"br\",body:\"\"};case\"Emphasis\":return{name:\"em\",body:s(t(e.children))};case\"Highlight\":return{name:\"span\",attrs:{class:\"highlight\"},body:s(t(e.children))};case\"Strikethrough\":return{name:\"del\",body:s(t(e.children))};case\"InlineCode\":return{name:\"tt\",body:s(t(e.children))};case\"BulletList\":return{name:\"ul\",body:s(t(e.children))};case\"OrderedList\":return{name:\"ol\",body:s(t(e.children))};case\"ListItem\":return{name:\"li\",body:s(t(e.children))};case\"StrongEmphasis\":return{name:\"strong\",body:s(t(e.children))};case\"HorizontalRule\":return{name:\"hr\",body:\"\"};case\"Link\":{let n=e.children[1].text,o=d(e,\"URL\");if(!o)return u(e);let a=o.children[0].text;return a.indexOf(\"://\")===-1&&(a=`${r.attachmentUrlPrefix||\"\"}${a}`),{name:\"a\",attrs:{href:a},body:n}}case\"Image\":{let n=e.children[1].text,o=d(e,\"URL\");if(!o)return u(e);let a=o.children[0].text;return a.indexOf(\"://\")===-1&&(a=`${r.attachmentUrlPrefix||\"\"}${a}`),{name:\"img\",attrs:{src:a,alt:n},body:\"\"}}case\"WikiLink\":{let n=d(e,\"WikiLinkPage\").children[0].text,o=n,a=d(e,\"WikiLinkAlias\");return a&&(o=a.children[0].text),{name:\"a\",attrs:{href:`/${n.replaceAll(\" \",\"_\").replace(\"@\",\"#\")}`},body:o}}case\"NakedURL\":{let n=e.children[0].text;return{name:\"a\",attrs:{href:n},body:n}}case\"Hashtag\":return{name:\"strong\",body:e.children[0].text};case\"Task\":return{name:\"span\",body:s(t(e.children))};case\"TaskMarker\":return{name:\"input\",attrs:{type:\"checkbox\",checked:e.children[0].text!==\"[ ]\"?\"checked\":void 0,\"data-onclick\":JSON.stringify([\"task\",e.to])},body:\"\"};case\"NamedAnchor\":return{name:\"a\",attrs:{name:e.children[0].text?.substring(1)},body:\"\"};case\"CommandLink\":{let n=e.children[1].children[0].text;return{name:\"button\",attrs:{\"data-onclick\":JSON.stringify([\"command\",n])},body:n}}case\"DeadlineDate\":return u(e);case\"Table\":return{name:\"table\",body:s(t(e.children))};case\"TableHeader\":return{name:\"thead\",body:[{name:\"tr\",body:s(t(e.children))}]};case\"TableCell\":return{name:\"td\",body:s(t(e.children))};case\"TableRow\":{let n=e.children,o=[],a=!1;for(let c of n)c.type===\"TableDelimiter\"&&a&&o.push({type:\"TableCell\",children:[]}),c.type===\"TableDelimiter\"&&(a=!0),c.type===\"TableCell\"&&(a=!1),o.push(c);return{name:\"tr\",body:s(t(o))}}case\"Directive\":{let n=d(e,\"DirectiveBody\");return F(n.children[0],r)}case void 0:return e.text;default:if(r.failOnUnknown)throw console.error(\"Not handling\",JSON.stringify(e,null,2)),new Error(`Unknown markdown node type ${e.type}`);return console.warn(\"Not handling\",JSON.stringify(e,null,2)),u(e)}function t(n){return n.map(o=>F(o,r))}}async function C(e,r){if(await r(e),typeof e!=\"string\"&&e.body)for(let t of e.body)await C(t,r)}async function O(e,r={}){te(e,r);let t=F(e,r);return t&&r.inlineAttachments&&await C(t,async n=>{typeof n!=\"string\"&&n.name===\"img\"&&(n.attrs.src=await r.inlineAttachments(n.attrs.src))}),w(t)}async function $(e){let r=e.uri.split(\":\")[1],t=e.name,n=await b.readPage(t),o=await p.parseMarkdown(n),a=new m(\"\"),c=await g.readAsset(\"assets/styles.css\"),h=O(o,{smartHardBreak:!0}),E=`<html><head><style>${c}</style></head><body><div id=\"root\">${h}</div></body></html>`;return await a.writeFile(r,E,\"utf8\"),!0}var oe=$;return B(ie);})();\n return mod;})()"
    },
    "markdownWidget": {
      "codeWidget": "markdown",
      "code": "(() => { var mod=(()=>{var O=Object.create;var d=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var $=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(n,r)=>(typeof require!=\"undefined\"?require:n)[r]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var C=(e,n)=>{for(var r in n)d(e,r,{get:n[r],enumerable:!0})},g=(e,n,r,t)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let a of N(n))!A.call(e,a)&&a!==r&&d(e,a,{get:()=>n[a],enumerable:!(t=H(n,a))||t.enumerable});return e};var L=(e,n,r)=>(r=e!=null?O(v(e)):{},g(n||!e||!e.__esModule?d(r,\"default\",{value:e,enumerable:!0}):r,e)),R=e=>g(d({},\"__esModule\",{value:!0}),e);var D={};C(D,{default:()=>W});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var T=self.syscall;function b(e){return T(\"markdown.parseMarkdown\",e)}function f(e,n){if(n(e))return[e];let r=[];if(e.children)for(let t of e.children)r=[...r,...f(t,n)];return r}function c(e,n){return f(e,r=>r.type===n)[0]}function P(e,n){f(e,n)}function s(e){let n=[];if(e.text!==void 0)return e.text;for(let r of e.children)n.push(s(r));return n.join(\"\")}var u=L($(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var h=\"FRAGMENT\";function m(e){return e.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\")}function p(e){if(!e)return\"\";if(typeof e==\"string\")return m(e);let n=e.attrs?\" \"+Object.entries(e.attrs).filter(([,t])=>t!==void 0).map(([t,a])=>`${t}=\"${m(a)}\"`).join(\" \"):\"\",r=typeof e.body==\"string\"?m(e.body):e.body.map(p).join(\"\");return e.name===h?r:e.body?`<${e.name}${n}>${r}</${e.name}>`:`<${e.name}${n}/>`}function i(e){let n=[];for(let r of e)r&&n.push(r);return n}function B(e,n={}){P(e,r=>{if(r.type===\"Paragraph\"&&n.smartHardBreak)for(let t of r.children)!t.type&&t.text===`\n`&&(t.type=\"HardBreak\");return!1})}function y(e,n={}){let r=U(e,n);return n.annotationPositions?r?(typeof r==\"string\"||e.from&&(r.attrs||(r.attrs={}),r.attrs[\"data-pos\"]=\"\"+e.from),r):null:r}function U(e,n={}){if(e.type?.endsWith(\"Mark\")||e.type?.endsWith(\"Delimiter\"))return null;switch(e.type){case\"Document\":return{name:h,body:i(r(e.children))};case\"FrontMatter\":if(n.renderFrontMatter){let t=s(e.children[1]),a=u.parse(t),o=[];for(let[l,M]of Object.entries(a))o.push({name:\"tr\",body:[{name:\"td\",attrs:{class:\"key\"},body:l},{name:\"td\",attrs:{class:\"value\"},body:u.stringify(M)}]});return{name:\"table\",attrs:{class:\"front-matter\"},body:o}}else return null;case\"CommentBlock\":return null;case\"ATXHeading1\":return{name:\"h1\",body:i(r(e.children))};case\"ATXHeading2\":return{name:\"h2\",body:i(r(e.children))};case\"ATXHeading3\":return{name:\"h3\",body:i(r(e.children))};case\"ATXHeading4\":return{name:\"h4\",body:i(r(e.children))};case\"ATXHeading5\":return{name:\"h5\",body:i(r(e.children))};case\"Paragraph\":return{name:\"p\",body:i(r(e.children))};case\"FencedCode\":case\"CodeBlock\":return e.children=e.children.filter(t=>t.type),{name:\"pre\",body:i(r(e.children))};case\"CodeInfo\":return null;case\"CodeText\":return e.children[0].text;case\"Blockquote\":return{name:\"blockquote\",body:i(r(e.children))};case\"HardBreak\":return{name:\"br\",body:\"\"};case\"Emphasis\":return{name:\"em\",body:i(r(e.children))};case\"Highlight\":return{name:\"span\",attrs:{class:\"highlight\"},body:i(r(e.children))};case\"Strikethrough\":return{name:\"del\",body:i(r(e.children))};case\"InlineCode\":return{name:\"tt\",body:i(r(e.children))};case\"BulletList\":return{name:\"ul\",body:i(r(e.children))};case\"OrderedList\":return{name:\"ol\",body:i(r(e.children))};case\"ListItem\":return{name:\"li\",body:i(r(e.children))};case\"StrongEmphasis\":return{name:\"strong\",body:i(r(e.children))};case\"HorizontalRule\":return{name:\"hr\",body:\"\"};case\"Link\":{let t=e.children[1].text,a=c(e,\"URL\");if(!a)return s(e);let o=a.children[0].text;return o.indexOf(\"://\")===-1&&(o=`${n.attachmentUrlPrefix||\"\"}${o}`),{name:\"a\",attrs:{href:o},body:t}}case\"Image\":{let t=e.children[1].text,a=c(e,\"URL\");if(!a)return s(e);let o=a.children[0].text;return o.indexOf(\"://\")===-1&&(o=`${n.attachmentUrlPrefix||\"\"}${o}`),{name:\"img\",attrs:{src:o,alt:t},body:\"\"}}case\"WikiLink\":{let t=c(e,\"WikiLinkPage\").children[0].text,a=t,o=c(e,\"WikiLinkAlias\");return o&&(a=o.children[0].text),{name:\"a\",attrs:{href:`/${t.replaceAll(\" \",\"_\").replace(\"@\",\"#\")}`},body:a}}case\"NakedURL\":{let t=e.children[0].text;return{name:\"a\",attrs:{href:t},body:t}}case\"Hashtag\":return{name:\"strong\",body:e.children[0].text};case\"Task\":return{name:\"span\",body:i(r(e.children))};case\"TaskMarker\":return{name:\"input\",attrs:{type:\"checkbox\",checked:e.children[0].text!==\"[ ]\"?\"checked\":void 0,\"data-onclick\":JSON.stringify([\"task\",e.to])},body:\"\"};case\"NamedAnchor\":return{name:\"a\",attrs:{name:e.children[0].text?.substring(1)},body:\"\"};case\"CommandLink\":{let t=e.children[1].children[0].text;return{name:\"button\",attrs:{\"data-onclick\":JSON.stringify([\"command\",t])},body:t}}case\"DeadlineDate\":return s(e);case\"Table\":return{name:\"table\",body:i(r(e.children))};case\"TableHeader\":return{name:\"thead\",body:[{name:\"tr\",body:i(r(e.children))}]};case\"TableCell\":return{name:\"td\",body:i(r(e.children))};case\"TableRow\":{let t=e.children,a=[],o=!1;for(let l of t)l.type===\"TableDelimiter\"&&o&&a.push({type:\"TableCell\",children:[]}),l.type===\"TableDelimiter\"&&(o=!0),l.type===\"TableCell\"&&(o=!1),a.push(l);return{name:\"tr\",body:i(r(a))}}case\"Directive\":{let t=c(e,\"DirectiveBody\");return y(t.children[0],n)}case void 0:return e.text;default:if(n.failOnUnknown)throw console.error(\"Not handling\",JSON.stringify(e,null,2)),new Error(`Unknown markdown node type ${e.type}`);return console.warn(\"Not handling\",JSON.stringify(e,null,2)),s(e)}function r(t){return t.map(a=>y(a,n))}}async function x(e,n){if(await n(e),typeof e!=\"string\"&&e.body)for(let r of e.body)await x(r,n)}async function k(e,n={}){B(e,n);let r=y(e,n);return r&&n.inlineAttachments&&await x(r,async t=>{typeof t!=\"string\"&&t.name===\"img\"&&(t.attrs.src=await n.inlineAttachments(t.attrs.src))}),p(r)}async function w(e){let n=await b(e),r=await k(n,{smartHardBreak:!0});return Promise.resolve({html:r,script:`updateHeight();\n    document.addEventListener(\"click\", () => {\n      api({type: \"blur\"});\n    });`})}var W=w;return R(D);})();\n return mod;})()"
    }
  }
}