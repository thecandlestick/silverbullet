{
  "name": "collab",
  "imports": [
    "https://get.silverbullet.md/global.plug.json"
  ],
  "functions": {
    "detectCollabPage": {
      "events": [
        "editor:pageLoaded",
        "plugs:loaded"
      ],
      "code": "(() => { var mod=(()=>{var A=Object.create;var l=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var C=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var P=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(r,n)=>(typeof require!=\"undefined\"?require:r)[n]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var c=(e,r)=>{for(var n in r)l(e,n,{get:r[n],enumerable:!0})},x=(e,r,n,o)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let i of S(r))!k.call(e,i)&&i!==n&&l(e,i,{get:()=>r[i],enumerable:!(o=F(r,i))||o.enumerable});return e};var y=(e,r,n)=>(n=e!=null?A(C(e)):{},x(r||!e||!e.__esModule?l(n,\"default\",{value:e,enumerable:!0}):n,e)),U=e=>x(l({},\"__esModule\",{value:!0}),e);var fe={};c(fe,{default:()=>me});function h(e,r){if(r(e))return[e];let n=[];if(e.children)for(let o of e.children)n=[...n,...h(o,r)];return n}function f(e,r){return h(e,n=>n.type===r)[0]}function u(e){let r=[];if(e.text!==void 0)return e.text;for(let n of e.children)r.push(u(n));return r.join(\"\")}var d={};c(d,{confirm:()=>X,dispatch:()=>H,downloadFile:()=>j,filterBox:()=>V,flashNotification:()=>q,getCurrentPage:()=>E,getCursor:()=>D,getSelection:()=>N,getText:()=>p,getUiOption:()=>Z,hidePanel:()=>W,insertAtCursor:()=>G,insertAtPos:()=>B,moveCursor:()=>_,navigate:()=>Y,openUrl:()=>$,prompt:()=>J,reloadPage:()=>R,replaceRange:()=>Q,save:()=>I,setPage:()=>L,setSelection:()=>O,setUiOption:()=>K,showPanel:()=>z,vimEx:()=>ee});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;function E(){return t(\"editor.getCurrentPage\")}function L(e){return t(\"editor.setPage\",e)}function p(){return t(\"editor.getText\")}function D(){return t(\"editor.getCursor\")}function N(){return t(\"editor.getSelection\")}function O(e,r){return t(\"editor.setSelection\",e,r)}function I(){return t(\"editor.save\")}function Y(e,r,n=!1,o=!1){return t(\"editor.navigate\",e,r,n,o)}function R(){return t(\"editor.reloadPage\")}function $(e){return t(\"editor.openUrl\",e)}function j(e,r){return t(\"editor.downloadFile\",e,r)}function q(e,r=\"info\"){return t(\"editor.flashNotification\",e,r)}function V(e,r,n=\"\",o=\"\"){return t(\"editor.filterBox\",e,r,n,o)}function z(e,r,n,o=\"\"){return t(\"editor.showPanel\",e,r,n,o)}function W(e){return t(\"editor.hidePanel\",e)}function B(e,r){return t(\"editor.insertAtPos\",e,r)}function Q(e,r,n){return t(\"editor.replaceRange\",e,r,n)}function _(e,r=!1){return t(\"editor.moveCursor\",e,r)}function G(e){return t(\"editor.insertAtCursor\",e)}function H(e){return t(\"editor.dispatch\",e)}function J(e,r=\"\"){return t(\"editor.prompt\",e,r)}function X(e){return t(\"editor.confirm\",e)}function Z(e){return t(\"editor.getUiOption\",e)}function K(e,r){return t(\"editor.setUiOption\",e,r)}function ee(e){return t(\"editor.vimEx\",e)}function b(e){return t(\"markdown.parseMarkdown\",e)}var v=y(P(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var w=y(P(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var s={};c(s,{del:()=>ne,get:()=>te,set:()=>re});function re(e,r){return t(\"clientStore.set\",e,r)}function te(e){return t(\"clientStore.get\",e)}function ne(e){return t(\"clientStore.delete\",e)}var g=class{listPages(r=!1){return t(\"space.listPages\",r)}getPageMeta(r){return t(\"space.getPageMeta\",r)}readPage(r){return t(\"space.readPage\",r)}writePage(r,n){return t(\"space.writePage\",r,n)}deletePage(r){return t(\"space.deletePage\",r)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(r){return t(\"space.getAttachmentMeta\",r)}readAttachment(r){return t(\"space.readAttachment\",r)}writeAttachment(r,n,o){return t(\"space.writeAttachment\",r,n,o)}deleteAttachment(r){return t(\"space.deleteAttachment\",r)}readFile(r,n){return t(\"space.readFile\",r,n)}getFileMeta(r){return t(\"space.getFileMeta\",r)}writeFile(r,n,o){return t(\"space.writeFile\",r,n,o)}deleteFile(r){return t(\"space.deleteFile\",r)}listFiles(r){return t(\"space.listFiles\",r)}},se=new g;var m={};c(m,{start:()=>le,stop:()=>ce});function le(e,r,n){return t(\"collab.start\",e,r,n)}function ce(){return t(\"collab.stop\")}async function de(){let e=await s.get(\"collabUsername\");if(!e)if(e=await d.prompt(\"Please enter a publicly visible user name (or cancel for 'anonymous'):\"),e)await s.set(\"collabUsername\",e);else return\"anonymous\";return e}async function M(){let e=await b(await p()),r=f(e,\"FrontMatter\");if(r){let n=u(r.children[1].children[0]);try{let{$share:o}=w.parse(n);if(!o)return;Array.isArray(o)||(o=[o]);for(let i of o)if(i.startsWith(\"collab:\")){console.log(\"Going to enable collab\");let a=i.substring(7).split(\"/\");await m.start(a.slice(0,a.length-1).join(\"/\"),a[a.length-1],await de())}}catch(o){console.error(\"Error parsing YAML\",o)}}}var me=M;return U(fe);})();\n return mod;})()"
    },
    "joinCommand": {
      "command": {
        "name": "Share: Join Collab"
      },
      "code": "(() => { var mod=(()=>{var h=Object.create;var a=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var c=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(r,n)=>(typeof require!=\"undefined\"?require:r)[n]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var u=(e,r)=>{for(var n in r)a(e,n,{get:r[n],enumerable:!0})},d=(e,r,n,o)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let i of T(r))!w.call(e,i)&&i!==n&&a(e,i,{get:()=>r[i],enumerable:!(o=b(r,i))||o.enumerable});return e};var m=(e,r,n)=>(n=e!=null?h(v(e)):{},d(r||!e||!e.__esModule?a(n,\"default\",{value:e,enumerable:!0}):n,e)),M=e=>d(a({},\"__esModule\",{value:!0}),e);var oe={};u(oe,{default:()=>ne});var s={};u(s,{confirm:()=>B,dispatch:()=>z,downloadFile:()=>N,filterBox:()=>I,flashNotification:()=>O,getCurrentPage:()=>A,getCursor:()=>S,getSelection:()=>C,getText:()=>f,getUiOption:()=>Q,hidePanel:()=>R,insertAtCursor:()=>V,insertAtPos:()=>$,moveCursor:()=>q,navigate:()=>E,openUrl:()=>D,prompt:()=>W,reloadPage:()=>L,replaceRange:()=>j,save:()=>U,setPage:()=>F,setSelection:()=>k,setUiOption:()=>_,showPanel:()=>Y,vimEx:()=>G});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;function A(){return t(\"editor.getCurrentPage\")}function F(e){return t(\"editor.setPage\",e)}function f(){return t(\"editor.getText\")}function S(){return t(\"editor.getCursor\")}function C(){return t(\"editor.getSelection\")}function k(e,r){return t(\"editor.setSelection\",e,r)}function U(){return t(\"editor.save\")}function E(e,r,n=!1,o=!1){return t(\"editor.navigate\",e,r,n,o)}function L(){return t(\"editor.reloadPage\")}function D(e){return t(\"editor.openUrl\",e)}function N(e,r){return t(\"editor.downloadFile\",e,r)}function O(e,r=\"info\"){return t(\"editor.flashNotification\",e,r)}function I(e,r,n=\"\",o=\"\"){return t(\"editor.filterBox\",e,r,n,o)}function Y(e,r,n,o=\"\"){return t(\"editor.showPanel\",e,r,n,o)}function R(e){return t(\"editor.hidePanel\",e)}function $(e,r){return t(\"editor.insertAtPos\",e,r)}function j(e,r,n){return t(\"editor.replaceRange\",e,r,n)}function q(e,r=!1){return t(\"editor.moveCursor\",e,r)}function V(e){return t(\"editor.insertAtCursor\",e)}function z(e){return t(\"editor.dispatch\",e)}function W(e,r=\"\"){return t(\"editor.prompt\",e,r)}function B(e){return t(\"editor.confirm\",e)}function Q(e){return t(\"editor.getUiOption\",e)}function _(e,r){return t(\"editor.setUiOption\",e,r)}function G(e){return t(\"editor.vimEx\",e)}var g=m(c(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var te=m(c(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var l=class{listPages(r=!1){return t(\"space.listPages\",r)}getPageMeta(r){return t(\"space.getPageMeta\",r)}readPage(r){return t(\"space.readPage\",r)}writePage(r,n){return t(\"space.writePage\",r,n)}deletePage(r){return t(\"space.deletePage\",r)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(r){return t(\"space.getAttachmentMeta\",r)}readAttachment(r){return t(\"space.readAttachment\",r)}writeAttachment(r,n,o){return t(\"space.writeAttachment\",r,n,o)}deleteAttachment(r){return t(\"space.deleteAttachment\",r)}readFile(r,n){return t(\"space.readFile\",r,n)}getFileMeta(r){return t(\"space.getFileMeta\",r)}writeFile(r,n,o){return t(\"space.writeFile\",r,n,o)}deleteFile(r){return t(\"space.deleteFile\",r)}listFiles(r){return t(\"space.listFiles\",r)}},K=new l;async function y(){let e=await s.prompt(\"Collab share URI:\");!e||(e.startsWith(\"collab:\")||(e=\"collab:\"+e),await s.navigate(e))}var ne=y;return M(oe);})();\n return mod;})()"
    },
    "shareCommand": {
      "command": {
        "name": "Share: Collab"
      },
      "code": "(() => { var mod=(()=>{var j=Object.create;var h=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var z=Object.getPrototypeOf,W=Object.prototype.hasOwnProperty;var U=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(r,t)=>(typeof require!=\"undefined\"?require:r)[t]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var u=(e,r)=>{for(var t in r)h(e,t,{get:r[t],enumerable:!0})},E=(e,r,t,o)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let i of V(r))!W.call(e,i)&&i!==t&&h(e,i,{get:()=>r[i],enumerable:!(o=q(r,i))||o.enumerable});return e};var L=(e,r,t)=>(t=e!=null?j(z(e)):{},E(r||!e||!e.__esModule?h(t,\"default\",{value:e,enumerable:!0}):t,e)),B=e=>E(h({},\"__esModule\",{value:!0}),e);var Ue={};u(Ue,{default:()=>ke});function w(e){if(!!e.children)for(let r of e.children){if(r.parent)return;r.parent=e,w(r)}}function M(e){if(delete e.parent,!!e.children)for(let r of e.children)M(r)}function A(e,r){if(r(e))return[e];let t=[];if(e.children)for(let o of e.children)t=[...t,...A(o,r)];return t}function F(e,r){if(e.children){let t=e.children.slice();for(let o of t){let i=r(o);if(i!==void 0){let s=e.children.indexOf(o);i?e.children.splice(s,1,i):e.children.splice(s,1)}else F(o,r)}}}function b(e,r){return A(e,t=>t.type===r)[0]}function D(e,r){A(e,r)}function d(e){let r=[];if(e.text!==void 0)return e.text;for(let t of e.children)r.push(d(t));return r.join(\"\")}var c={};u(c,{confirm:()=>me,dispatch:()=>ue,downloadFile:()=>re,filterBox:()=>ne,flashNotification:()=>te,getCurrentPage:()=>Q,getCursor:()=>G,getSelection:()=>H,getText:()=>N,getUiOption:()=>fe,hidePanel:()=>ie,insertAtCursor:()=>ce,insertAtPos:()=>se,moveCursor:()=>le,navigate:()=>Z,openUrl:()=>ee,prompt:()=>de,reloadPage:()=>K,replaceRange:()=>ae,save:()=>X,setPage:()=>_,setSelection:()=>J,setUiOption:()=>pe,showPanel:()=>oe,vimEx:()=>ge});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;function Q(){return n(\"editor.getCurrentPage\")}function _(e){return n(\"editor.setPage\",e)}function N(){return n(\"editor.getText\")}function G(){return n(\"editor.getCursor\")}function H(){return n(\"editor.getSelection\")}function J(e,r){return n(\"editor.setSelection\",e,r)}function X(){return n(\"editor.save\")}function Z(e,r,t=!1,o=!1){return n(\"editor.navigate\",e,r,t,o)}function K(){return n(\"editor.reloadPage\")}function ee(e){return n(\"editor.openUrl\",e)}function re(e,r){return n(\"editor.downloadFile\",e,r)}function te(e,r=\"info\"){return n(\"editor.flashNotification\",e,r)}function ne(e,r,t=\"\",o=\"\"){return n(\"editor.filterBox\",e,r,t,o)}function oe(e,r,t,o=\"\"){return n(\"editor.showPanel\",e,r,t,o)}function ie(e){return n(\"editor.hidePanel\",e)}function se(e,r){return n(\"editor.insertAtPos\",e,r)}function ae(e,r,t){return n(\"editor.replaceRange\",e,r,t)}function le(e,r=!1){return n(\"editor.moveCursor\",e,r)}function ce(e){return n(\"editor.insertAtCursor\",e)}function ue(e){return n(\"editor.dispatch\",e)}function de(e,r=\"\"){return n(\"editor.prompt\",e,r)}function me(e){return n(\"editor.confirm\",e)}function fe(e){return n(\"editor.getUiOption\",e)}function pe(e,r){return n(\"editor.setUiOption\",e,r)}function ge(e){return n(\"editor.vimEx\",e)}var T={};u(T,{parseMarkdown:()=>O});function O(e){return n(\"markdown.parseMarkdown\",e)}var a=L(U(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function I(e,r=[]){let t={};return w(e),F(e,o=>{if(o.type===\"Hashtag\"){if(o.parent&&o.parent.type===\"Paragraph\"){let l=o.children[0].text.substring(1);t.tags||(t.tags=[]),Array.isArray(t.tags)&&!t.tags.includes(l)&&t.tags.push(l)}return}if(o.type===\"FrontMatter\"){let l=o.children[1].children[0],P=d(l);try{let x=a.parse(P),y={...x};if(t={...t,...x},r.length>0){let C=!1;for(let k of r)k in y&&(delete y[k],C=!0);C&&(l.text=a.stringify(y))}if(Object.keys(y).length===0)return null}catch(x){console.error(\"Could not parse frontmatter\",x)}}if(o.type!==\"FencedCode\")return;let i=b(o,\"CodeInfo\");if(!i||i.children[0].text!==\"meta\")return;let s=b(o,\"CodeText\");if(!s)return;let f=s.children[0].text,p=a.parse(f),g={...p};if(t={...t,...p},r.length>0){let l=!1;for(let P of r)P in g&&(delete g[P],l=!0);l&&(s.children[0].text=a.stringify(g).trim())}if(Object.keys(g).length===0)return null}),t.name&&(t.displayName=t.name,delete t.name),t}function Y(e,r){let t=null;return D(e,o=>{if(o.type===\"FrontMatter\"){let i=o.children[1].children[0],s=d(i);try{let p={...a.parse(s),...r};t={changes:{from:i.from,to:i.to,insert:a.stringify(p,{noArrayIndent:!0})}}}catch(f){console.error(\"Error parsing YAML\",f)}return!0}return!1}),t||(t={changes:{from:0,to:0,insert:`---\n`+a.stringify(r,{noArrayIndent:!0})+`---\n`}}),t}var Fe=L(U(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var m={};u(m,{del:()=>ye,get:()=>xe,set:()=>Pe});function Pe(e,r){return n(\"clientStore.set\",e,r)}function xe(e){return n(\"clientStore.get\",e)}function ye(e){return n(\"clientStore.delete\",e)}var S=class{listPages(r=!1){return n(\"space.listPages\",r)}getPageMeta(r){return n(\"space.getPageMeta\",r)}readPage(r){return n(\"space.readPage\",r)}writePage(r,t){return n(\"space.writePage\",r,t)}deletePage(r){return n(\"space.deletePage\",r)}listPlugs(){return n(\"space.listPlugs\")}listAttachments(){return n(\"space.listAttachments\")}getAttachmentMeta(r){return n(\"space.getAttachmentMeta\",r)}readAttachment(r){return n(\"space.readAttachment\",r)}writeAttachment(r,t,o){return n(\"space.writeAttachment\",r,t,o)}deleteAttachment(r){return n(\"space.deleteAttachment\",r)}readFile(r,t){return n(\"space.readFile\",r,t)}getFileMeta(r){return n(\"space.getFileMeta\",r)}writeFile(r,t,o){return n(\"space.writeFile\",r,t,o)}deleteFile(r){return n(\"space.deleteFile\",r)}listFiles(r){return n(\"space.listFiles\",r)}},Te=new S;var v={};u(v,{start:()=>we,stop:()=>Me});function we(e,r,t){return n(\"collab.start\",e,r,t)}function Me(){return n(\"collab.stop\")}var R=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((r,t)=>(t&=63,t<36?r+=t.toString(36):t<62?r+=(t-26).toString(36).toUpperCase():t>62?r+=\"-\":r+=\"_\",r),\"\");var Se=\"wss://collab.silverbullet.md\";async function Ce(){let e=await m.get(\"collabUsername\");if(!e)if(e=await c.prompt(\"Please enter a publicly visible user name (or cancel for 'anonymous'):\"),e)await m.set(\"collabUsername\",e);else return\"anonymous\";return e}async function $(){let e=await c.prompt(\"Please enter the URL of the collab server to use:\",Se);if(!e)return;let r=R().replaceAll(\"_\",\"-\");await c.save();let t=await c.getText(),o=await T.parseMarkdown(t),{$share:i}=I(o);i||(i=[]),Array.isArray(i)||(i=[i]),M(o);let s=Y(o,{$share:[...i,`collab:${e}/${r}`]});await c.dispatch(s),v.start(e,r,await Ce())}var ke=$;return B(Ue);})();\n return mod;})()"
    },
    "shareNoop": {
      "events": [
        "share:collab"
      ],
      "code": "(() => { var mod=(()=>{var x=Object.create;var s=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty;var l=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var v=(t,e)=>{for(var n in e)s(t,n,{get:e[n],enumerable:!0})},c=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of h(e))!T.call(t,i)&&i!==n&&s(t,i,{get:()=>e[i],enumerable:!(o=y(e,i))||o.enumerable});return t};var u=(t,e,n)=>(n=t!=null?x(b(t)):{},c(e||!t||!t.__esModule?s(n,\"default\",{value:t,enumerable:!0}):n,t)),w=t=>c(s({},\"__esModule\",{value:!0}),t);var N={};v(N,{default:()=>L});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var f=u(l(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var E=u(l(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var a=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},C=new a;function P(){return!0}var L=P;return w(N);})();\n return mod;})()"
    },
    "readPageCollab": {
      "env": "client",
      "pageNamespace": {
        "pattern": "collab:.+",
        "operation": "readFile"
      },
      "code": "(() => { var mod=(()=>{var y=Object.create;var s=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var l=(r=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(r,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):r)(function(r){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+r+'\" is not supported')});var w=(r,e)=>{for(var n in e)s(r,n,{get:e[n],enumerable:!0})},c=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of b(e))!v.call(r,i)&&i!==n&&s(r,i,{get:()=>e[i],enumerable:!(o=h(e,i))||o.enumerable});return r};var u=(r,e,n)=>(n=r!=null?y(T(r)):{},c(e||!r||!r.__esModule?s(n,\"default\",{value:r,enumerable:!0}):n,r)),M=r=>c(s({},\"__esModule\",{value:!0}),r);var O={};w(O,{default:()=>N});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var f=u(l(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var D=u(l(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var a=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},k=new a;function L(r){let e=\"\",n=r.byteLength;for(let o=0;o<n;o++)e+=String.fromCharCode(r[o]);return btoa(e)}function P(r,e){return`data:${r};base64,${L(e)}`}async function x(r,e){if(!r.endsWith(\".md\"))throw new Error(\"File not found\");let o=`---\n$share: ${r.substring(0,r.length-3)}\n---\n`;return{data:e===\"utf8\"?o:P(\"text/markdown\",new TextEncoder().encode(o)),meta:{name:r,contentType:\"text/markdown\",size:o.length,lastModified:0,perm:\"rw\"}}}var N=x;return M(O);})();\n return mod;})()"
    },
    "writePageCollab": {
      "env": "client",
      "pageNamespace": {
        "pattern": "collab:.+",
        "operation": "writeFile"
      },
      "code": "(() => { var mod=(()=>{var x=Object.create;var s=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty;var l=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var v=(t,e)=>{for(var n in e)s(t,n,{get:e[n],enumerable:!0})},c=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of h(e))!T.call(t,i)&&i!==n&&s(t,i,{get:()=>e[i],enumerable:!(o=y(e,i))||o.enumerable});return t};var u=(t,e,n)=>(n=t!=null?x(b(t)):{},c(e||!t||!t.__esModule?s(n,\"default\",{value:t,enumerable:!0}):n,t)),w=t=>c(s({},\"__esModule\",{value:!0}),t);var D={};v(D,{default:()=>L});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var f=u(l(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var E=u(l(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var a=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},C=new a;function P(t){return{name:t,contentType:\"text/markdown\",size:-1,lastModified:0,perm:\"rw\"}}var L=P;return w(D);})();\n return mod;})()"
    },
    "getPageMetaCollab": {
      "env": "client",
      "pageNamespace": {
        "pattern": "collab:.+",
        "operation": "getFileMeta"
      },
      "code": "(() => { var mod=(()=>{var x=Object.create;var s=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty;var l=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var v=(t,e)=>{for(var n in e)s(t,n,{get:e[n],enumerable:!0})},c=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of h(e))!T.call(t,i)&&i!==n&&s(t,i,{get:()=>e[i],enumerable:!(o=y(e,i))||o.enumerable});return t};var u=(t,e,n)=>(n=t!=null?x(b(t)):{},c(e||!t||!t.__esModule?s(n,\"default\",{value:t,enumerable:!0}):n,t)),w=t=>c(s({},\"__esModule\",{value:!0}),t);var D={};v(D,{default:()=>L});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var f=u(l(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var E=u(l(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));var a=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},C=new a;function P(t){return{name:t,contentType:\"text/markdown\",size:-1,lastModified:0,perm:\"rw\"}}var L=P;return w(D);})();\n return mod;})()"
    }
  },
  "assets": {}
}