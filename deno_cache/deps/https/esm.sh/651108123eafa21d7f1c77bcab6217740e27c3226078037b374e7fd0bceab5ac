/* esm.sh - esbuild bundle(lib0@0.2.74/encoding) deno production */
var nt=Array.from;var S=Array.isArray;var it=String.fromCharCode,ct=String.fromCodePoint;var v=t=>{let e=unescape(encodeURIComponent(t)),s=e.length,o=new Uint8Array(s);for(let r=0;r<s;r++)o[r]=e.codePointAt(r);return o},a=typeof TextEncoder<"u"?new TextEncoder:null,H=t=>a.encode(t),N=a?H:v;var w=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});w&&w.decode(new Uint8Array).length===1&&(w=null);var h=Math.floor;var C=Math.abs;var E=(t,e)=>t<e?t:e,m=(t,e)=>t>e?t:e,ft=Number.isNaN;var L=t=>t!==0?t<0:1/t<0;var at=Number.MAX_SAFE_INTEGER,ht=Number.MIN_SAFE_INTEGER,pt=1<<31;var _=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&h(t)===t),lt=Number.isNaN,ut=Number.parseInt;var B=(t,e,s)=>new Uint8Array(t,e,s);var i=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}},yt=()=>new i,J=t=>{let e=t.cpos;for(let s=0;s<t.bufs.length;s++)e+=t.bufs[s].length;return e},gt=t=>t.cpos>0||t.bufs.length>0,l=t=>{let e=new Uint8Array(J(t)),s=0;for(let o=0;o<t.bufs.length;o++){let r=t.bufs[o];e.set(r,s),s+=r.length}return e.set(B(t.cbuf.buffer,0,t.cpos),s),e},K=(t,e)=>{let s=t.cbuf.length;s-t.cpos<e&&(t.bufs.push(B(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(m(s,e)*2),t.cpos=0)},n=(t,e)=>{let s=t.cbuf.length;t.cpos===s&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(s*2),t.cpos=0),t.cbuf[t.cpos++]=e},b=(t,e,s)=>{let o=null;for(let r=0;r<t.bufs.length&&o===null;r++){let f=t.bufs[r];e<f.length?o=f:e-=f.length}o===null&&(o=t.cbuf),o[e]=s},wt=n,mt=b,Bt=(t,e)=>{n(t,e&255),n(t,e>>>8&255)},At=(t,e,s)=>{b(t,e,s&255),b(t,e+1,s>>>8&255)},Ut=(t,e)=>{for(let s=0;s<4;s++)n(t,e&255),e>>>=8},It=(t,e)=>{for(let s=3;s>=0;s--)n(t,e>>>8*s&255)},Tt=(t,e,s)=>{for(let o=0;o<4;o++)b(t,e+o,s&255),s>>>=8},c=(t,e)=>{for(;e>127;)n(t,128|127&e),e=h(e/128);n(t,127&e)},u=(t,e)=>{let s=L(e);for(s&&(e=-e),n(t,(e>63?128:0)|(s?64:0)|63&e),e=h(e/64);e>0;)n(t,(e>127?128:0)|127&e),e=h(e/128)},A=new Uint8Array(3e4),Q=A.length/3,Y=(t,e)=>{if(e.length<Q){let s=a.encodeInto(e,A).written||0;c(t,s);for(let o=0;o<s;o++)n(t,A[o])}else j(t,N(e))},tt=(t,e)=>{let s=unescape(encodeURIComponent(e)),o=s.length;c(t,o);for(let r=0;r<o;r++)n(t,s.codePointAt(r))},U=a&&a.encodeInto?Y:tt,St=(t,e)=>T(t,l(e)),T=(t,e)=>{let s=t.cbuf.length,o=t.cpos,r=E(s-o,e.length),f=e.length-r;t.cbuf.set(e.subarray(0,r),o),t.cpos+=r,f>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(m(s*2,f)),t.cbuf.set(e.subarray(r)),t.cpos=f)},j=(t,e)=>{c(t,e.byteLength),T(t,e)},g=(t,e)=>{K(t,e);let s=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,s},et=(t,e)=>g(t,4).setFloat32(0,e,!1),st=(t,e)=>g(t,8).setFloat64(0,e,!1),ot=(t,e)=>g(t,8).setBigInt64(0,e,!1),Nt=(t,e)=>g(t,8).setBigUint64(0,e,!1),V=new DataView(new ArrayBuffer(4)),rt=t=>(V.setFloat32(0,t),V.getFloat32(0)===t),P=(t,e)=>{switch(typeof e){case"string":n(t,119),U(t,e);break;case"number":_(e)&&C(e)<=2147483647?(n(t,125),u(t,e)):rt(e)?(n(t,124),et(t,e)):(n(t,123),st(t,e));break;case"bigint":n(t,122),ot(t,e);break;case"object":if(e===null)n(t,126);else if(S(e)){n(t,117),c(t,e.length);for(let s=0;s<e.length;s++)P(t,e[s])}else if(e instanceof Uint8Array)n(t,116),j(t,e);else{n(t,118);let s=Object.keys(e);c(t,s.length);for(let o=0;o<s.length;o++){let r=s[o];U(t,r),P(t,e[r])}}break;case"boolean":n(t,e?120:121);break;default:n(t,127)}},d=class extends i{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&c(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}},k=class extends i{constructor(e){super(),this.s=e}write(e){u(this,e-this.s),this.s=e}},R=class extends i{constructor(e){super(),this.s=e,this.count=0}write(e){this.s===e&&this.count>0?this.count++:(this.count>0&&c(this,this.count-1),this.count=1,u(this,e-this.s),this.s=e)}},y=t=>{t.count>0&&(u(t.encoder,t.count===1?t.s:-t.s),t.count>1&&c(t.encoder,t.count-2))},I=class{constructor(){this.encoder=new i,this.s=0,this.count=0}write(e){this.s===e?this.count++:(y(this),this.count=1,this.s=e)}toUint8Array(){return y(this),l(this.encoder)}},D=class{constructor(){this.encoder=new i,this.s=0,this.count=0}write(e){this.s+this.count===e?this.count++:(y(this),this.count=1,this.s=e)}toUint8Array(){return y(this),l(this.encoder)}},q=t=>{if(t.count>0){let e=t.diff*2+(t.count===1?0:1);u(t.encoder,e),t.count>1&&c(t.encoder,t.count-2)}},G=class{constructor(){this.encoder=new i,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(q(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return q(this),l(this.encoder)}},O=class{constructor(){this.sarr=[],this.s="",this.lensE=new I}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new i;return this.sarr.push(this.s),this.s="",U(e,this.sarr.join("")),T(e,this.lensE.toUint8Array()),l(e)}};export{i as Encoder,D as IncUintOptRleEncoder,k as IntDiffEncoder,G as IntDiffOptRleEncoder,d as RleEncoder,R as RleIntDiffEncoder,O as StringEncoder,I as UintOptRleEncoder,Y as _writeVarStringNative,tt as _writeVarStringPolyfill,yt as createEncoder,gt as hasContent,J as length,b as set,At as setUint16,Tt as setUint32,mt as setUint8,l as toUint8Array,K as verifyLen,n as write,P as writeAny,ot as writeBigInt64,Nt as writeBigUint64,St as writeBinaryEncoder,et as writeFloat32,st as writeFloat64,g as writeOnDataView,Bt as writeUint16,Ut as writeUint32,It as writeUint32BigEndian,wt as writeUint8,T as writeUint8Array,u as writeVarInt,U as writeVarString,c as writeVarUint,j as writeVarUint8Array};
//# sourceMappingURL=encoding.js.map