{
  "name": "plugmd",
  "imports": [
    "https://get.silverbullet.md/global.plug.json"
  ],
  "functions": {
    "check": {
      "command": {
        "name": "Plug: Check",
        "mac": "Cmd-Alt-c",
        "key": "Ctrl-Alt-c"
      },
      "code": "(() => { var mod=(()=>{var F=Object.create;var d=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var C=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,n)=>(typeof require!=\"undefined\"?require:t)[n]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var f=(e,t)=>{for(var n in t)d(e,n,{get:t[n],enumerable:!0})},h=(e,t,n,o)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of S(t))!k.call(e,i)&&i!==n&&d(e,i,{get:()=>t[i],enumerable:!(o=M(t,i))||o.enumerable});return e};var E=(e,t,n)=>(n=e!=null?F(A(e)):{},h(t||!e||!e.__esModule?d(n,\"default\",{value:e,enumerable:!0}):n,e)),D=e=>h(d({},\"__esModule\",{value:!0}),e);var Te={};f(Te,{default:()=>be});function v(e,t){return g(e,n=>n.type===t)}function g(e,t){if(t(e))return[e];let n=[];if(e.children)for(let o of e.children)n=[...n,...g(o,t)];return n}function P(e,t){return g(e,n=>n.type===t)[0]}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var u={};f(u,{confirm:()=>ee,dispatch:()=>X,downloadFile:()=>B,filterBox:()=>Q,flashNotification:()=>J,getCurrentPage:()=>U,getCursor:()=>I,getSelection:()=>L,getText:()=>N,getUiOption:()=>te,hidePanel:()=>W,insertAtCursor:()=>H,insertAtPos:()=>_,moveCursor:()=>G,navigate:()=>j,openUrl:()=>V,prompt:()=>Z,reloadPage:()=>K,replaceRange:()=>z,save:()=>q,setPage:()=>$,setSelection:()=>R,setUiOption:()=>re,showPanel:()=>Y,vimEx:()=>ne});function U(){return r(\"editor.getCurrentPage\")}function $(e){return r(\"editor.setPage\",e)}function N(){return r(\"editor.getText\")}function I(){return r(\"editor.getCursor\")}function L(){return r(\"editor.getSelection\")}function R(e,t){return r(\"editor.setSelection\",e,t)}function q(){return r(\"editor.save\")}function j(e,t,n=!1,o=!1){return r(\"editor.navigate\",e,t,n,o)}function K(){return r(\"editor.reloadPage\")}function V(e){return r(\"editor.openUrl\",e)}function B(e,t){return r(\"editor.downloadFile\",e,t)}function J(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function Q(e,t,n=\"\",o=\"\"){return r(\"editor.filterBox\",e,t,n,o)}function Y(e,t,n,o=\"\"){return r(\"editor.showPanel\",e,t,n,o)}function W(e){return r(\"editor.hidePanel\",e)}function _(e,t){return r(\"editor.insertAtPos\",e,t)}function z(e,t,n){return r(\"editor.replaceRange\",e,t,n)}function G(e,t=!1){return r(\"editor.moveCursor\",e,t)}function H(e){return r(\"editor.insertAtCursor\",e)}function X(e){return r(\"editor.dispatch\",e)}function Z(e,t=\"\"){return r(\"editor.prompt\",e,t)}function ee(e){return r(\"editor.confirm\",e)}function te(e){return r(\"editor.getUiOption\",e)}function re(e,t){return r(\"editor.setUiOption\",e,t)}function ne(e){return r(\"editor.vimEx\",e)}var p={};f(p,{parseMarkdown:()=>ie});function ie(e){return r(\"markdown.parseMarkdown\",e)}var x=class{listPages(t=!1){return r(\"space.listPages\",t)}getPageMeta(t){return r(\"space.getPageMeta\",t)}readPage(t){return r(\"space.readPage\",t)}writePage(t,n){return r(\"space.writePage\",t,n)}deletePage(t){return r(\"space.deletePage\",t)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(t){return r(\"space.getAttachmentMeta\",t)}readAttachment(t){return r(\"space.readAttachment\",t)}writeAttachment(t,n,o){return r(\"space.writeAttachment\",t,n,o)}deleteAttachment(t){return r(\"space.deleteAttachment\",t)}readFile(t,n){return r(\"space.readFile\",t,n)}getFileMeta(t){return r(\"space.getFileMeta\",t)}writeFile(t,n,o){return r(\"space.writeFile\",t,n,o)}deleteFile(t){return r(\"space.deleteFile\",t)}listFiles(t){return r(\"space.listFiles\",t)}},b=new x;var m={};f(m,{getEnv:()=>me,invokeCommand:()=>le,invokeFunction:()=>ae,listCommands:()=>ce,reloadPlugs:()=>ue});function ae(e,t,...n){return r(\"system.invokeFunction\",e,t,...n)}function le(e){return r(\"system.invokeCommand\",e)}function ce(){return r(\"system.listCommands\")}function ue(){r(\"system.reloadPlugs\")}function me(){return r(\"system.getEnv\")}var a=self.syscall;var T=E(C(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function w(){let e=await u.getText();try{await ve(e),await u.hidePanel(\"bhs\"),m.reloadPlugs()}catch(t){await u.showPanel(\"bhs\",1,t.message)}}async function ve(e){let t=await p.parseMarkdown(e),n=v(t,\"FencedCode\"),o,i,y=\"js\";for(let l of n){let s=P(l,\"CodeInfo\").children[0].text,c=P(l,\"CodeText\").children[0].text;if(s===\"yaml\"){o=T.parse(c);continue}(s===\"typescript\"||s===\"ts\")&&(y=\"ts\"),i=c}if(!o)throw new Error(\"No meta found\");if(!i)throw new Error(\"No code found\");o.dependencies=o.dependencies||{};for(let[l,s]of Object.entries(o.dependencies)){let c=await m.invokeFunction(\"server\",\"compileModule\",s);o.dependencies[l]=c}o.functions=o.functions||{};for(let[l,s]of Object.entries(o.functions)){let c=await m.invokeFunction(\"server\",\"compileJS\",`file.${y}`,i,l,Object.keys(o.dependencies));s.code=c}return console.log(\"Doing the whole manifest thing\"),o}var be=w;return D(Te);})();\n return mod;})()"
    },
    "compile": {
      "command": {
        "name": "Plug: Compile",
        "mac": "Cmd-Shift-c",
        "key": "Ctrl-Shift-c"
      },
      "code": "(() => { var mod=(()=>{var F=Object.create;var d=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var k=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var f=(t,e)=>{for(var n in e)d(t,n,{get:e[n],enumerable:!0})},v=(t,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of S(e))!C.call(t,i)&&i!==n&&d(t,i,{get:()=>e[i],enumerable:!(o=M(e,i))||o.enumerable});return t};var E=(t,e,n)=>(n=t!=null?F(A(t)):{},v(e||!t||!t.__esModule?d(n,\"default\",{value:t,enumerable:!0}):n,t)),D=t=>v(d({},\"__esModule\",{value:!0}),t);var Te={};f(Te,{default:()=>be});function b(t,e){return g(t,n=>n.type===e)}function g(t,e){if(e(t))return[t];let n=[];if(t.children)for(let o of t.children)n=[...n,...g(o,e)];return n}function P(t,e){return g(t,n=>n.type===e)[0]}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var u={};f(u,{confirm:()=>ee,dispatch:()=>X,downloadFile:()=>B,filterBox:()=>Q,flashNotification:()=>J,getCurrentPage:()=>U,getCursor:()=>I,getSelection:()=>L,getText:()=>N,getUiOption:()=>te,hidePanel:()=>W,insertAtCursor:()=>H,insertAtPos:()=>_,moveCursor:()=>G,navigate:()=>j,openUrl:()=>V,prompt:()=>Z,reloadPage:()=>K,replaceRange:()=>z,save:()=>q,setPage:()=>$,setSelection:()=>R,setUiOption:()=>re,showPanel:()=>Y,vimEx:()=>ne});function U(){return r(\"editor.getCurrentPage\")}function $(t){return r(\"editor.setPage\",t)}function N(){return r(\"editor.getText\")}function I(){return r(\"editor.getCursor\")}function L(){return r(\"editor.getSelection\")}function R(t,e){return r(\"editor.setSelection\",t,e)}function q(){return r(\"editor.save\")}function j(t,e,n=!1,o=!1){return r(\"editor.navigate\",t,e,n,o)}function K(){return r(\"editor.reloadPage\")}function V(t){return r(\"editor.openUrl\",t)}function B(t,e){return r(\"editor.downloadFile\",t,e)}function J(t,e=\"info\"){return r(\"editor.flashNotification\",t,e)}function Q(t,e,n=\"\",o=\"\"){return r(\"editor.filterBox\",t,e,n,o)}function Y(t,e,n,o=\"\"){return r(\"editor.showPanel\",t,e,n,o)}function W(t){return r(\"editor.hidePanel\",t)}function _(t,e){return r(\"editor.insertAtPos\",t,e)}function z(t,e,n){return r(\"editor.replaceRange\",t,e,n)}function G(t,e=!1){return r(\"editor.moveCursor\",t,e)}function H(t){return r(\"editor.insertAtCursor\",t)}function X(t){return r(\"editor.dispatch\",t)}function Z(t,e=\"\"){return r(\"editor.prompt\",t,e)}function ee(t){return r(\"editor.confirm\",t)}function te(t){return r(\"editor.getUiOption\",t)}function re(t,e){return r(\"editor.setUiOption\",t,e)}function ne(t){return r(\"editor.vimEx\",t)}var p={};f(p,{parseMarkdown:()=>ie});function ie(t){return r(\"markdown.parseMarkdown\",t)}var x=class{listPages(e=!1){return r(\"space.listPages\",e)}getPageMeta(e){return r(\"space.getPageMeta\",e)}readPage(e){return r(\"space.readPage\",e)}writePage(e,n){return r(\"space.writePage\",e,n)}deletePage(e){return r(\"space.deletePage\",e)}listPlugs(){return r(\"space.listPlugs\")}listAttachments(){return r(\"space.listAttachments\")}getAttachmentMeta(e){return r(\"space.getAttachmentMeta\",e)}readAttachment(e){return r(\"space.readAttachment\",e)}writeAttachment(e,n,o){return r(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return r(\"space.deleteAttachment\",e)}readFile(e,n){return r(\"space.readFile\",e,n)}getFileMeta(e){return r(\"space.getFileMeta\",e)}writeFile(e,n,o){return r(\"space.writeFile\",e,n,o)}deleteFile(e){return r(\"space.deleteFile\",e)}listFiles(e){return r(\"space.listFiles\",e)}},y=new x;var m={};f(m,{getEnv:()=>me,invokeCommand:()=>le,invokeFunction:()=>ae,listCommands:()=>ce,reloadPlugs:()=>ue});function ae(t,e,...n){return r(\"system.invokeFunction\",t,e,...n)}function le(t){return r(\"system.invokeCommand\",t)}function ce(){return r(\"system.listCommands\")}function ue(){r(\"system.reloadPlugs\")}function me(){return r(\"system.getEnv\")}var a=self.syscall;var T=E(k(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function w(){let t=await u.getText();try{let e=await ve(t);await y.writePage(`_plug/${e.name}`,JSON.stringify(e,null,2)),console.log(\"Wrote this plug\",e),await u.hidePanel(\"bhs\"),m.reloadPlugs()}catch(e){await u.showPanel(\"bhs\",1,e.message)}}async function ve(t){let e=await p.parseMarkdown(t),n=b(e,\"FencedCode\"),o,i,h=\"js\";for(let l of n){let s=P(l,\"CodeInfo\").children[0].text,c=P(l,\"CodeText\").children[0].text;if(s===\"yaml\"){o=T.parse(c);continue}(s===\"typescript\"||s===\"ts\")&&(h=\"ts\"),i=c}if(!o)throw new Error(\"No meta found\");if(!i)throw new Error(\"No code found\");o.dependencies=o.dependencies||{};for(let[l,s]of Object.entries(o.dependencies)){let c=await m.invokeFunction(\"server\",\"compileModule\",s);o.dependencies[l]=c}o.functions=o.functions||{};for(let[l,s]of Object.entries(o.functions)){let c=await m.invokeFunction(\"server\",\"compileJS\",`file.${h}`,i,l,Object.keys(o.dependencies));s.code=c}return console.log(\"Doing the whole manifest thing\"),o}var be=w;return D(Te);})();\n return mod;})()"
    },
    "compileJS": {
      "env": "server",
      "code": "(() => { var mod=(()=>{var g=Object.create;var a=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var v=(r=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(r,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):r)(function(r){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+r+'\" is not supported')});var b=(r,e)=>{for(var n in e)a(r,n,{get:e[n],enumerable:!0})},c=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of x(e))!h.call(r,s)&&s!==n&&a(r,s,{get:()=>e[s],enumerable:!(o=P(e,s))||o.enumerable});return r};var T=(r,e,n)=>(n=r!=null?g(y(r)):{},c(e||!r||!r.__esModule?a(n,\"default\",{value:r,enumerable:!0}):n,r)),w=r=>c(a({},\"__esModule\",{value:!0}),r);var L={};b(L,{default:()=>I});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var l=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,o){return t(\"space.writeAttachment\",e,n,o)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,o){return t(\"space.writeFile\",e,n,o)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},d=new l;var i=self.syscall;var N=T(v(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function p(r,e,n,o){return i(\"esbuild.compile\",r,e,n,o)}var I=p;return w(L);})();\n return mod;})()"
    },
    "compileModule": {
      "env": "server",
      "code": "(() => { var mod=(()=>{var g=Object.create;var a=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var v=(r=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(r,{get:(e,n)=>(typeof require!=\"undefined\"?require:e)[n]}):r)(function(r){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+r+'\" is not supported')});var b=(r,e)=>{for(var n in e)a(r,n,{get:e[n],enumerable:!0})},c=(r,e,n,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of x(e))!h.call(r,s)&&s!==n&&a(r,s,{get:()=>e[s],enumerable:!(i=P(e,s))||i.enumerable});return r};var T=(r,e,n)=>(n=r!=null?g(y(r)):{},c(e||!r||!r.__esModule?a(n,\"default\",{value:r,enumerable:!0}):n,r)),w=r=>c(a({},\"__esModule\",{value:!0}),r);var L={};b(L,{default:()=>I});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var l=class{listPages(e=!1){return t(\"space.listPages\",e)}getPageMeta(e){return t(\"space.getPageMeta\",e)}readPage(e){return t(\"space.readPage\",e)}writePage(e,n){return t(\"space.writePage\",e,n)}deletePage(e){return t(\"space.deletePage\",e)}listPlugs(){return t(\"space.listPlugs\")}listAttachments(){return t(\"space.listAttachments\")}getAttachmentMeta(e){return t(\"space.getAttachmentMeta\",e)}readAttachment(e){return t(\"space.readAttachment\",e)}writeAttachment(e,n,i){return t(\"space.writeAttachment\",e,n,i)}deleteAttachment(e){return t(\"space.deleteAttachment\",e)}readFile(e,n){return t(\"space.readFile\",e,n)}getFileMeta(e){return t(\"space.getFileMeta\",e)}writeFile(e,n,i){return t(\"space.writeFile\",e,n,i)}deleteFile(e){return t(\"space.deleteFile\",e)}listFiles(e){return t(\"space.listFiles\",e)}},m=new l;var o=self.syscall;var N=T(v(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));function p(r){return o(\"esbuild.compileModule\",r)}var I=p;return w(L);})();\n return mod;})()"
    },
    "getPlugPlugMd": {
      "events": [
        "get-plug:plugmd"
      ],
      "code": "(() => { var mod=(()=>{var F=Object.create;var d=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var C=(t=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(t,{get:(e,r)=>(typeof require!=\"undefined\"?require:e)[r]}):t)(function(t){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+t+'\" is not supported')});var f=(t,e)=>{for(var r in e)d(t,r,{get:e[r],enumerable:!0})},h=(t,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of S(e))!k.call(t,i)&&i!==r&&d(t,i,{get:()=>e[i],enumerable:!(o=M(e,i))||o.enumerable});return t};var E=(t,e,r)=>(r=t!=null?F(A(t)):{},h(e||!t||!t.__esModule?d(r,\"default\",{value:t,enumerable:!0}):r,t)),D=t=>h(d({},\"__esModule\",{value:!0}),t);var H={};f(H,{default:()=>G});function v(t,e){return p(t,r=>r.type===e)}function p(t,e){if(e(t))return[t];let r=[];if(t.children)for(let o of t.children)r=[...r,...p(o,e)];return r}function g(t,e){return p(t,r=>r.type===e)[0]}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;var m={};f(m,{parseMarkdown:()=>$});function $(t){return n(\"markdown.parseMarkdown\",t)}var P=class{listPages(e=!1){return n(\"space.listPages\",e)}getPageMeta(e){return n(\"space.getPageMeta\",e)}readPage(e){return n(\"space.readPage\",e)}writePage(e,r){return n(\"space.writePage\",e,r)}deletePage(e){return n(\"space.deletePage\",e)}listPlugs(){return n(\"space.listPlugs\")}listAttachments(){return n(\"space.listAttachments\")}getAttachmentMeta(e){return n(\"space.getAttachmentMeta\",e)}readAttachment(e){return n(\"space.readAttachment\",e)}writeAttachment(e,r,o){return n(\"space.writeAttachment\",e,r,o)}deleteAttachment(e){return n(\"space.deleteAttachment\",e)}readFile(e,r){return n(\"space.readFile\",e,r)}getFileMeta(e){return n(\"space.getFileMeta\",e)}writeFile(e,r,o){return n(\"space.writeFile\",e,r,o)}deleteFile(e){return n(\"space.deleteFile\",e)}listFiles(e){return n(\"space.listFiles\",e)}},x=new P;var u={};f(u,{getEnv:()=>j,invokeCommand:()=>L,invokeFunction:()=>I,listCommands:()=>R,reloadPlugs:()=>q});function I(t,e,...r){return n(\"system.invokeFunction\",t,e,...r)}function L(t){return n(\"system.invokeCommand\",t)}function R(){return n(\"system.listCommands\")}function q(){n(\"system.reloadPlugs\")}function j(){return n(\"system.getEnv\")}var a=self.syscall;var T=E(C(\"https://deno.land/std@0.184.0/yaml/mod.ts\"));async function z(t){let e=await m.parseMarkdown(t),r=v(e,\"FencedCode\"),o,i,y=\"js\";for(let l of r){let s=g(l,\"CodeInfo\").children[0].text,c=g(l,\"CodeText\").children[0].text;if(s===\"yaml\"){o=T.parse(c);continue}(s===\"typescript\"||s===\"ts\")&&(y=\"ts\"),i=c}if(!o)throw new Error(\"No meta found\");if(!i)throw new Error(\"No code found\");o.dependencies=o.dependencies||{};for(let[l,s]of Object.entries(o.dependencies)){let c=await u.invokeFunction(\"server\",\"compileModule\",s);o.dependencies[l]=c}o.functions=o.functions||{};for(let[l,s]of Object.entries(o.functions)){let c=await u.invokeFunction(\"server\",\"compileJS\",`file.${y}`,i,l,Object.keys(o.dependencies));s.code=c}return console.log(\"Doing the whole manifest thing\"),o}async function w(t){let e=await x.readPage(t);return console.log(\"Compiling\",t),z(e)}var G=w;return D(H);})();\n return mod;})()"
    }
  },
  "assets": {}
}